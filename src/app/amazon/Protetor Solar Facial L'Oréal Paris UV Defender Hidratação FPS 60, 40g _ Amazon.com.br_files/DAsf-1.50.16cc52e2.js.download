(()=>{let e=(e,t)=>{let i=()=>{var i,a;return null==e||null==(a=e.renderingWeblabs)||null==(i=a[t])?void 0:i.toLowerCase()};return{isT1:()=>"t1"===i(),isT2:()=>"t2"===i(),getTreatment:()=>i()}},t=()=>e(window,"ADPT_SF_HOMEPAGE_ART_THEMING_1298909"),i=()=>e(window,"ADPT_SF_LOW_RATE_METRIC_LOGGING_1256362"),a=()=>e(window,"ADPT_SF_HIGH_RATE_METRIC_LOGGING_1256364"),r=()=>e(window,"APM_STORES_JPS_JRS_SAFEFRAME_SERVER_SIDE_CREATIVE_SIZING_1230792"),n=()=>e(window,"APM_STORES_JPS_JRS_SAFEFRAME_OBSTRUCTIONS_1237329"),s=()=>e(window,"APM_STORES_JPS_JRS_SAFEFRAME_SIZING_1238561"),l=()=>e(window,"APM_STORES_JPS_JRS_SAFEFRAME_CONTINUOUS_OBSTRUCTION_CHECK_1246149"),o=()=>e(window,"APM_STORES_JPS_JRS_SAFEFRAME_H1_SAFEZONE_1279523"),d=()=>e(window,"APM_STORES_JPS_JRS_SAFEFRAME_DEDUPE_SF_VIDEO_PIXELS_1279569"),c=()=>e(window,"APM_STORES_JPS_JRS_SAFEFRAME_DEPRECATE_CHANGESIZE_1282516"),m=()=>e(window,"ADPT_SF_SERVER_SIDE_SPONSORED_LABEL_998980"),h=()=>e(window,"APM_STORES_JPS_JRS_SAFEFRAME_CREATIVE_SIZE_STYLE_1290868"),u=()=>e(window,"APM_STORES_JPS_JRS_SAFEFRAME_VIEW_RATE_EXPERIMENT_1289633"),p=(e,t,i)=>(...a)=>{try{e(...a)}catch(e){null==t||t(i||"Error in handler",e)}},g=e=>"V"===e,v=e=>E(e),w=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/,f=e=>w.test(e),b=e=>f(e)?v(e):e,y=e=>f(e)?e:I(e),I=e=>btoa(unescape(encodeURIComponent(e))),E=e=>decodeURIComponent(escape(atob(e))),S=e=>e?e.split("&c=${AAX_PAYLOAD}").join(""):e,x=e=>{var t;let i=u().getTreatment();return 1004!==e&&null!=(t=null==i?void 0:i.startsWith("t"))&&t},T=()=>{let e=u().getTreatment();return e?100*parseInt(e.substring(1)):0};var C=function(e){console.debug(e)},A=function(e,t){console.error(e,JSON.stringify(t)),k("ERROR",e,_(e,t))},M=function(e,t){console.error(e,JSON.stringify(t)),k("FATAL",e,_(e,t))},k=function(e,t,i){var a;null==(a=window.ueLogError)||a.call(window,i,{logLevel:e,attribution:"APE-safeframe",message:t+" | "})},_=function(e,t){return t instanceof Error?t:t?Error(t):Error(e)};class N{constructor(e={},t={},i={}){this.adMap=e,this.ADS_HANDLERS=t,this.viewableLatencyTrackers=i}}class R{constructor(e){this.adMap=e,this.sendMessageToAd=(e,t,i)=>{this.adMap[e].messagePort.postMessage({command:t,data:i})},this.sendCustomMessageToAd=(e,t,i)=>{this.sendMessageToAd(e,"customMessage",{key:t,data:i})}}}class D{constructor(e,t){this.supportedCommands=e,this.eventsChannel=t,this.receiveMessage=async({data:{command:e,adDetails:t,payload:i}})=>{try{let a={...this.eventsChannel,...this.supportedCommands}[e];a&&await a(t,i)}catch(e){A("Problem with message: "+JSON.stringify(i),e)}}}}let L=e=>e+"_Feedback";class O{async addSponsoredLabelWithFeedbackLink(e,t){e.appendChildTo(this.parentHtmlId,this);let i=await t.getSponsoredLabelAndFeedbackLink(this.urlPathAndParameter);if(!(null==i?void 0:i.isOk()))throw Error(`Result from the feedback service was not ok ${this.urlPathAndParameter}`);e.updateElement(this.getHtmlId(),i)}getHtmlId(){return L(this.parentHtmlId)}isHidden(){return this.hidden}exists(e){return e.exists(this.getHtmlId())}getFeedbackSpanElement(){return document.querySelector(`#${this.getHtmlId()} span`)}constructor(e,t,i,a,r,n,s){this.parentHtmlId=e,this.feedbackStyle=t,this.labelText=i,this.labelStyle=a,this.position=r,this.urlPathAndParameter=n,this.hidden=s}}class F{open(e){e.clickChildLink(this)}getHtmlId(){return L(this.parentHtmlId)}constructor(e){this.parentHtmlId=e}}class V{async createSponsoredLabelWithFeedbackLink(e,t){if(!e.exists(this.feedbackHtmlPort)){t.request();try{await e.addSponsoredLabelWithFeedbackLink(this.feedbackHtmlPort,this.feedbackApiPort),t.success(),e.isHidden()||t.labelRenderedHost()}catch(e){throw t.error(),e}}}openModal(e){e.open(this.feedbackHtmlPort)}labelRendered(e){e.labelRenderedCreative()}logTransparencyInfoMissing(e){e.transparencyInfoMissing()}constructor(e,t){this.feedbackHtmlPort=e,this.feedbackApiPort=t}}var z=/(\/b|\/s|\/l).*(node=)(\d{1,12})/,U=new Map,H=function(){if(!U.has(window.location.href)){var e=z.exec(window.location.href),t=e&&e[3]?e[3]:null;U.set(window.location.href,t)}return U.get(window.location.href)},B=function(e){var t=H();if(!e||!t)return null;var i=e.split(":");return i.splice(i.length-1,0,t),i.join(":")},$=function(e){var t=H();return t?"".concat(e,":").concat(t):null},W=function(e){return e.replace(/_/g,":")},J=function(e,t,i){if(void 0===i&&(i=1),G()){var a=function(e,t,i){t&&K("".concat(Z(e),":").concat(t),i)};a(e,t.id,i),a(e,$(t.id),i),a(e,W(t.name),i),a(e,B(W(t.name)),i)}},q=function(e,t){void 0===t&&(t=1),G()&&K(Z(e),t)},G=function(){var e;return"function"==typeof(null==(e=null==window?void 0:window.ue)?void 0:e.count)},K=function(e,t){var i;return null==(i=null==window?void 0:window.ue)?void 0:i.count(e,t)},X="adplacements",Z=function(e){return e.startsWith(X)?e:"".concat(X,":").concat(e)},j=function(e){if(window.csa)try{window.csa("Events",{producerId:"adplacements"})("setEntity",{adCreativeMetaData:e})}catch(e){A("Error with 'setEntity' CSA",e)}},Y=function(e,t,i){if(void 0===i&&(i=1),window.csa)try{window.csa("Events",{producerId:"adplacements"})("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e+":"+t.name+":"+t.id,metricValue:i},{ent:"all"})}catch(e){A("Error with 'logCsaEvent' CSA",e)}},Q=function(e,t){if(void 0===t&&(t=1),window.csa)try{window.csa("Events",{producerId:"adplacements"})("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e,metricValue:t},{ent:"all"})}catch(e){A("Error with 'incrementCounter' CSA",e)}};let ee=e=>new ea(e),et={REQUEST:"adfeedback_request",SUCCESS:"adfeedback_success",ERROR:"adfeedback_error",LABEL_RENDERED_CREATIVE:"adfeedback_sponsoredlabelrendered_creative",LABEL_RENDERED_HOST:"adfeedback_sponsoredlabelrendered_host"},ei={REQUEST:"adfeedback:request",SUCCESS:"adfeedback:success",ERROR:"adfeedback:error",LABEL_RENDERED_CREATIVE:"adfeedback:sponsoredlabelrendered:creative",LABEL_RENDERED_HOST:"adfeedback:sponsoredlabelrendered:host",LABEL_RENDERED:"adfeedback:sponsoredlabelrendered",TRANSPARENCY_INFO_MISSING:"adfeedback:transparencyinfo:missing"};class ea{request(){J(ei.REQUEST,this.placement),q(ei.REQUEST),Y(et.REQUEST,this.placement)}success(){J(ei.SUCCESS,this.placement),q(ei.SUCCESS),Y(et.SUCCESS,this.placement)}error(){J(ei.ERROR,this.placement),Y(et.ERROR,this.placement)}labelRenderedCreative(){J(ei.LABEL_RENDERED_CREATIVE,this.placement),q(ei.LABEL_RENDERED),Y(et.LABEL_RENDERED_CREATIVE,this.placement)}labelRenderedHost(){J(ei.LABEL_RENDERED_HOST,this.placement),q(ei.LABEL_RENDERED),Y(et.LABEL_RENDERED_HOST,this.placement)}transparencyInfoMissing(){J(ei.TRANSPARENCY_INFO_MISSING,this.placement),q(ei.TRANSPARENCY_INFO_MISSING)}constructor(e){this.placement=e}}class er{isOk(){return"ok"===this.status}constructor(e,t,i){this.status=e,this.html=t,this.script=i}}class en{async getSponsoredLabelAndFeedbackLink(e){let t=await window.fetch(this.windowRepo.origin()+e);if(t.ok){let e=await t.json();return new er(e.status,e.html,e.script)}throw Error("Could not fetch the feedback html/link/script/label")}constructor(e){this.windowRepo=e}}class es{appendChildTo(e,t){var i,a;function r(e,t){let i=document.createElement("div");return i.setAttribute("id",t.getHtmlId()),i.classList.add("ape-feedback"),i.style.position="relative",i.style.height="auto",i.style.minHeight="20px",i.style.textAlign=i.id.includes("hero-quick-promo_Desktop_placement_Feedback")?"left":"right",i.style.padding="0",i.style.marginTop="2px",i.style.display=t.feedbackStyle.display,e.endsWith("_wrapper")&&(e.includes("-ilm")||(i.style.maxWidth="min(100vh, 100vw)"),i.style.marginLeft="auto",i.style.marginRight="auto",i.style.padding="0 5px"),i.append(function(e){let t=document.createElement("div");return t.innerHTML=e.labelText,el(t,e.labelStyle),t}(t)),i}1===t.position?null==(i=document.getElementById(e))||i.prepend(r(e,t)):0===t.position&&(null==(a=document.getElementById(e))||a.append(r(e,t)))}updateElement(e,t){let i=document.getElementById(e);if(i)for(let e of(i.innerHTML=t.html,eo(i,t),i.children))"DIV"===e.tagName?e.removeAttribute("style"):"A"===e.tagName&&(e.style.removeProperty("position"),e.style.removeProperty("top"),e.style.removeProperty("right"),e.style.removeProperty("display"))}clickChildLink(e){let t=document.getElementById(e.getHtmlId());for(let e of(null==t?void 0:t.children)||[]){var i;if("A"===(i=e).tagName||"DIV"===i.tagName)return void e.click()}}exists(e){return!!document.getElementById(e)}}let el=(e,t)=>{for(let i in t)e.style.setProperty(i,t[i])},eo=(e,t)=>{ed(e).innerHTML=t.script},ed=e=>{let t=document.createElement("script");return e.prepend(t),t},ec={code:"BE",hostname:"www.amazon.com.be",name:"Belgium"},em={code:"FR",hostname:"www.amazon.fr",name:"France"},eh={code:"DE",hostname:"www.amazon.de",name:"Germany"},eu={code:"IT",hostname:"www.amazon.it",name:"Italy"},ep={code:"NL",hostname:"www.amazon.nl",name:"Netherlands"},eg={code:"PL",hostname:"www.amazon.pl",name:"Poland"},ev={code:"ES",hostname:"www.amazon.es",name:"Spain"},ew={code:"SE",hostname:"www.amazon.se",name:"Sweden"},ef=e=>location.hostname===e.hostname,eb=()=>ef(ec)||ef(em)||ef(eh)||ef(eu)||ef(ep)||ef(eg)||ef(ev)||ef(ew),ey=e=>!eb()||eI(e),eI=e=>{var t,i,a,r,n,s;let l=[];eS(null==e||null==(a=e.url)||null==(i=a.parameters)||null==(t=i.adPlacementMetaData)?void 0:t.slotName)&&l.push("DSA Error: slotName missing");let o=null==e||null==(s=e.url)||null==(n=s.parameters)||null==(r=n.adCreativeMetaData)?void 0:r.adCreativeDetails;for(let e of((!o||o.length<=0)&&l.push("DSA Error: transparency info missing"),null==o||o.every(e=>eE(e,l)),l))A(e);return l.length<=0},eE=(e,t)=>{var i,a,r,n,s;e.version||t.push("DSA Error: version missing"),eS(e.advertiserIdNS)&&t.push("DSA Error: advertiserIdNS missing"),((null==(i=e.selectionSignals)?void 0:i.context)===void 0||(null==(a=e.selectionSignals)?void 0:a.context)===null)&&t.push("DSA Error: selectionSignals.context missing"),((null==(r=e.selectionSignals)?void 0:r.location)===void 0||(null==(n=e.selectionSignals)?void 0:n.location)===null)&&t.push("DSA Error: selectionSignals.location missing"),eS(null==(s=e.selectionSignals)?void 0:s.pastActivity)&&t.push("DSA Error: selectionSignals.pastActivity missing")},eS=e=>!(null==e?void 0:e.trim()),eP=()=>new ex(new V(new es,new en({origin:()=>window.location.origin})));class ex{async addSponsoredLabel({parentHtmlId:e,placement:t,feedback:i}){return ey(i)?(i.hidden&&(Object.assign(i.style,{display:"none"}),Object.assign(i.label.style,{display:"none"})),await this.feedbackService.createSponsoredLabelWithFeedbackLink(eC(e,i),ee(t)),!0):(this.feedbackService.logTransparencyInfoMissing(ee(t)),A("Transparency Information missing"),!1)}openModal(e){this.feedbackService.openModal(new F(e))}labelRendered({placement:e}){this.feedbackService.labelRendered(ee(e))}constructor(e){this.feedbackService=e}}let eT=e=>"/af/feedback-link?pl="+e,eC=(e,t)=>{let i=JSON.parse(JSON.stringify(t.url.parameters));return i.adPlacementMetaData.pageUrl=y(i.adPlacementMetaData.pageUrl),new O(e,t.style,t.label.text,t.label.style,+("TOP"===t.position),eT(encodeURIComponent(JSON.stringify(i))),t.hidden)},eA=e=>{eP().labelRendered({placement:{id:e.placementId,name:e.placementName}})},eM=e=>{var t;eP().openModal(null!=(t=e.adUnitWrapperId)?t:e.adUnitPlacementId)},ek=async e=>{if(!await eP().addSponsoredLabel(e_(e)))throw Error("Failed to create sponsored label and feedback link")},e_=e=>{var t;let i=e.adPlacementMetaData,a=e.adFeedbackInfo;return{parentHtmlId:null!=(t=e.adUnitWrapperId)?t:e.adUnitPlacementId,placement:{id:e.placementId,name:e.placementName},feedback:{position:"BOTTOM",hidden:!a.boolFeedback,style:e.feedbackDivStyle,url:{parameters:{adPlacementMetaData:{adElementId:i.adElementId,pageType:i.pageType,pageUrl:y(i.pageUrl),slotName:i.slotName},adCreativeMetaData:e.adCreativeMetaData}},label:{text:b(a.sponsoredText),style:e.advertisementStyle}}}},eN={DESKTOP:16,MSHOP:10,MWEB:10},eR=e=>(null==e?void 0:e.length)>1&&"%"===e.charAt(e.length-1),eD=e=>eR(e)?e:`${parseInt(e)}px`,eL=(e,t="MWEB")=>{if(eR(e))return e;let i=parseFloat(e),a=eN[t];return i&&a?`${i/a}lh`:"inherit"},eO=(e,i)=>{if(r().isT1())return;let a=new Set(["bf4ab3db-618a-4853-ae89-3ad3bd17df16","dd4c5e61-fe9a-4d91-9deb-25fa60557719","da326e4a-90bd-4da3-a526-53301eb2c6a0","ca609359-3cb9-4984-8830-231c22e978d3","15554fd8-4c3e-45c6-ae61-84c65966f5d1","1396c5b8-45a1-4618-9a09-0b84209807f9","d9fb239d-fcde-414f-98a8-409c81052388","b60ea84b-3e24-44dc-9fdb-35bb2fb1fe5c","75b4c7aa-4c22-49d3-8371-15ca116eaf1f","ef368293-2611-4cef-8050-4fcd9b97f12e","db5cbac6-5194-4b52-9929-9ec0bbfed990","6479c6f3-a9c2-4d7c-9d1a-45008113fe0c"]);t().isT1()&&a.has(e)&&(i&&(i.style.background="linear-gradient(to right, #ffc266, #fff, #c7ffbe)"),i&&(i.style.margin="0px"))},eF="nav-ewc-persistent-hover",eV=e=>{e4(e.slotName)&&(r().isT1()||eH(document.getElementById(e.adUnitPlacementId)))},ez=()=>null!==document.querySelector(`.${eF}`),eU=e=>"attributes"===e.type&&"class"===e.attributeName&&e.target.classList.contains(eF),eH=e=>{if(ez())return void eB(e);new MutationObserver((t,i)=>{if(t.some(eU))try{eB(e),i.disconnect()}catch(e){A("Failed to resize ILM for EWC.",e)}}).observe(window.document.documentElement,{attributes:!0,attributeFilter:["class"]})},eB=e=>{let t=document.querySelector("div#nav-flyout-ewc");if(null===e||null===t)return void A(`could not find placementDiv (value was: ${e}) or ewc (value was: ${t})`);e$(e,t.offsetWidth)},e$=(e,t)=>{var i,a;let r=document.createElement("style");r.innerHTML=`@media screen and (min-width: 1500px) { div[id$=${e.id}] {
        width: calc(100vw - ${t+5}px) !important;
        margin-left: calc(-50vw + 50% + ${t/2}px) !important;
        margin-right: calc(-50vw + 50% + ${t/2}px) !important;
    `,null==(a=document)||null==(i=a.body)||i.appendChild(r)},eW="APE_CW_METRICS",eJ=!1,eq=e=>{eJ||(window.addEventListener("beforeunload",()=>ej()),eJ=!0);let t=eG();t.push(e),t.length>=10?eK(t):eZ(t)},eG=()=>{let e=localStorage.getItem(eW);if(!e)return[];try{return JSON.parse(e)}catch(e){return[]}},eK=e=>{navigator.sendBeacon("https://qdbx3pbnx6veby23pzgaowu3q40tmmrr.lambda-url.us-east-1.on.aws",JSON.stringify(eX(e))),localStorage.removeItem(eW)},eX=e=>({metrics:e,xApiKey:"aUAZqFtiIp6VxqpW3coqZ2JdZnV3RN9S8yKMRIdJ"}),eZ=e=>{localStorage.setItem(eW,JSON.stringify(e))},ej=()=>{let e=eG();e.length>0&&eK(e)},eY=({metricName:e,adDetails:t,count:i=1,additionalDimensions:r={}})=>{a().isT1()&&eq(e0(e,i,e1(t,r)))},eQ=({metricName:e,adDetails:t,count:a=1,additionalDimensions:r={}})=>{i().isT1()&&eq(e0(e,a,e1(t,r)))},e0=(e,t,i)=>({metricName:e,timestamp:new Date().getTime(),value:t,dimensions:i}),e1=(e,t)=>{var i,a;return{app:"SF",siteName:e.siteName,slotName:e.slotName,pageType:e.pageType,placementId:e.placementId,mediaType:e.mediaType,programId:null==(i=e.adCreativeMetaData)?void 0:i.adProgramId,creativeTemplateName:null==(a=e.adCreativeMetaData)?void 0:a.adCreativeTemplateName,deviceType:e.deviceType,...t}},e2=["desktop-detail-ilm","vindp-desktop-atf-ilm","fresh-desktop-detail-ilm","wfm-desktop-detail-ilm","alm-weis-desktop-detail-ilm","alm-save-desktop-detail-ilm","alm-lucky-desktop-detail-ilm","alm-bristol-desktop-detail-ilm","alm-rite-desktop-detail-ilm","alm-bartell-desktop-detail-ilm","alm-cardenas-desktop-detail-ilm","alm-petfoodexpress-desktop-detail-ilm","alm-allthebestpetcare-desktop-detail-ilm"],e5=["mobile-detail-ilm","mobile-app-detail-ilm","fresh-mobile-detail-ilm","fresh-mobile-detail-ilm-v1","wfm-mobile-detail-ilm-v1"],e9=["asr-indie-manga-banner","asr-indie-fliptoon-banner","asr-managed-fliptoon-banner","fresh-ad-left","fresh-ad-left-2","alm-wfm-fresh-ad-left","wfm-ad-left-2","alm-monoprix-fresh-ad-left","alm-monoprix-ad-left-2","alm-morrisons-fresh-ad-left","alm-morrisons-ad-left-2","alm-dia-fresh-ad-left","alm-dia-ad-left-2","alm-weis-ad-left","alm-weis-ad-left-2","alm-save-ad-left","alm-save-ad-left-2","alm-lucky-ad-left","alm-lucky-ad-left-2","alm-bristol-ad-left","alm-bristol-ad-left-2","alm-rite-ad-left","alm-rite-ad-left-2","alm-bartell-ad-left","alm-bartell-ad-left-2","alm-cardenas-ad-left","alm-cardenas-ad-left-2","alm-petfoodexpress-ad-left","alm-petfoodexpress-ad-left-2","alm-allthebestpetcare-ad-left","alm-allthebestpetcare-ad-left-2","alm-coop-ad-left","alm-coop-ad-left-2","alm-pampanorama-ad-left","alm-pampanorama-ad-left-2","alm-iceland-ad-left","alm-iceland-ad-left-2","alm-arcs-ad-left","alm-arcs-ad-left-2","alm-seijoishii-ad-left","alm-seijoishii-ad-left-2","alm-life-ad-left","alm-life-ad-left-2","alm-tegut-ad-left","alm-tegut-ad-left-2","merchandised-search-top-1","merchandised-search-7","auto-left-advertising-1","auto-left-advertising-2","gwm-atf-dashboard"];class e3{resize(e){var t;if(!this.isAllowedSize(e))return A(`Size w:'${e.width}', h:'${e.height}' is not allow-listed for '${this.name}'`),!1;let i=this.wrapperDiv,a=this.div,n=this.safeframe;return r().isT1()||(null==i||i.removeAttribute("style"),i&&(i.style.overflow="hidden"),i&&(i.style.backgroundColor="white"),a.removeAttribute("style"),a.style.lineHeight=i?"1rem":"0",i||(a.style.marginBottom="20px"),a.style.marginLeft="auto",a.style.marginRight="auto",a.style.maxHeight="inherit",a.style.maxWidth=i?"min(100vh, 100vw, 100%)":"inherit",a.style.position="relative",n.style.height="100%",n.style.width="100%",n.removeAttribute("height"),n.removeAttribute("width"),n.style.removeProperty("min-width"),n.style.removeProperty("max-height"),n.style.removeProperty("padding-bottom")),null==(t=this.card)||t.style.setProperty("padding","0"),h().isT1()||(eR(e.height)||eR(e.width)||s().isT1()&&"FIXED"===this.sizing?(a.style.width=eD(e.width),a.style.height=eD(e.height)):a.style.aspectRatio=`${parseInt(e.width)} / ${parseInt(e.height)}`),r().isT1()?i&&this.isImageOnly&&a.classList.add("is-image-oo"):i&&!this.isImageOnly&&(a.style.minHeight=eL(e.height)),a.style.setProperty("--ad-height",eD(e.height)),this.resizeHandleSpecialCases(e),eO(this.id,this.wrapperDiv),!0}collapse(e,t){this.wrapperDiv&&(this.wrapperDiv.style.display="none"),this.div.style.display="none",eY({metricName:"placement:collapse",adDetails:e,additionalDimensions:{code:t,isBlank:`${e7(e)}`,creativeId:e.adCreativeMetaData.adCreativeId}})}resizeHandleSpecialCases(e){let t=this.div;if(e8(this.slotName,e)){if(s().isT1())return;t.style.maxWidth=eD(e.width)}else if(e6(this.slotName)){var i;if(r().isT1())return;let e=this.wrapperDiv;null==e||e.style.setProperty("width","100vw"),null==e||e.style.setProperty("margin-left","calc(-50vw + 50%)"),null==e||e.style.setProperty("margin-right","calc(-50vw + 50%)"),t.style.removeProperty("aspect-ratio"),t.style.removeProperty("max-width"),t.style.height=eL("50px"),null==(i=t.closest(".a-container"))||i.style.setProperty("padding-top","0")}else if(e4(this.slotName)){if(r().isT1())return;t.style.removeProperty("aspect-ratio"),t.style.removeProperty("max-width"),t.style.height="55px",t.style.width="100vw",t.style.marginLeft="calc(-50vw + 50%)",t.style.marginRight="calc(-50vw + 50%)",ez()&&(t.style.width="100%",t.style.removeProperty("margin-left"),t.style.removeProperty("margin-right"));let e=document.createElement("style");e.innerHTML=`@media screen and (max-width: 1000px) {div[id$=${this.div.id}] { width: 100% !important; margin-left: 0 !important; margin-right: 0 !important; }}`,this.div.prepend(e);let i=document.createElement("style");i.innerHTML=`#${t.id}_Feedback { margin-right: 10px; }`,t.prepend(i)}else if("hero-quick-promo"===this.slotName||"fresh-hero-quick-promo"===this.slotName||"wfm-hero-quick-promo"===this.slotName){if(r().isT1())return;this.div.style.maxWidth="650px",this.div.style.removeProperty("margin-left"),this.div.style.removeProperty("margin-right")}}get wrapperDiv(){return this.wrapperDivId?document.getElementById(this.wrapperDivId):null}get div(){return document.getElementById(this.divId)}get safeframe(){return document.getElementById(this.safeframeId)}get card(){return document.getElementById(`ape_${this.name}_aui_card`)}constructor(e,t,i,a,r,n,s,l,o=!1){this.id=e,this.name=t,this.wrapperDivId=i,this.divId=a,this.safeframeId=r,this.slotName=n,this.allowedSizes=s,this.sizing=l,this.isImageOnly=o,this.isAllowedSize=e=>this.allowedSizes.some(t=>eD(e.height)===t.height&&eD(e.width)===t.width)}}let e4=e=>e2.includes(e),e6=e=>e5.includes(e),e8=(e,t)=>970===parseInt(t.width)||980===parseInt(t.width)||728===parseInt(t.width)||e9.includes(e),e7=e=>{let t=e.htmlContentEncoded.match(/<div id="ad">\s*(.*?)\s*<\/div>/s);return!!t&&""===t[1].trim()},te=(e,t=!1)=>tt(e,[],t),tt=(e,t,i=!1)=>{var a;return new e3(e.placementId,e.placementName,e.adUnitWrapperId,e.adUnitPlacementId,e.adUnitIframeId,e.slotName,(null!=(a=e.allowedSizes)?a:[]).concat({height:eD(e.size.height),width:eD(e.size.width)}).concat(t.map(e=>({height:eD(e.height),width:eD(e.width)}))),e.sizing,i)},ti=[{p:50,t:2,def:"iab"}],ta=[{p:0,t:0,def:"amzn"},{p:50,t:1,def:"iab"},{p:100,t:1,def:"groupm"}],tr=[{p:0,t:0,def:"amzn"},{p:30,t:1,def:"iab"},{p:100,t:1,def:"groupm"}],tn=()=>window.innerHeight||document.documentElement.clientHeight,ts=()=>window.innerWidth||document.documentElement.clientWidth,tl=e=>e.getBoundingClientRect().top-tn(),to=(e,t)=>({t:e.top,l:e.left,r:e.right,b:e.bottom,w:e.width,h:e.height,z:t}),td=e=>to(e.getBoundingClientRect(),Number(window.getComputedStyle(e,null).zIndex)),tc=e=>tm(td(e)),tm=e=>{let t=tv(e);return{t:e.t,l:e.l,r:e.r,b:e.b,w:e.w,h:e.h,z:e.z,xiv:t.xiv,yiv:t.yiv,iv:t.iv}},th=()=>{let e=window.screenY?window.screenY:window.screenTop,t=window.screenX?window.screenX:window.screenLeft,i=ts(),a=tn();return{t:e,l:t,w:i,h:a,b:e+a,r:t+i}},tu=e=>{let t=th(),i=tc(e),a=tw(e);return{atf:tp(e),geom:{win:t,self:i,exp:a},payload:{wh:t.h,ww:t.w,sx:window.scrollX,sy:window.scrollY,ah:i.h,aw:i.w,top:i.t,left:i.l}}},tp=e=>{let t=function(e){let t=document.body.getBoundingClientRect();if(tg(t))return null;let i=td(e),a=tn(),r=ts();return Number(Math.min(1,Math.max(0,Math.max(0,Math.min(t.left+r,i.r)-i.l)*Math.max(0,Math.min(t.top+a,i.b)-i.t)/(i.h*Math.min(i.w,r)))).toFixed(2))}(e);return null==t?"unknown":t>=.5},tg=e=>0===e.width&&0===e.height,tv=e=>{let t=ts(),i=tn(),a=Math.max(0,tb(e.t,e.b,i)),r=Math.max(0,tb(e.l,e.r,t)),n=a*r,s=e.h*Math.min(e.w,t);return 0!==s||0!==n?{xiv:Number(Math.min(1,r/e.w).toFixed(2)),yiv:Number(Math.min(1,a/e.h).toFixed(2)),iv:Number(Math.min(1,Math.max(0,n/s)).toFixed(2))}:{xiv:0,yiv:0,iv:0}},tw=e=>tf(e.getBoundingClientRect()),tf=e=>({t:e.top,l:e.left,r:ts()-e.right,b:tn()-e.bottom,xs:+(Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>ts()),yx:+(Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>tn())}),tb=(e,t,i)=>{let a=0;return"visible"!==document.visibilityState?a:Math.min(a=e>0?i-e:t>0?Math.min(t,i):0,t-e)},ty=(e,t)=>{let i=td(e),a=td(t),r=ts(),n=tn();return i&&a&&(Math.abs(i.t-a.b)<n||Math.abs(i.b-a.t)<n)&&(Math.abs(i.l-a.r)<r||Math.abs(i.r-a.l)<r)},tI=e=>{let t=parseInt(e.size.height)*parseInt(e.size.width)>=242500;return"V"===e.mediaType?ti:t?tr:ta};function tE(e,t,i){var a,r=i||{},n=r.noTrailing,s=void 0!==n&&n,l=r.noLeading,o=void 0!==l&&l,d=r.debounceMode,c=void 0===d?void 0:d,m=!1,h=0;function u(){a&&clearTimeout(a)}function p(){for(var i=arguments.length,r=Array(i),n=0;n<i;n++)r[n]=arguments[n];var l=this,d=Date.now()-h;function p(){h=Date.now(),t.apply(l,r)}function g(){a=void 0}!m&&(o||!c||a||p(),u(),void 0===c&&d>e?o?(h=Date.now(),s||(a=setTimeout(c?g:p,e))):p():!0!==s&&(a=setTimeout(c?g:p,void 0===c?e-d:e)))}return p.cancel=function(e){var t=(e||{}).upcomingOnly;u(),m=!(void 0!==t&&t)},p}let tS=e=>{window.addEventListener("scroll",e),window.addEventListener("resize",e),document.addEventListener("visibilitychange",e)},tP=e=>{window.removeEventListener("scroll",e),window.removeEventListener("resize",e),document.removeEventListener("visibilitychange",e)};var tx={wb:"ues",bb:"uet",af:"uet",cf:"uet",be:"uet",ld:"uex"},tT=function(e){var t,i,a=e.latencyEvent,r=e.scope,n=e.placement,s=e.timestamp;tC(a)&&(tA(a,tM(r),n.id,s),tA(a,tM(r),W(n.name),s),tA(a,tM(r),null!=(t=B(n.name))?t:void 0,s),tA(a,tM(r),null!=(i=$(n.id))?i:void 0,s))},tC=function(e){return"function"==typeof window[tx[e]]},tA=function(e,t,i,a){void 0===a&&(a=new Date);var r=tx[e];i&&"function"==typeof window[r]&&window[r](e,t+i,{wb:1},a)},tM=function(e){return"adplacements:"+tk(e)},tk=function(e){return e?"".concat(e,":"):""},t_=function(e,t,i){if(window.csa)try{window.csa("Content",{element:e})("mark",t,null==i?void 0:i.getTime())}catch(e){A("Error with 'mark' CSA",e)}};class tN{sendLatencyMetric({latencyMetricType:e,placementId:t,placementName:i,placementDivId:a,timestamp:r}){tT({latencyEvent:e.csmKey,scope:e.csmMessage,placement:{id:t,name:i},timestamp:r}),t_(document.getElementById(a),e.csaKey,r)}}let tR=()=>new tN,tD="sfImpression",tL="LightAdImpression",tO="viewablelatency",tF=(e,t,i)=>({csaKey:e,csmKey:t,csmMessage:i}),tV=tF("bodyBegin","bb"),tz=tF("bodyBegin","bb",tD);tF("bodyBegin","bb",tL),tF("bodyEnd","be"),tF("clickToATF","af"),tF("criticalFeature","cf"),tF("criticalFeature","cf",tD),tF("criticalFeature","cf",tL),tF("loaded","ld"),tF("loaded","ld",tD),tF("loaded","ld",tL);let tU=tF("viewablelatency:bodyBegin","bb",tO),tH=tF("viewablelatency:loaded","ld",tO),tB=(e,t,i)=>e>0?i>e:t>0,t$=(e,t,i,a,r,n)=>{var s,l,o;let d=null==(o=document)||null==(l=o.getElementById)||null==(s=l.call(o,i))?void 0:s.getBoundingClientRect();if(d&&tB(d.top,d.bottom,tn())&&tB(d.left,d.right,ts())){if(tR().sendLatencyMetric({latencyMetricType:tU,placementId:r,placementName:a,placementDivId:i,timestamp:new Date}),e[n].loaded){tR().sendLatencyMetric({latencyMetricType:tH,placementId:r,placementName:a,placementDivId:i,timestamp:new Date});let e={id:r,name:a};J("adplacements:htmlviewed:loaded:",e),J("adplacements:htmlviewed",e)}t.viewed=!0,tP(t.tracker)}},tW=(e,t)=>{if(!e[t.arid]){e[t.arid]={valid:!1};try{let i=e[t.arid];t$(e,i,t.adUnitPlacementId,t.placementName,t.placementId,t.arid);let a=p(tE(20,()=>{t$(e,i,t.adUnitPlacementId,t.placementName,t.placementId,t.arid)}),A);tS(a),i.tracker=a,i.valid=!0}catch(e){throw A("Error initializing viewable latency instrumentation",e),e}}},tJ=e=>{try{J("coordinate:x",e,e.div.getBoundingClientRect().x),J("coordinate:y",e,e.div.getBoundingClientRect().y)}catch(e){return}},tq=e=>{q("resize:size:request"),tG(e)&&("100%"===e.size.width||"100%"===e.size.height?eQ({metricName:"resize:size:differresponsive",adDetails:e}):eQ({metricName:"resize:size:differfixed",adDetails:e})),tK(e)||(eQ({metricName:"creativesize:slotsizediffer",adDetails:e}),q("resize:size:differ"))},tG=e=>{let t=(e,t)=>"100%"===e?0!==t:parseInt(e)!==t;return t(e.size.width,e.creative.size.width)||t(e.size.height,e.creative.size.height)},tK=e=>{let t=e.creative.size;return!t||0===t.width||0===t.height||e.slotSizes.some(e=>e.width===t.width&&e.height===t.height)},tX=(e,t)=>{let i=e=>eR(e)?e:parseInt(e),a=i(t.height),r=i(t.width),n=i(e.size.width),s=i(e.size.height);eQ({metricName:"creative:size:changeSize",adDetails:e,additionalDimensions:{preSize:`${n}x${s}`,postSize:`${r}x${a}`}})},tZ=(e,t,i)=>{tR().sendLatencyMetric({latencyMetricType:tz,placementId:e.placementId,placementName:e.placementName,placementDivId:e.adUnitPlacementId}),i&&(tR().sendLatencyMetric({latencyMetricType:tV,placementId:e.placementId,placementName:e.placementName,placementDivId:e.adUnitPlacementId,timestamp:i}),tT({latencyEvent:"wb",placement:t,timestamp:i})),J("adload:start",t),Y("adload_start",t),J("adload:delayloadcallback",t),Y("adload_delayload",t)};class tj{constructor(e,t){this.hc=e,this.hmr=t,this.collapsedPlacements=new Set,this.initializeAdMap=(e,t)=>{try{this.hc.adMap[e.arid]={messagePort:t}}catch(t){A(`Error creating safeFrame ${e.slotName}`,t)}},this.secondPhaseLoadAd=async(e,t,i,a)=>{await this.setupMessageChannel(i,t,a)},this.setupMessageChannel=async(e,t,i)=>{var a,r;null==(r=performance)||null==(a=r.mark)||a.call(r,`SafeFrame: Start setupMessagePort ${t.adUnitPlacementId}`),this.initializeAdMap(t,e);let n=this.hc;n.ADS_HANDLERS[t.arid]=n.ADS_HANDLERS[t.arid]||{};let s=te(t);s.resize(t.size),tq(t),tJ(s),tZ(t,s,i),tW(n.viewableLatencyTrackers,t);try{m().isT1()||await ek(t),tY(n,t,this.hmr),tQ(t)}catch(e){throw s.collapse(t,"HOSTSETUP"),e}}}}let tY=(e,t,i)=>{e.adMap[t.arid].messagePort.onmessage=i.receiveMessage},tQ=e=>{eV(e)},t0="cod_client",t1=async(e,t)=>{if(e&&e.trim().match(/^\d{1,4}px$/g))return await t2(parseInt(e,10),t,(e,t)=>{let i=tl(e);return e&&i<=t})},t2=async(e,t,i)=>new Promise(a=>{let r=()=>{i(t,e)&&(a(),window.removeEventListener("scroll",n),window.removeEventListener("resize",n))},n=p(tE(20,()=>{r()}),A);window.addEventListener("scroll",n),window.addEventListener("resize",n),r()}),t5=(e,t,i,a,r,n)=>{let s=null==e?void 0:e[t];(null==s?void 0:s.valid)&&(s.loaded=!0,s.viewed&&(tR().sendLatencyMetric({latencyMetricType:tH,placementId:a,placementName:i,placementDivId:r,timestamp:new Date(n)}),J("htmlviewed:loaded",{id:a,name:i})))},t9=async(e,t)=>{let i,a;return new Promise(r=>{a=r,(i=new IntersectionObserver(t=>{t.forEach(t=>{t.target===e&&t.isIntersecting&&(a(t),i.unobserve(e))})},t)).observe(e)})},t3=e=>{let t=document.getElementById(e.adUnitIframeId);return t||(q("getiframe:undefined"),eQ({metricName:"html:element:missing:iframe",adDetails:e})),t},t4=async e=>{let t=t3(e),i={root:t6(t)?null:document.documentElement};await t9(t,i)},t6=e=>{let t=e;for(;t;){if("fixed"===window.getComputedStyle(t,null).getPropertyValue("position"))return!0;t=t.parentElement}return!1},t8=e=>{let t=document.getElementById(e.adUnitPlacementId);return t||(q("getplacement:undefined"),eQ({metricName:"html:element:missing:placement",adDetails:e})),t},t7=async(e,t)=>{t.firePixelsAfter&&await t1(t.firePixelsAfter,t8(t)),await t4(t),e.sendMessageToAd(t.arid,"fireImpression",{measurementMethod:t0,isNoInventory:!1})},ie=(e,t,i)=>{it(e,i);let a=t.ADS_HANDLERS[i.arid];a.viewabilityTracker=()=>{tE(50,it)(e,i)},tS(a.viewabilityTracker),new IntersectionObserver(()=>{it(e,i)},{threshold:[0,.5,1]}).observe(t8(i))},it=(e,t)=>{let i=t3(t),a=tI(t);if(i){let r=tu(i);r.viewabilityStandards=a,e.sendMessageToAd(t.arid,"updateViewability",r)}},ii="gw-video-orchestrator",ia=(e,t,i)=>{var a;null==(a=window.P)||a.when(ii).execute(a=>{try{a.subscribe(e,t,i)}catch(e){C(`gw-video-orchestrator error: ${JSON.stringify(e)}`)}})},ir=e=>il(e),is=()=>il(),il=e=>{var t;null==(t=window.P)||t.when(ii).execute(t=>{t.elect(e)})},io=null,id=(e,t,i)=>{let a=t=>i.sendCustomMessageToAd(e.arid,"videoAutoplayResponse",t);ih(e.pageType)?ia(t3(e),a,t):io===e.arid?a(!0):null===io&&iu(t3(e))?(io=e.arid,a(!0)):a(!1)},ic=()=>{is(),io=null},im=e=>{ir(t3(e)),io=e.arid},ih=e=>(null==e?void 0:e.toLowerCase())==="gateway",iu=e=>![...document.getElementsByTagName("video")].some(t=>!t.paused&&ty(e,t)),ip=(e,t,i)=>{if(""===t)throw Error("Invalid queryParamKey input to addJSONQueryParamToURL: "+JSON.stringify({queryParamKey:t}));let a=new URL(e),r=Object.assign(JSON.parse(a.searchParams.get(t)||"{}"),i);return a.searchParams.set(t,JSON.stringify(r)),a.toString()};class ig{async fire(e,t={}){this.isFired||(await fetch(this.pixelUrl(this.url,e),{keepalive:!0,mode:"no-cors",...t}),e.div.appendChild(this.pixel(e)),this.isFired=!0,this.logOnFirePixel(this.loggingContext,e))}logOnFirePixel(e,t){var i;q(`pixel:${this.logId}`),J(`pixel:${this.logId}`,t),q(`pixel:${this.logId}:${e.aaxProgramId}`),q(`pixel:${this.logId}:device:${null==(i=t.deviceType)?void 0:i.toLowerCase()}`)}constructor(e,t,i,a){this.url=e,this.loggingContext=a,this.isFired=!1,this.pixel=e=>{let t=document.createElement("img");return t.id=`${this.pixelId}_${e.name}`,t.style.display="none",t.setAttribute("pixel-url",this.pixelUrl(this.url,e)),t}}}class iv extends ig{constructor(e,t,i,a){super(e,t,i,a),this.pixelId="ape_impression",this.logId="imp:cod",this.pixelUrl=(e,t)=>{let i=e.includes(".paets.");return ip(e,"pj",i?{}:this.pixelUrlParametersLegacy())},this.pixelUrlParametersLegacy=()=>({measurementMethod:t0})}}class iw extends ig{constructor(e,t,i,a){super(e,t,i,a),this.pixelId="ape_measurability",this.logId="imp:atf",this.pixelUrl=(e,t)=>`${e.replace(/\/$/,"")}/atf/${JSON.stringify(this.pixelUrlParameters(t))}`,this.pixelUrlParameters=e=>({atf:tp(e.div)})}}let ib=(e,t)=>{let i=iI(t),a=0;for(let[t,r]of i){if(!iE(t,r))continue;let i=document.elementFromPoint(t,r);i&&iy(i,e)&&a++}return a/i.length},iy=(e,t)=>{if(!(e instanceof HTMLElement)||e===t||t.contains(e))return!1;let i=window.getComputedStyle(e);if("none"===i.display||"hidden"===i.visibility||"none"===i.pointerEvents||.7>parseFloat(i.opacity))return!1;let a=i.backgroundColor;return!("transparent"===a||/,0\)$/.test(a))&&""!==a||!!i.backgroundImage.includes("url")},iI=e=>{let t=[];for(let i=0;i<10;i++)t.push([e.left+e.width/2,e.top+e.height*(i+.5)/10]);return t},iE=(e,t)=>{let i=window.innerWidth||document.documentElement.clientWidth,a=window.innerHeight||document.documentElement.clientHeight;return e>=0&&e<=i&&t>=0&&t<=a},iS=e=>{let t=window.innerHeight||document.documentElement.clientHeight,i=window.innerWidth||document.documentElement.clientWidth,a={top:Math.max(0,e.top),left:Math.max(0,e.left),bottom:Math.min(t,e.bottom),right:Math.min(i,e.right)};if(e.top>=t||e.left>=i||e.bottom<=0||e.right<=0||e.width<=0||e.height<=0)return 0;let r=(a.right-a.left)*(a.bottom-a.top);return r/(e.width*e.height)},iP=(e,t)=>{let i=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),a=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top));return 0===i||0===a?0:i*a/(e.width*e.height)},ix=e=>{let{height:t,top:i,left:a=0,width:r=ts()}=e;return{top:i,bottom:i+t,left:a,right:a+r,width:r,height:t}},iT=e=>(null==e?void 0:e.toLowerCase())==="mshop",iC=e=>{var t;let i=e.placement.div.getBoundingClientRect();return{v:{def:e.definition,p:e.thresholdPercentage,t:e.thresholdTimeVisibleMs,ib:e.isBtr},wh:window.innerHeight||document.documentElement.clientHeight,ww:window.innerWidth||document.documentElement.clientWidth,sx:window.scrollX,sy:window.scrollY,ah:i.height,aw:i.width,top:i.top,left:i.left,ptv:(new Date().getTime()-(null!=(t=window.aPageStart)?t:0))/1e3,ttv:(new Date().getTime()-e.adStartTime)/1e3}},iA=e=>iT(e.deviceType)?"viewPixel:iab:mshop:fired":"viewPixel:iab:fired",iM=e=>{let t=e.name.toLowerCase();return t.includes("h1")||t.includes("wd-1")};class ik extends ig{fireInObserver(e,t){this.fire(t),e.unobserve(t.div),this.visibiltyChangeService.removeVisibilityChangeDetection(),this.emitObstructionRecoveryMetrics(t),this.viewabilityService.removeNativeObstructionsChangedListener()}restartInViewTimer(e,t){clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>this.checkOcclusionsAndFire(e,t),this.thresholdTimeVisibleMs),this.visibiltyChangeService.setupVisibilityChangeDetection(this.timeoutId,e,t)}startLegacyInViewTimer(e){this.legacyViewTimerTimeoutId=setTimeout(()=>this.emitLegacyFiredViewMetric(e),this.thresholdTimeVisibleMs)}checkOcclusionsAndFire(e,t){try{if(!this.isIab())return void this.fireInObserver(e,t);this.viewabilityService.isViewabilityObstructed(t,this.thresholdPercentage)?(this.wasObstructed=!0,this.restartInViewTimer(e,t)):this.fireInObserver(e,t)}catch(i){M(i),this.fireInObserver(e,t)}}track(e){new IntersectionObserver((t,i)=>{t.forEach(t=>{t.isIntersecting?this.thresholdTimeVisibleMs>0?(this.timeoutId=setTimeout(()=>this.checkOcclusionsAndFire(i,e),this.thresholdTimeVisibleMs),this.startLegacyInViewTimer(e),this.visibiltyChangeService.setupVisibilityChangeDetection(this.timeoutId,i,e)):this.fireInObserver(i,e):(clearTimeout(this.timeoutId),clearTimeout(this.legacyViewTimerTimeoutId),clearInterval(this.shouldFirePixelIntervalId),this.visibiltyChangeService.removeVisibilityChangeDetection())})},{threshold:this.thresholdPercentage}).observe(e.div)}async fire(e){if(this.videoPixelValidator&&!this.videoPixelValidator.shouldFirePixel()&&await this.waitUntilShouldFirePixel(),this.impressionPixel&&x(this.loggingContext.aaxProgramId)){await this.impressionPixel.fire(e,{priority:"high"});let t={priority:"low"};setTimeout(()=>{super.fire(e,t)},T())}else super.fire(e)}waitUntilShouldFirePixel(){return new Promise(e=>{this.shouldFirePixelIntervalId=setInterval(()=>{this.videoPixelValidator&&this.videoPixelValidator.shouldFirePixel()&&(clearInterval(this.shouldFirePixelIntervalId),e())},100)})}get pixelId(){return`ape_viewability_${this.definition}`}set isBtr(e){this._isBtr=e}constructor(e,t,i,a,r,n,s,l,o,d,c){super(e,t,i,a),this.thresholdPercentage=r,this.thresholdTimeVisibleMs=n,this.definition=s,this.visibiltyChangeService=l,this.viewabilityService=o,this.impressionPixel=d,this.videoPixelValidator=c,this._isBtr=!1,this.adStartTime=new Date().getTime(),this.metricsLogged=new Set,this.wasObstructed=!1,this.pixelUrl=(e,t)=>{let i={placement:t,definition:this.definition,thresholdPercentage:this.thresholdPercentage,thresholdTimeVisibleMs:this.thresholdTimeVisibleMs,isBtr:this._isBtr,adStartTime:this.adStartTime};return`${e.replace(/\/+$/,"")}/v/${JSON.stringify(iC(i))}`},this.emitObstructionRecoveryMetrics=e=>{this.wasObstructed&&this.logMetrics("viewpixel:iab:obstruction:recovered",1,e)},this.emitLegacyFiredViewMetric=e=>{let t=iA(e);this.logMetrics(t,1,e),clearTimeout(this.legacyViewTimerTimeoutId)},this.logMetrics=(e,t=1,i)=>{!this.metricsLogged.has(e)&&this.isIab()&&(q(e,t),Q(e,t),i&&(J(e,i,t),Y(e,i,t)),this.metricsLogged.add(e))},this.isIab=()=>"iab"===this.definition,this.logId=`view:${this.definition}`}}let i_="AppAdsMshopIOSPlugin",iN=e=>{var t;null==(t=window.P)||t.when(i_).execute(t=>{t.startAttributeViewThroughAppAds({skAdNetwork:e})})},iR=e=>{var t;null==(t=window.P)||t.when(i_).execute(t=>{t.endAttributeViewThroughAppAds({skAdNetwork:e})})};class iD extends iv{async fire(e){this.isFired||(iN(this.skAdNetwork),this.isFired=!0,this.logOnFirePixel(this.loggingContext,e))}constructor(e,t,i,a,r){super(e,t,i,a),this.skAdNetwork=r,this.logId="imp:skan"}}class iL extends ik{get pixelId(){return"skan_view_pixel"}async fire(e){this.isFired||(iR(this.skAdNetwork),this.isFired=!0,this.logOnFirePixel(this.loggingContext,e))}constructor(e,t,i,a,r,n,s,l){super(e,t,i,a,.5,2e3,"",n,s,void 0,l),this.skAdNetwork=r,this.logId="view:skan",this.pixelUrl=()=>{throw Error("PixelUrl should not be use for SkanViewPixel")}}}class iO extends iv{constructor(e,t,i,a){super(e,t,i,a),this.pixelId="ape_btr_impression",this.logId="imp:btr",this.pixelUrl=(e,t)=>ip(S(e),"c",{measurementMethod:"btr_client"})}}let iF={H1_DESKTOP_HEIGHT:240,H1_DESKTOP_WIDTH:940},iV=e=>{if(iz(e)){let t={height:iF.H1_DESKTOP_HEIGHT,width:iF.H1_DESKTOP_WIDTH};return iU(e.div,t)}return e.div.getBoundingClientRect()},iz=e=>"gateway_desktop-h1_desktop"===e.name.toLowerCase(),iU=(e,t)=>{let i=e.getBoundingClientRect();return new DOMRect((i.left+i.right)/2-t.width/2,i.y,t.width,t.height)},iH=e=>{let t=new Set,i=(e,i=1,a)=>{t.has(e)||(q(e,i),Q(e,i),a&&(J(e,a,i),Y(e,a,i)),t.add(e))},a=(e,t)=>{i("viewpixel:iab:obstruction",1,e),i(iB(t),1,e),"Native"===t&&i("viewPixel:iab:obstruction:native:y:top",e.div.getBoundingClientRect().top,e)},r=(t,i,r,n)=>{let s=i-e.getDOMObstructionPercentage(t.div,n)<r;return s&&a(t,"DOM"),s},n=(t,i,r,n)=>{if(iT(t.deviceType)){let s=i-e.getNativeObstructionPercentage(n)<r;return s&&a(t,"Native"),s}return!1};return{isViewabilityObstructed(e,t){if(o().isT1()&&iM(e))return!1;let i=iV(e),a=iS(i);return r(e,a,t,i)||n(e,a,t,i)},removeNativeObstructionsChangedListener(){e.removeNativeObstructionsChangedListener()}}},iB=e=>"DOM"===e?"viewPixel:iab:obstruction:UXElement":"viewPixel:iab:obstruction:native",i$="mash",iW=async e=>new Promise((t,i)=>{if(!P)return void i(Error("mash:getobstructions:missing"));let a=setTimeout(()=>{i(Error("mash:getobstructions:timeout"))},e),r=performance.now();P.when(i$).execute(e=>{var n,s;if(!(null==e||null==(s=e.appCX)||null==(n=s.uiOrchestrator)?void 0:n.getObstructions)){clearTimeout(a),i(Error("mash:getobstructions:missing"));return}e.appCX.uiOrchestrator.getObstructions({successCallback:e=>{clearTimeout(a),t({boundingBoxes:(e.boundingBoxes||[]).map(ix),isFullyObstructed:e.isFullyObstructed,latencyMs:performance.now()-r})},failCallback:()=>{clearTimeout(a),i(Error("mash:getobstructions:failure"))}})})}),iJ=e=>{if(!P)return void q("mash:missing",1);P.when(i$).execute(t=>{null==t||t.addEventListener("obstructionsChanged",e)})},iq=e=>{if(!P)return void q("mash:missing",1);P.when(i$).execute(t=>{null==t||t.removeEventListener("obstructionsChanged",e)})},iG=async e=>new Promise((t,i)=>{if(!P)return void i(Error("mash:getbottombars:missing"));let a=setTimeout(()=>{i(Error("mash:getbottombars:timeout"))},e),r=performance.now();P.when("ConfigChromeFramework").execute(e=>{e.getBottomBarsHeight({successCallback:e=>{clearTimeout(a),t({heightPx:e.visibleHeight,latencyMs:performance.now()-r})},failCallback:()=>{i(Error("mash:getbottombars:failure"))}})})}),iK=async e=>new Promise((t,i)=>{if(!P)return void i(Error("mash:getchromeinfo:missing"));let a=setTimeout(()=>{i(Error("mash:getchromeinfo:timeout"))},e),r=performance.now();P.when("MShopChrome").execute(e=>{e.getChromeInfo({successCallback:e=>{clearTimeout(a),t({heightPx:e.portraitChromeHeight,isOverlapping:e.isTransparentNav,latencyMs:performance.now()-r})},failCallback:()=>{i(Error("mash:getchromeinfo:failure"))}})})}),iX=e=>e.filter(e=>16!==Math.round(e.height)||0!==e.top),iZ=()=>{let e=[],t=!1,i=new Set,a=t=>{var i;e=((null==t||null==(i=t.detail)?void 0:i.boundingBoxes)||[]).map(ix)},r=e=>{if(e.isFullyObstructed)return l("viewPixel:iab:obstruction:native:fullviewport",1),[ix({height:window.innerHeight,top:0})];let t=iX(e.boundingBoxes);return o(e.boundingBoxes,t),t.map(ix)};(async()=>{try{if(e=[],n().isT1()){t||(iJ(a),t=!0);let i=await iW(950);e=r(i);return}let i=await iG(950);l("mash:getbottombars:latency",i.latencyMs),i.heightPx>0&&(l("mash:getbottombars:response:height",i.heightPx),e.push(ix({height:i.heightPx,top:tn()-i.heightPx})));let s=await iK(950);l("mash:gettopnav:latency",s.latencyMs),s.isOverlapping&&s.heightPx>0&&(l("mash:topchrome:response:height",s.heightPx),e.push(ix({height:s.heightPx,top:0})))}catch(e){l(e.message)}})();let s=t=>0===e.length?0:e.reduce((e,i)=>e+iP(t,i),0),l=(e,t=1,a)=>{i.has(e)||(q(e,t),Q(e,t),a&&(J(e,a,t),Y(e,a,t)),i.add(e))},o=(e,t)=>{let i=e.length-t.length;for(let e of(i>0&&l("mash:getobstructions:filtered:count",i),t))l("mash:getobstructions:response:height",e.height),l("mash:getobstructions:response:top",e.top)};return{getNativeObstructionPercentage:e=>s(e),getDOMObstructionPercentage:(e,t)=>ib(e,t),removeNativeObstructionsChangedListener(){n().isT1()&&t&&iq(a)}}};class ij extends ig{postPixelFireCleanup(e,t){e.unobserve(t.div),clearTimeout(this.viewTimerTimeoutId),clearInterval(this.obstructionCheckIntervalId),this.visibilityChangeService.removeVisibilityChangeDetection(),this.emitObstructionRecoveryMetrics(t),this.viewabilityService.removeNativeObstructionsChangedListener()}postPlacementExitsViewportCleanup(){clearTimeout(this.viewTimerTimeoutId),clearTimeout(this.legacyViewTimerTimeoutId),clearInterval(this.obstructionCheckIntervalId),clearInterval(this.shouldFirePixelIntervalId),this.visibilityChangeService.removeVisibilityChangeDetection()}fireInObserver(e,t){this.fire(t),this.postPixelFireCleanup(e,t)}startInViewTimer(e,t){this.viewTimerTimeoutId=setTimeout(()=>this.fireInObserver(e,t),this.thresholdTimeVisibleMs),this.isIab()&&this.performContinuousObstructionCheck(e,t),this.visibilityChangeService.setupVisibilityChangeDetection(this.viewTimerTimeoutId,e,t)}startLegacyInViewTimer(e){this.legacyViewTimerTimeoutId=setTimeout(()=>this.emitLegacyFiredViewMetric(e),this.thresholdTimeVisibleMs)}performContinuousObstructionCheck(e,t){this.obstructionCheckIntervalId=setInterval(()=>{try{this.viewabilityService.isViewabilityObstructed(t,this.thresholdPercentage)&&(this.wasObstructed=!0,clearTimeout(this.viewTimerTimeoutId),clearInterval(this.obstructionCheckIntervalId),this.startInViewTimer(e,t))}catch(e){M(null==e?void 0:e.message,e),clearInterval(this.obstructionCheckIntervalId)}},100)}track(e){new IntersectionObserver((t,i)=>{t.forEach(t=>{t.isIntersecting?this.thresholdTimeVisibleMs>0?(this.startInViewTimer(i,e),this.startLegacyInViewTimer(e)):this.fireInObserver(i,e):this.postPlacementExitsViewportCleanup()})},{threshold:this.thresholdPercentage}).observe(e.div)}async fire(e){if(this.videoPixelValidator&&!this.videoPixelValidator.shouldFirePixel()&&await this.waitUntilShouldFirePixel(),this.impressionPixel&&x(this.loggingContext.aaxProgramId)){await this.impressionPixel.fire(e,{priority:"high"});let t={priority:"low"};setTimeout(()=>{super.fire(e,t)},200)}else super.fire(e)}waitUntilShouldFirePixel(){return new Promise(e=>{this.shouldFirePixelIntervalId=setInterval(()=>{this.videoPixelValidator&&this.videoPixelValidator.shouldFirePixel()&&(clearInterval(this.shouldFirePixelIntervalId),e())},T())})}get pixelId(){return`ape_viewability_${this.definition}`}set isBtr(e){this._isBtr=e}constructor(e,t,i,a,r,n,s,l,o,d,c){super(e,t,i,a),this.thresholdPercentage=r,this.thresholdTimeVisibleMs=n,this.definition=s,this.visibilityChangeService=l,this.viewabilityService=o,this.impressionPixel=d,this.videoPixelValidator=c,this._isBtr=!1,this.adStartTime=new Date().getTime(),this.metricsLogged=new Set,this.wasObstructed=!1,this.pixelUrl=(e,t)=>{let i={placement:t,definition:this.definition,thresholdPercentage:this.thresholdPercentage,thresholdTimeVisibleMs:this.thresholdTimeVisibleMs,isBtr:this._isBtr,adStartTime:this.adStartTime};return`${e.replace(/\/+$/,"")}/v/${JSON.stringify(iC(i))}`},this.emitObstructionRecoveryMetrics=e=>{this.wasObstructed&&this.logMetrics("viewpixel:iab:obstruction:recovered",1,e)},this.emitLegacyFiredViewMetric=e=>{let t=iA(e);this.logMetrics(t,1,e),clearTimeout(this.legacyViewTimerTimeoutId)},this.logMetrics=(e,t=1,i)=>{!this.metricsLogged.has(e)&&this.isIab()&&(q(e,t),Q(e,t),i&&(J(e,i,t),Y(e,i,t)),this.metricsLogged.add(e))},this.isIab=()=>"iab"===this.definition,this.logId=`view:${this.definition}`}}let iY=()=>{let e=(e,t,i)=>{document.hidden?(clearTimeout(e),t.unobserve(i.div)):t.observe(i.div)};return{removeVisibilityChangeDetection(){this.activeVisChangeHandler&&(document.removeEventListener("visibilitychange",this.activeVisChangeHandler),this.activeVisChangeHandler=void 0)},setupVisibilityChangeDetection(t,i,a){this.removeVisibilityChangeDetection(),this.activeVisChangeHandler=()=>e(t,i,a),document.addEventListener("visibilitychange",this.activeVisChangeHandler)}}},iQ=e=>e.btrPixelUrl?new iO(e.btrPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext):void 0,i0=e=>new iv(e.aaxImpPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext),i1=e=>new iw(e.aaxInstrPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext),i2=e=>l().isT1()?new ij(e.aaxInstrPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext,0,0,"amzn",iY(),iH(iZ())):new ik(e.aaxInstrPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext,0,0,"amzn",iY(),iH(iZ())),i5=(e,t,i,a,r)=>{let n=iH(iZ());if("V"===e){if(!r)throw Error("videoPixelValidator is required for video media type");return i6(i,n,r)}return i9(a)&&i3(t)?i8(i,n):i7(i,n)},i9=e=>"DESKTOP"===e,i3=e=>i4(e)>=242500,i4=e=>e.getBoundingClientRect().height*e.getBoundingClientRect().width,i6=(e,t,i)=>l().isT1()?new ij(e.aaxInstrPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext,.5,2e3,"iab",iY(),t,i0(e),i):new ik(e.aaxInstrPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext,.5,2e3,"iab",iY(),t,i0(e),i),i8=(e,t)=>l().isT1()?new ij(e.aaxInstrPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext,.3,1e3,"iab",iY(),t,i0(e)):new ik(e.aaxInstrPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext,.3,1e3,"iab",iY(),t,i0(e)),i7=(e,t)=>l().isT1()?new ij(e.aaxInstrPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext,.5,1e3,"iab",iY(),t,i0(e)):new ik(e.aaxInstrPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext,.5,1e3,"iab",iY(),t,i0(e)),ae=e=>l().isT1()?new ij(e.aaxInstrPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext,1,1e3,"groupm",iY(),iH(iZ())):new ik(e.aaxInstrPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext,1,1e3,"groupm",iY(),iH(iZ())),at=e=>{if(e.skAdNetwork)return new iD(e.aaxImpPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext,e.skAdNetwork)},ai=e=>{if(e.skAdNetwork)return new iL(e.aaxInstrPixelUrl,e.abpAcceptable,e.abpStatus,e.loggingContext,e.skAdNetwork,iY(),iH(iZ()))},aa="btr:impression";var ar=function(e,t){an()&&as(e+al(t))},an=function(){var e;return"function"==typeof(null==(e=null==window?void 0:window.ue)?void 0:e.tag)},as=function(e){var t;return null==(t=null==window?void 0:window.ue)?void 0:t.tag(e)},al=function(e){return e?":".concat(e):""};let ao=e=>{if(!(null==e?void 0:e.adCreativeMetaData)||!Object.keys(e.adCreativeMetaData).length){ar("noadrender"),j({adrender:"false"});return}ar("adrender"),ar("adrender:safeframe"),ad(e),am(e),ah(e),au(e)},ad=e=>{let t=ac(e);ar("adrender","creativetemplatename:"+t),j({adrender:"true",creativeTemplateName:t,isLightAds:"false"})},ac=e=>e.adCreativeMetaData.adCreativeTemplateName?e.adCreativeMetaData.adCreativeTemplateName.toLowerCase().replace(/[^0-9a-z]/g,""):"unknown",am=e=>{e.adCreativeMetaData.adCreativeId&&(ar("adrender","creativeid:"+e.adCreativeMetaData.adCreativeId),j({creativeId:e.adCreativeMetaData.adCreativeId}))},ah=e=>{e.adCreativeMetaData.adProgramId&&(ar("adrender","programid:"+e.adCreativeMetaData.adProgramId),j({adProgramId:e.adCreativeMetaData.adProgramId}))},au=e=>{void 0!==e.isCardsFlow&&j({isCardsFlow:e.isCardsFlow.toString()})},ap=async e=>{var t;e.firePixelsAfter&&await t1(e.firePixelsAfter,t8(e)),await t4(e),null==(t=iQ(a_(e)))||t.fire({id:e.placementId,name:e.placementName,div:t8(e),deviceType:e.deviceType}),ag(e)},ag=e=>{J(aa,{id:e.placementId,name:e.placementName},1),q(aa,1),q(aa+":program:"+(e.adCreativeMetaData.adProgramId?e.adCreativeMetaData.adProgramId:"unknown"),1),q(aa+":template:"+ac(e),1)},av=(e,t)=>{A(t.message+": "+e.placementName,t.error),A(t.message,t.error)},aw=(e,t)=>{M(t.message+": "+e.placementName,t.error)},af=(e,t)=>{var i,a;let r=Error(t.message);null==(i=(a=window).ueLogError)||i.call(a,r,{logLevel:"ERROR",attribution:"sf-blank-ads",message:t.message+" | "})},ab=(e,t)=>{if(c().isT1())return void C("ChangeSize API has been deprecated");C("ChangeSize API is being deprecated"),!ay(e,t)&&te(e).resize(t)&&tX(e,t)},ay=(e,t)=>eD(e.size.width)===eD(t.width)&&eD(e.size.height)===eD(t.height),aI=(e,t)=>Y(t.metricName,{name:e.placementName,id:e.placementId}),aE=async e=>{var t,i;let a=a_(e),r={id:e.placementId,name:e.placementName,div:t8(e),deviceType:e.deviceType};await (null==(t=at(a))?void 0:t.fire(r)),null==(i=ai(a))||i.track(r)},aS="sfVideoContinuousPlaytimeSeconds",aP=e=>{var t,i;let a=0;return t=e.div,i=e=>{a=e.detail.sfVideoContinuousPlaytimeSeconds},t.addEventListener(aS,e=>{i(e)}),{shouldFirePixel:()=>a>=2}},ax=async(e,t,i,a)=>{let r=t8(e);await t1(e.firePixelsAfter,r),await t4(e);let n=a_(e),s={id:e.placementId,name:e.placementName,div:r,deviceType:e.deviceType};i1(n).fire(s),aE(e);let{amznViewPixel:l,iabViewPixel:o,groupmViewPixel:c}=aT(n,e,s);g(e.mediaType)?d().isT1()?(l.track(s),o.isBtr=a.isBtr,o.track(s),c.track(s)):ie(t,i,e):(l.track(s),o.isBtr=a.isBtr,o.track(s),c.track(s))},aT=(e,t,i)=>({amznViewPixel:i2(e),iabViewPixel:i5(t.mediaType,i.div,e,t.deviceType,aC(t.mediaType,i)),groupmViewPixel:ae(e)}),aC=(e,t)=>g(e)?aP(t):void 0,aA=new Set;class aM{constructor(e,t){this.hms=e,this.hc=t,this.changeSize=ab,this.fireImpressionWithDelay=async e=>{await t7(this.hms,e)},this.logAPIInvocation=(e,t)=>{let i=`messenger:${t.apiName}`;q(i),J(i,{id:e.placementId,name:e.placementName})},this.logError=av,this.logFatal=aw,this.logBlankAd=af,this.logCsaEvent=aI,this.sendLatencyMetric=(e,t)=>ak(e,t),this.fireViewableLatencyMetrics=async(e,t)=>{t5(this.hc.viewableLatencyTrackers,e.arid,e.placementName,e.placementId,e.adUnitPlacementId,t.adLoadedTimestamp)},this.countMetric=(e,t)=>{t.isGlobal?q(t.metricMsg,t.value):J(t.metricMsg,{id:e.placementId,name:e.placementName},t.value)},this.requestVideoAutoplay=(e,t)=>{q("common:supported:command:requestVideoAutoplay"),id(e,t,this.hms)},this.releaseVideoAutoplay=()=>{q("common:supported:command:releaseVideoAutoplay"),ic()},this.haveVideoAutoplayPermission=e=>{q("common:supported:command:haveVideoAutoplayPermission"),im(e)},this.feedbackLabelRendered=e=>{eA(e)},this.feedbackOpenModal=e=>{eM(e)},this.collapseSlot=(e,t)=>{var i,a;if(null==(i=window.APE_SF)?void 0:i.collapsedPlacements.has(e.adUnitPlacementId))return void C("Slot already collapsed");te(e).collapse(e,t),null==(a=window.APE_SF)||a.collapsedPlacements.add(e.adUnitPlacementId)},this.sendEventAddedCreative=async e=>{aA.has(e.placementId)||(e.firePixelsAfter&&await t1(e.firePixelsAfter,t8(e)),await t4(e),i0(a_(e)).fire({id:e.placementId,name:e.placementName,div:t8(e),deviceType:e.deviceType}),aA.add(e.placementId))},this.sendEventCreativeBeginToRender=ap,this.sendEventCreativeLoaded=async(e,t)=>{await ax(e,this.hms,this.hc,t)},this.resizeForImageOnlyTemplate=e=>{te(e,!0).resize(e.size)},this.sendSfVideoContinuousPlaytimeSeconds=(e,t)=>{let i=t8(e),a=new CustomEvent(aS,{detail:t});i.dispatchEvent(a)}}}let ak=(e,{latencyMetricType:t,timestamp:i})=>{tR().sendLatencyMetric({latencyMetricType:t,placementName:e.placementName,placementId:e.placementId,placementDivId:e.adUnitPlacementId,timestamp:i})},a_=e=>{var t;return{aaxImpPixelUrl:e.aaxImpPixelUrl,aaxInstrPixelUrl:e.aaxInstrPixelUrl,abpAcceptable:e.abpAcceptable,abpStatus:null!=(t=e.abpStatus)?t:"-1",btrPixelUrl:e.btrPixelUrl,skAdNetwork:e.skAdNetwork,loggingContext:{aaxProgramId:Number(e.adCreativeMetaData.adProgramId)}}},aN="nav-cart",aR=e=>{let t=document.documentElement,i=t8(e);aD(t,i),new MutationObserver(e=>{for(let t of e)"attributes"===t.type&&"class"===t.attributeName&&aD(t.target,i)}).observe(t,{attributes:!0,attributeFilter:["class"]})},aD=(e,t)=>{if(e.classList.contains("nav-ewc-persistent-hover")){t.classList.add(aN);let e=aL();t.style.setProperty("--nav-cart-full-width",`${e}px`),t.style.setProperty("--nav-cart-half-width",`${e/2}px`)}else t.classList.remove(aN)},aL=()=>{var e;let t=document.querySelector("div#nav-flyout-ewc");return null!=(e=null==t?void 0:t.offsetWidth)?e:0},aO=Array.from({length:100},(e,t)=>(t+1)/100),aF=(e,t)=>{let i=t3(e);i&&new IntersectionObserver(i=>i.forEach(i=>aV(e,t,i)),{threshold:aO}).observe(i)},aV=(e,t,{target:i,intersectionRect:a,boundingClientRect:r,intersectionRatio:n})=>{let s=a.width/r.width,l=a.height/r.height;t.sendMessageToAd(e.arid,"populateSafeFrameExt",{geom:{self:{t:r.top,l:r.left,r:r.right,b:r.bottom,xiv:s,yiv:l,iv:n,z:1,w:i.offsetWidth,h:i.offsetHeight}},inViewPercentage:Math.round(100*n)})},az=(e,t)=>{setInterval(()=>{let i=t3(e);if(!i)return;let a=i.getBoundingClientRect();t.sendMessageToAd(e.arid,"populateGeom",{geom:{self:{t:a.top,l:a.left,r:a.right,b:a.bottom,z:1,w:i.offsetWidth,h:i.offsetHeight}}})},250)},aU="adplacements:retailClickTracking:failure",aH=async e=>{let t=document.getElementById(e);null==t||t.removeAttribute("onclick");let i=null==t?void 0:t.getAttribute("data-click-addr");if(!i)return void window.ue.count("adplacements:retailClickTracking:missingUrl",1);try{(await fetch(i,{keepalive:!0})).ok?window.ue.count("adplacements:retailClickTracking:clickSuccess",1):window.ue.count(aU,1)}catch(e){window.ue.count(aU,1)}},aB=e=>({onSafeFrameReady(t){var i,a;a$("eventsChannel:onSafeFrameReady",t),null==(a=performance)||null==(i=a.mark)||i.call(a,`SafeFrame:  safeFrameReady ${t.slotName}`),e.sendMessageToAd(t.arid,"setupComputedAdDetails",{aPageStart:window.aPageStart,adStartTime:new Date().getTime()}),window.addEventListener("resize",()=>{e.sendCustomMessageToAd(t.arid,"resize",{height:window.innerHeight,width:window.innerWidth})}),ao(t),aR(t),aF(t,e),az(t,e)},onPreCreativeWrite(e){a$("eventsChannel:onPreCreativeWrite",e);let t={id:e.placementId,name:e.placementName};J("adload:renderstart",t),Y("adload_renderstart",t)},onPostCreativeWrite(e){a$("eventsChannel:onPostCreativeWrite",e);let t={id:e.placementId,name:e.placementName};J("adload:renderend",t),Y("adload_renderend",t)},onCreativeBeginToRender(e){a$("eventsChannel:onCreativeBeginToRender",e)},onCreativeLoad(e){a$("eventsChannel:onCreativeLoad",e);let t={id:e.placementId,name:e.placementName};J("adload:creativewritten",t),Y("adload_creativewritten",t)},onError(e){a$("eventsChannel:onError",e)},onClick(e){a$("eventsChannel:onClick",e),aH(e.adUnitPlacementId)}}),a$=(e,t)=>{q(e),J(e,{id:t.placementId,name:t.placementName},performance.now())},aW=()=>{let e=new N,t=new R(e.adMap),i=aB(t),a=new D(new aM(t,e),i);return new tj(e,a)},aJ=()=>{performance.mark("Safeframe: initSafeframeHostDesktop"),window.APE_SF||(performance.mark("Safeframe: initSafeframeHostDesktop init"),window.APE_SF=aW())};p(()=>aJ(),A,"Error initializing safeFrame")()})();
//# sourceMappingURL=DAsf-1.50.16cc52e2.js.map
