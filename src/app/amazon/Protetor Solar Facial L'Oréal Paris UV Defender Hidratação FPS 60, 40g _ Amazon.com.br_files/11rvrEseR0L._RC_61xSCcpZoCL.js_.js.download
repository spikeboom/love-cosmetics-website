(function(d){var c=window.AmazonUIPageJS||window.P,f=c._namespace||c.attributeErrors,g=f?f("DetailPageSnSAssets@commonAssets","DetailPageSnSAssets"):c;g.guardFatal?g.guardFatal(d)(g,window):g.execute(function(){d(g,window)})})(function(d,c,f){d.when("A","sns-logger-utils","ready").register("sns-frequency-utils",function(g,d){function e(a){return a.split("|").map(function(a){return a.trim()})}function b(a,b){return a?a.find(function(a){return a.value===b}):null}var h=function(a){if(!a||"string"!==
typeof a)return d.emitCounterMetric("ExtractFrequencyComponents:Error:InvalidInput"),null;a=e(a);if(!(2===a.length&&2<=a[0].length))return d.emitCounterMetric("ExtractFrequencyComponents:Error:InvalidFormat"),null;var b=a[0].charAt(0);return{unit:a[0].charAt(1),value:b,type:a[1]}};return{extractFrequencyComponentsFromValue:h,extractFrequencyStateData:function(a){var e=g.state("sns-frequency-params");if(!e)return d.emitCounterMetric("ExtractFrequencyState:Error:DataAbsent"),null;var c=h(a);if(!c||
!c.type)return d.emitCounterMetric("ExtractFrequencyState:Error:InvalidInput"),null;var f;c=c.type;try{f=JSON.parse(e["onml"===c?"onmlFrequencyParamsMap":"snsFrequencyParamsMap"])}catch(k){d.emitMetricAndLogError("ExtractFrequencyState:Error:ParsingError","Exception caught while parsing frequency page state for frequencyParam"+e+" for type "+c+" with exception",k),f=null}return b(f,a)}}});"use strict";d.when("A").register("sns-aui-utils",function(c){var f=c.$;return{disableButton:function(e){d.when("a-button").execute(function(b){b=
b(e);e&&b.disable()})},enableButton:function(e){d.when("a-button").execute(function(b){b=b(e);e&&b.enable()})},refreshSheetContentWithPageRefresh:function(e,b,c){d.when("a-sheet").execute(function(a){if((a=a.get(e))&&"function"===typeof a.getContentContainer&&(a=a.getContentContainer().find(b),0!==a.length)){var d=f(c).removeClass("aok-hidden");0!==d.length&&d.html()&&a.replaceWith(d)}})}}});d.register("sns-logger-utils",function(){function g(b){c.ue&&c.ue.count(b,(ue.count(b)||0)+1)}var f=function(b,
c){d.log(c?b+" : "+c:b,"FATAL","SubscribeAndSaveJS")},e=function(b,c){d.log(c?b+" : "+c:b,"ERROR","SubscribeAndSaveJS")};return{emitMetricAndLogFatal:function(b,c,a){g(b);f(c,a)},emitMetricAndLogError:function(b,c,a){g(b);e(c,a)},logFatal:f,logError:e,emitCounterMetric:g}})});
/* ******** */
(function(p){var m=window.AmazonUIPageJS||window.P,t=m._namespace||m.attributeErrors,e=t?t("DetailPageSnSAssets@dpxAssets","DetailPageSnSAssets"):m;e.guardFatal?e.guardFatal(p)(e,window):e.execute(function(){p(e,window)})})(function(p,m,t){p.when("sns-join-prime-endpoint","sns-subscribe-constants").register("sns-buybox-constants",function(e,b){return{SNS_QUANTITY_FIELD:"#mobileQuantityDropDown, #tabletQuantityDropDown",SNS_FREQUENCY_NAME:"rcxOrdFreq",SNS_OPT_IN_NAME:"snsOptIn",QUANTITY_CONTAINER:"#selectQuantity, #mobileQuantitySelection, #sns",
QUANTITY:"[name\x3dquantity]",SNS_QUANTITY:"[name\x3drcxsubsQuan]",SNS_SELECTED_FREQUENCY:"#rcxOrdFreqSns",ONML_SELECTED_FREQUENCY:"#rcxOrdFreqOnml",SNS_MOBILE_QUANTITY:".snsQuantityRadio input[name\x3d'quantity']:checked",SNS_FREQUENCY_FORM_FIELD:"[name\x3drcxOrdFreq]",SNS_FREQUENCY_FORM_FIELD_MOBILE:".rcxOrdFreq",SNS_ONMLV2_FREQUENCY_TRIGGER_DROPDOWN:"a:dropdown:rcxOrdFreq:select",SNS_ONMLV2_FREQUENCY_TRIGGER_RADIO_BUTTON:".snsOrdFreqRadio",SNS_ONMLV2_QUANTITY_TRIGGER_DROPDOWN:"a:dropdown:rcxsubsQuan:select",
SNS_ONMLV2_QUANTITY_TRIGGER_RADIO_BUTTON:".snsQuantityRadio",SNS_ONMLV2_FREQUENCY_FORM_FIELD:"#onmlv2FormFields [name\x3d'rcxOrdFreq']",SNS_SUBSCRIBE_BUTTON_FREQUENCY_FORM_FIELD:"#subscribeButtonFormFields [name\x3d'rcxOrdFreq']",SNS_ONMLV2_QUANTITY_FORM_FIELD:"#onmlv2FormFields [name\x3d'quantity']",SNS_SUBSCRIBE_BUTTON_QUANTITY_FORM_FIELD:"#subscribeButtonFormFields [name\x3d'quantity']",SNS_ONMLV2_DELIVERY_OPTION_FORM_FIELD:'#onmlv2FormFields [name\x3d"snsDeliveryOption"]',SNS_SUBSCRIBE_BUTTON_DELIVERY_OPTION_FORM_FIELD:'#subscribeButtonFormFields [name\x3d"snsDeliveryOption"]',
SNS_DELIVERY_OPTION_CHANGE_CHECKBOX_ID:"#delivery-option-change-checkbox",ONML_SELECTED_DELIVERY_OPTION_STATE:"onml-selected-delivery-option-state",RCX_ORD_FREQ_ONML_WRAPPER:"#rcxOrdFreqOnmlWrapper",RCX_ORD_FREQ_SNS_WRAPPER:"#rcxOrdFreqSnsWrapper",SNS_ONMLV2_QUANTITY_TRIGGER_DESKTOP:"#rcxsubsQuan",SNS_ONMLV2_QUANTITY_TRIGGER_MOBILE:".snsQuantityRadio",SNS_DP_FREQUENCY_TRIGGER:"#sns-dp-frequency-trigger span",SNS_OPT_IN_CHECKBOX:"#snsOptInCheckbox",SNS_OFFER_LISTING_FIELD:"#snsOfferListingID",OFFER_LISTING_FIELD:"[name\x3dofferListingID]",
SNS_FREQUENCY_SECTION:"#snsFrequencySection",SNS_SELECTED_FREQUENCY_LABEL:"#snsSelectedFrequencyLabel",SNS_FIRST_RECURRING_DELIVERY_DATE:"[id\x3dsnsFirstRecurringDeliveryDate]",SNS_BUY_USED_BUTTON:"#usedBuySection, #usedAccordionRow .a-accordion-row-a11y",ONE_CLICK_BUTTON:".onml-one-click-button",ONE_CLICK_BUTTON_ICON:".onml-one-click-button i",ONE_CLICK_BUTTON_TEXT:".onml-one-click-button input+span",BUY_NOW_BUTTON:".onml-buy-now-button",BUY_NOW_BUTTON_ICON:".onml-buy-now-button i",BUY_NOW_BUTTON_TEXT:".onml-buy-now-button input+span",
ADD_TO_CART_BUTTON:"#add-to-cart-button",ADD_TO_CART_DIV:"#addToCart",DSK_BB:"#sns",DSK_BB_DPV1:"#snsBuyBox",MOBILE_ADD_TO_CART_DIV:"#sns",MOBILE_SNS_BUYBOX:"#snsBuyBox",TABLET_ADD_TO_CART_DIV:"#snsTablet",SNS_OPT_IN_FORM_FIELD:"[name\x3dsnsOptIn]",LEGACY_SPC_FORM_INPUT:"[name\x3d'submit.rcx-subscribe']",LEGACY_SPC_FORM_INPUT_X:"[name\x3d'submit.rcx-subscribe.x']",SNS_OFFER_FORM_FIELD:".snsONMLOffer",SNS_DISCOUNT_PILL:"#snsDiscountPill",SNS_ONML_BUYBOX_UPSELL_MESSAGE_NON_TIERED:"#sns-onml-buybox-upsell-message-non-tiered",
SNS_ONML_BUYBOX_UPSELL_MESSAGE_TIERED:"#sns-onml-buybox-upsell-message-tiered",SNS_ONML_FRDD:".sns-onml-frdd",SNS_ONMLV2_FRDD:".sns-onmlv2-frdd",SNS_FREQ_BOTTOMSHEET_SELECTOR:"[id\x3dsnsFrequencyBottomSheet]",SNS_OPT_IN_FEATURE_DIV:"#snsOptIn_div",SNS_OPT_IN_INPUT_ID:"[name\x3dsnsOptIn]",SNS_ONML_INIT_INPUT_ID:"isOnmlInitialized",SNS_ONML_INIT_INPUT_SELECTOR:"#isOnmlInitialized",SNS_DATA_UPDATE_EVENT:"sns-declarative-data-update",SNS_ONML_MERCHANT_INFO:"#snsOnmlMerchantInfo",SNS_BUY_NEW_PRICE:"#onml_snsBuyNew",
CBB_BUY_NEW_PRICE:"#buyNew_cbb",NON_CBB_BUY_NEW_PRICE:"#buyNew_noncbb",SNS_PRICE_IN_BUY_USED_SECTION:"#usedBuySection #onml_snsBuyNew",CBB_SNS_BUY_NEW_PRICE:"#onml_snsBuyNew_cbb",SNS_CBB_ACCORDION_ROW:"#snsAccordionRow, #snsAccordionRowMobile, #snsAccordionRowMobileApp, #snsAccordionRowMovedUp, #snsAccordionRowMobileMovedUp, #snsAccordionRowMobileAppMovedUp, #snsAccordionRowMiddle, #snsAccordionRowMobileMiddle, #snsAccordionRowMobileAppMiddle",SNS_ONMLV2_FORM_FIELDS:"#onmlv2FormFields",SUBSCRIBE_BUTTON_FORM_FIELDS:"#subscribeButtonFormFields",
SNS_ACCORDION_HEADER_RADIO_BUTTON:'#snsAccordionRow [role\x3d"radio"], #snsAccordionRowMobile [role\x3d"radio"], #snsAccordionRowMobileApp [role\x3d"radio"], #snsAccordionRowMovedUp [role\x3d"radio"], #snsAccordionRowMobileMovedUp [role\x3d"radio"], #snsAccordionRowMobileAppMovedUp [role\x3d"radio"], #snsAccordionRowMiddle [role\x3d"radio"], #snsAccordionRowMobileMiddle [role\x3d"radio"], #snsAccordionRowMobileAppMiddle [role\x3d"radio"]',SNS_CBB_PRIME_SHIPPING:"#sns-cbb-prime-shipping-header, #sns-cbb-prime-shipping-row",
DPV2_BUY_NEW_PRICE:"#buyNew_dpv2",SUBSCRIBE_ONLY_LINK:"#subscribe-only",SUBSCRIBE_ONLY_FORM:"#sns-onml-subscribe-only",JUST_SUBSCRIBE_DIV:"#just-subscribe-button-container",GOLDBOX_DISCOUNT_MESSAGE:"#onml-goldbox-discount-message",SUBSCRIBE_ONLY_FORM_ATTRIBUTES:{name:"sns-onml-subscribe-only",id:"sns-onml-subscribe-only",method:"POST",action:"/gp/product/handle-buy-box/ref\x3donml_so_l"},SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES:b.SUBSCRIBE_FORM_ATTRIBUTES,JUST_SUBSCRIBE_FORM_ATTRIBUTES:{name:"sns-onmlv2-just-subscribe",
id:"sns-onmlv2-just-subscribe",method:"POST",action:"/gp/subscribe-and-save/pipeline/subscribe.html"},BUY_NOW_FORM_ATTRIBUTES:{name:"sns-onmlv2-buy-now",id:"sns-onmlv2-buy-now",method:"POST",action:""},SNS_LEGACY_SUBSCRIBE_FORM_ATTRIBUTES:{name:"sns-legacy-subscribe",id:"sns-legacy-subscribe",method:"POST",action:"/gp/product/handle-buy-box"},SNS_JOIN_PRIME_FORM_ATTRIBUTES:{name:"sns-join-prime",id:"sns-join-prime",method:"POST",action:""},SNS_JOIN_PRIME_FORM_ATTRIBUTES_VMF:{name:"sns-join-prime-vmf",
id:"sns-join-prime-vmf",method:"POST",action:e.endpoint},SUBSCRIBE_FORM_ATTRIBUTES:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES,SNS_ATC_DECLARATIVE:"#addToCart_feature_div #atc-declarative",SNS_SUBMIT_SECTION_ID:"#snsSubmitSection",SNS_SWITCH_SUBMIT_SECTION_ID:"#snsSwitchSubmitSection",SNS_BUY_NOW_BUTTON:"#snsBuyNowSubmit",SNS_SUBSCRIBE_ONLY_BUTTON:"#snsSubscribeOnlySubmit",SNS_DECLARATIVE_ACTION:"#sns-submit-declarative",SNS_SUBSCRIBE_ONLY_ACTION:"sns-subscribe-only",SNS_BUY_BOX_PARAMS:"sns-buybox-message-params",
SNS_BUY_BOX_PARAM_MAP:"buyboxMessageParamsMap",SNS_SELECT_DELIVERY_URL:"/gp/subscribe-and-save/dp/delivery.html/ref\x3drcxsubs_sns_delivery_url?app-nav-type\x3dmodal",SNS_SELECT_DELIVERY_OPTION_ID:"#snsDeliveryOption",SNS_DELIVERY_OPTION_SNS:"sns",SNS_DELIVERY_OPTION_ONML:"onml",SNS_BASE_PRICE:"#sns-base-price",SNS_TIERED_PRICE:"#sns-tiered-price",SNS_DELIVERY_OPTION_DIV:"#snsDeliveryOpt",ONML_DELIVERY_OPTION_DIV:"#onmlDeliveryOpt",SNS_MOD_ACCORDION_HEADER_FEATURES:"#sns-cbb-prime-shipping-header-wrapper, #accordion-header-delivery-link",
SNS_SUBSCRIPTION_PRICE:"#subscriptionPrice",SNS_DELIVERY_OPTION_SNS_LINK:"#sns-delivery-link",SNS_DELIVERY_OPTION_SNS_LINK_TEXT_IDENTIFIER:"#snsDeliveryChangeLinkText",ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK:"#accordion-header-sns-delivery-link",SNS_DELIVERY_OPTION_ONML_LINK:"#onml-delivery-link",SNS_DELIVERY_OPTION_ONML_LINK_TEXT_IDENTIFIER:"#onmlDeliveryChangeLinkText",ACCORDION_HEADER_DELIVERY_OPTION_ONML_LINK:"#accordion-header-onml-delivery-link",SNS_DELIVERY_BOTTOM_SHEET:"#snsDeliveryDateBottomSheet",
SNS_DELIVERY_BOTTOM_SHEET_SPINNER:"#snsDeliveryDateBottomSheetSpinner",SNS_DELIVERY_BOTTOM_SHEET_CONTENT:"#snsDeliveryDateBottomSheetContent",SNS_SUBSCRIBE_SUBMIT_BUTTON:"#rcx-subscribe-submit-button",SNS_DELIVERY_UPSELL:"#sns-delivery-buybox-upsell-message",SNS_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL:"#sns-delivery-buybox-upsell-message-new-or-unrecognized",SNS_DELIVERY_NON_TIERED_UPSELL:"#sns-delivery-buybox-upsell-message-non-tiered",SNS_DELIVERY_TIERED_UPSELL:"#sns-delivery-buybox-upsell-message-tiered",
ONML_DELIVERY_UPSELL:"#onml-delivery-buybox-upsell-message",ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL:"#onml-delivery-buybox-upsell-message-new-or-unrecognized-sns-customer",ONML_DELIVERY_NON_TIERED_UPSELL:"#onml-delivery-buybox-upsell-message-non-tiered",ONML_DELIVERY_TIERED_UPSELL:"#onml-delivery-buybox-upsell-message-tiered",SNS_ADD_TO_CART_FORM:"#sns-onmlv2-add-to-cart",SNS_SUBSCRIBE_FORM:"#sns-onmlv2-subscribe",JUST_SUBSCRIBE_FORM:"#sns-onmlv2-just-subscribe",BUY_NOW_FORM:"#sns-onmlv2-buy-now",
SNS_LEGACY_SUBSCRIBE_FORM:"#sns-legacy-subscribe",SNS_JOIN_PRIME_FORM:"#sns-join-prime",SNS_DELIVERY_PILL:"#sns-delivery-pill",SNS_DELIVERY_NEW_OR_UNRECOGNIZED_PILL:"#sns-delivery-new-or-unrecognized-sns-customer-pill",SNS_DELIVERY_NON_TIERED_PILL:"#sns-delivery-non-tiered-pill",SNS_DELIVERY_TIERED_PILL:"#sns-delivery-tiered-pill",ONML_DELIVERY_PILL:"#onml-delivery-pill",ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL:"#onml-delivery-new-or-unrecognized-sns-customer-pill",ONML_DELIVERY_NON_TIERED_PILL:"#onml-delivery-non-tiered-pill",
ONML_DELIVERY_TIERED_PILL:"#onml-delivery-tiered-pill",SNS_TOGGLE_BUY_BOX:"[name\x3dtoggleBuyBox]",SNS_ONMLV2_JOIN_PRIME_UPSELL:"#momAEmsg",SNS_ONMLV2_JOIN_PRIME_CHECKBOX:"#chkMom",SNS_ONMLV2_JOIN_PRIME_BUTTON:"#mom-join-button",SNS_DELIVERY_BOTTOMSHEET_IN_BUYBOX:"#snsDeliveryDateBottomSheet",SNS_SWITCH_WIDGET_ONML_URL:"/auto-deliveries/switchWidgetMobile?",SNS_SWITCH_WIDGET_LEGACY_URL:"/auto-deliveries/switchWidgetLegacy?",SNS_SWITCH_WIDGET_LEGACY_CONTINUE_URL:"/gp/subscribe-and-save/pipeline/subscribe.html?",
SNS_SWITCH_WIDGET_ONML_DESKTOP_URL:"/auto-deliveries/ajax/switchWidgetAjax?",SNS_SWITCH_WIDGET_LEGACY_DESKTOP_URL:"/auto-deliveries/ajax/switchWidgetAjaxLegacy?",SNS_SWITCH_WIDGET_PARAMS:"sns-switch-message-params",SNS_SWITCH_WIDGET_PARAM_MAP:"switchMessageParamsMap",DISCOUNT_TYPE_ZERO_BASE:"ZERO_BASE",DISCOUNT_TYPE_ZERO_STATIC:"ZERO_STATIC",GET_MYD_RECOMMENDATIONS_URL:"/auto-deliveries/ajax/viewRecommendationsAjax",SOURCE_PAGE:"dp",VIEW_CART_URL:"/gp/cart/view.html",GO_TO_CHECKOUT_URL:"/gp/cart/desktop/go-to-checkout.html?proceedToCheckout\x3d1",
SNS_HUC_GET_TREATMENT_FORM_ID:"sns-get-huc-treatment",SNS_ONML_MONTH:"M|onml",SUBSCRIBE_FORM_FIELDS:b.FORM_FIELDS,SNS_BASE_DISCOUNT_MESSAGE:".sns-base-discount-message",SNS_TIERED_DISCOUNT_MESSAGE:".sns-tiered-discount-message",SNS_SUBSCRIBER_DISCOUNT_MESSAGE_STATE_ID:"sns-subscriber-discount-message-data",SUBSCRIBER_DISCOUNT_MESSAGE_EXPERIMENT_ID:"CONSUMABLES_DP_SNS_APEX_SUBSCRIBER_DISCOUNT_MESSAGE_921625",REPLENISHMENT_SNS_FREQUENCY_POPOVER_ID:"#replenishment-sns-frequency-popover",REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID:"#replenishment-onml-frequency-popover",
REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID:"#replenishment-onml-frequency-info-popover",REPLENISHMENT_SNS_FREQUENCY_INFO_POPOVER_ID:"#replenishment-sns-frequency-info-popover",REPLENISHMENT_ONML_FREQUENCY_ACCORDION_ID:"#replenishment-onml-frequency-accordion",REPLENISHMENT_SNS_FREQUENCY_ACCORDION_ID:"#replenishment-sns-frequency-accordion",SHOW_MORE_FREQUENCY_OPTIONS_CLASS:".show-more-frequency-options-class",SHOW_MORE_FREQUENCY_OPTIONS_SECTION:".show-more-frequency-options-section",SNS_FREQUENCY_ACCORDION_ROW_PREFIX:"snsFrequencyAccordionRow-",
ONML_FREQUENCY_ACCORDION_ROW_PREFIX:"onmlFrequencyAccordionRow-",SNS_FREQUENCY_BOTTOMSHEET_SELECTOR:"#replenishment-sns-frequency-bottomsheet",ONML_FREQUENCY_BOTTOMSHEET_SELECTOR:"#replenishment-onml-frequency-bottomsheet",SNS_FREQUENCY_UNIT_WEEKS_BUTTON:"#snsFrequencyUnitButton-weeks",SNS_FREQUENCY_UNIT_MONTHS_BUTTON:"#snsFrequencyUnitButton-months",ONML_FREQUENCY_UNIT_WEEKS_BUTTON:"#onmlFrequencyUnitButton-weeks",ONML_FREQUENCY_UNIT_MONTHS_BUTTON:"#onmlFrequencyUnitButton-months",SNS_FREQUENCY_SHEET_NAME:"replenishmentsnsFrequencyBottomsheet",
SNS_PRELOADED_FREQUENCY_SHEET_CONTENT_SELECTOR:"#replenishmentsnsFrequencyBottomsheet",SNS_REFRESHED_FREQUENCY_SHEET_CONTENT_SELECTOR:"#replenishmentsnsFrequencyBottomsheetContainer #replenishmentsnsFrequencyBottomsheet",ONML_FREQUENCY_SHEET_NAME:"replenishmentonmlFrequencyBottomsheet",ONML_PRELOADED_FREQUENCY_SHEET_CONTENT_SELECTOR:"#replenishmentonmlFrequencyBottomsheet",ONML_REFRESHED_FREQUENCY_SHEET_CONTENT_SELECTOR:"#replenishmentonmlFrequencyBottomsheetContainer #replenishmentonmlFrequencyBottomsheet"}});
p.when("A","sns-utils","sns-constants","sns-buybox-constants","sns-messaging-utils","sns-atc-utils").register("sns-frequency-bottom-sheet",function(e,b,a,d,f,k){return{init:function(){function c(){var a=g(d.SNS_FREQUENCY_FORM_FIELD).val();g(d.SNS_FREQ_BOTTOMSHEET_SELECTOR).find("button[value\x3d"+a+"]").click()}var g=e.$;b.isMobileDevice()&&(b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE,c),b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,c),e.declarative("sns-frequency-selected",
"click",function(c){var h=g(d.SNS_FREQUENCY_FORM_FIELD);c=c.$target;var n=c.val(),q={};q[d.SNS_FREQUENCY_NAME]=n;k.setOnmlDeclaratives(q);h.val(n);m.setTimeout(function(){e.trigger(d.SNS_DATA_UPDATE_EVENT)},0);g(d.SNS_FIRST_RECURRING_DELIVERY_DATE).html(c.data("frdd-label"));g(d.SNS_SELECTED_FREQUENCY_LABEL).html(c.data("freq-button-label"));f.updateMessages(n);b.setOnmlUserPref(a.USER_PREFS_KEYS.SNS_FREQUENCY,n)}))}}});p.when("A","sns-constants","sns-utils","sns-buybox-constants","sns-messaging-utils",
"sns-atc-utils").register("sns-frequency-popover",function(e,b,a,d,f,k){return{init:function(){function c(){var a=g(d.SNS_FREQUENCY_FORM_FIELD).val();g("[data-a-accordion-row-name\x3dfrequencyAccordionRow"+(a-1)+"] a").click()}var g=e.$;a.isMobileDevice()||(a.registerCallbackForNameSpace(b.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE,c),e.on("a:accordion:sns-dp-frequency-accordion:select",function(c){var h=g(d.SNS_FREQUENCY_FORM_FIELD),n=g(d.SNS_DP_FREQUENCY_TRIGGER),q=g(c.selectedRow.$row[0]);c=
q.data().frequencyLabel;var q=q.data().frequencyValue,r={};r[d.SNS_FREQUENCY_NAME]=q;k.setOnmlDeclaratives(r);h.val(q);m.setTimeout(function(){e.trigger(d.SNS_DATA_UPDATE_EVENT)},0);n.text(c);f.updateMessages(q);a.setOnmlUserPref(b.USER_PREFS_KEYS.SNS_FREQUENCY,q)}))}}});p.when("A","sns-utils","sns-constants","sns-buybox-utils","sns-buybox-constants","sns-atc-utils").register("sns-opt-in-checkbox",function(e,b,a,d,f,k){return{init:function(){function c(c){var h=e.$(f.SNS_OPT_IN_CHECKBOX).is(":checked");
c=e.$(f.SNS_OPT_IN_FORM_FIELD);h&&(b.isMobileApp()||b.isTabletApp())&&k.getAddToCartStrings();var g={};g[f.SNS_OPT_IN_NAME]=h;k.setOnmlDeclaratives(g);c.val(h);m.setTimeout(function(){e.trigger(f.SNS_DATA_UPDATE_EVENT)},0);m.setTimeout(function(){d.updateAddToCartButtonLabel(h);d.updateOneClickButtonLabel(h);d.updateBuyNowButtonLabel(h)},0);d.showSnSMerchantInfoIfSnSOptInChecked(h);d.showGoldBoxDiscountMessageIfSnSOptInChecked(h);d.showSubscribeOnlyButtonIfSnSOptInChecked(h);b.setOnmlUserPref(a.USER_PREFS_KEYS.SNS_OPT_IN,
h)}function g(){var a=function(){var a=e.$("#buybox").find(".a-declarative").has("#add-to-cart-button");if(1===a.length)return a;a=e.$("#atc-declarative");return 1===a.length?a:null}();a&&a.click(function(){var c=k.getAddToCartData();if(c.inputs[f.SNS_OPT_IN_NAME]!==t){var d=b.getAStateFromDom(f.SNS_OPT_IN_FEATURE_DIV,"sns-add-to-cart-params","addToCartParams"),g=e.$(f.SNS_OPT_IN_CHECKBOX).is(":checked"),r={},r=d||{};r[f.SNS_OPT_IN_NAME]=g;var u=a.data("awMash");Object.keys(r).forEach(function(a){u.inputs[a]!==
c.inputs[a]&&(u.inputs[a]=c.inputs[a])})}})}b.isSnSEligible()&&c({snsOnLoad:!0});e.declarative("sns-opt-in-checked","change",c);b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,c);b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,b.enableSnSOptIn);b.isMobileApp()&&(b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,g),g());b.enableSnSOptIn()}}});p.when("A","sns-constants","sns-buybox-constants","sns-utils").register("sns-messaging-utils",function(e,b,a,d){var f=function(b,
c){var d=b.firstRecurringDeliveryDates[c-1];e.$(a.SNS_ONML_FRDD).each(function(){e.$(this).html(d)})};return{updateMessages:function(k){var c=d.getAStateFromDom(a.SNS_OPT_IN_FEATURE_DIV,"sns-buybox-message-params","buyboxMessageParamsMap");if(c){var g=e.$(a.SNS_ONML_BUYBOX_UPSELL_MESSAGE_NON_TIERED),l=e.$(a.SNS_ONML_BUYBOX_UPSELL_MESSAGE_TIERED);c.tieredStatusOnRecurringDeliveryDates[k-1]===b.TIERED?(g.addClass("aok-hidden"),l.removeClass("aok-hidden")):(g.removeClass("aok-hidden"),l.addClass("aok-hidden"));
g=c.discountType;l=e.$(a.SNS_DISCOUNT_PILL);c.tieredStatusOnRecurringDeliveryDates[k-1]===b.TIERED?(l.attr("data-tiered-level",b.PREMIUM),g===b.ZERO_BASE&&l.removeClass("aok-hidden")):(l.attr("data-tiered-level",b.BASE),g===b.ZERO_BASE&&l.addClass("aok-hidden"));f(c,k)}}}});p.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper").register("sns-buy-now",function(e,b,a,d){var f=e.$;e.declarative("sns-buy-now","click",function(e){if(!d.isSnsLocked()&&!d.isSnsLocked()){e=f("\x3cform\x3e",
{method:b.BUY_NOW_FORM_ATTRIBUTES.method,action:"/gp/subscribe-and-save/buynow/buy-now.html?ref\x3ddp_sns_bb_bn",id:b.BUY_NOW_FORM_ATTRIBUTES.id,name:b.BUY_NOW_FORM_ATTRIBUTES.name});var c="";if(a.isCbbTemplateEnabled())for(var g=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"snsAddressId"},{name:"snsOnmlOfferId"},{name:"snsMostCommonFrequency"},{name:"rcxOrdFreq"},{name:"quantity"}],l=0;l<g.length;l++)var h=g[l].name,n=g[l].fieldName?g[l].fieldName:h,n=a.getOnmlv2FormValueByName(n),
c=c+a.createHiddenInput(h,n);else{a.removeFormFieldsIntroducedByCbb();g=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"rcxOrdFreq"},{name:"snsOnmlOfferId"},{name:"snsMostCommonFrequency"},{name:"snsAddressId"}];for(l=0;l<g.length;l++)h=g[l].name,n=g[l].fieldName?g[l].fieldName:h,n=a.isMobileDevice()?f(b.MOBILE_ADD_TO_CART_DIV+" [name\x3d"+n+"]").val():a.isWeb()?f(b.ADD_TO_CART_DIV+" [name\x3d"+n+"]").val():f(b.TABLET_ADD_TO_CART_DIV+" [name\x3d"+n+"]").val(),c+=a.createHiddenInput(h,
n);g=a.isMobileDevice()?f(b.SNS_MOBILE_QUANTITY):f(b.QUANTITY_CONTAINER).find(b.SNS_QUANTITY);c+=a.createHiddenInput("quantity",g.val())}c+=a.createHiddenInput("submit.buy-now","1");e.html(c);f("body").append(e);f(b.BUY_NOW_FORM).submit();f(b.BUY_NOW_FORM).remove()}})});p.when("sns-join-prime-endpoint").register("sns-subscribe-constants",function(e){return{SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES:{name:"sns-onmlv2-add-to-cart",id:"sns-onmlv2-add-to-cart",method:"GET",action:"/auto-deliveries/checkout/subscribe"},
SUBSCRIBE_FORM_ATTRIBUTES:{name:"sns-onmlv2-subscribe",id:"sns-onmlv2-subscribe",method:"GET",action:"/auto-deliveries/checkout/subscribe"},FORM_FIELDS:[{name:"snsAsin"},{name:"rcxOrdFreqOnml"},{name:"rcxOrdFreqSns"},{name:"offerListingID",fieldName:"snsOfferListingId"},{name:"isTangoCheckoutEligible"},{name:"isSubSameDayDeliveryEligible"},{name:"isOnmlPriceLesserThanFreeShippingThreshold"}]}});p.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper").register("sns-subscribe-only",function(e,
b,a,d){var f=e.$;e.declarative("sns-subscribe-only","click",function(e){if(!d.isSnsLocked()){e=f("\x3cform\x3e",{method:b.JUST_SUBSCRIBE_FORM_ATTRIBUTES.method,action:b.JUST_SUBSCRIBE_FORM_ATTRIBUTES.action,id:b.JUST_SUBSCRIBE_FORM_ATTRIBUTES.id,name:b.JUST_SUBSCRIBE_FORM_ATTRIBUTES.name});var c="";if(a.isCbbTemplateEnabled())for(var g=[{name:"ASIN"},{name:"snsMerchantID"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"longShipAddressId",fieldName:"snsAddressId"},{name:"rcxOrdFreq"},
{name:"quantity"}],l=0;l<g.length;l++)var h=g[l].name,n=g[l].fieldName?g[l].fieldName:h,n=a.getOnmlv2FormValueByName(n),c=c+a.createHiddenInput(h,n);else{a.removeFormFieldsIntroducedByCbb();g=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"rcxOrdFreq"},{name:"snsMerchantID"},{name:"longShipAddressId",fieldName:"snsAddressId"}];for(l=0;l<g.length;l++)h=g[l].name,n=g[l].fieldName?g[l].fieldName:h,n=a.isMobileDevice()?f(b.MOBILE_ADD_TO_CART_DIV+" [name\x3d"+n+"]").val():a.isWeb()?
f(b.ADD_TO_CART_DIV+" [name\x3d"+n+"]").val():f(b.TABLET_ADD_TO_CART_DIV+" [name\x3d"+n+"]").val(),c+=a.createHiddenInput(h,n);g=a.isMobileDevice()?f(b.SNS_MOBILE_QUANTITY):f(b.QUANTITY_CONTAINER).find(b.SNS_QUANTITY);c+=a.createHiddenInput("quantity",g.val())}c+=a.createHiddenInput("ref","sns-subscribe-only");c+=a.createHiddenInput("submit.subscribe-only","1");e.html(c);f("body").append(e);f(b.JUST_SUBSCRIBE_FORM).submit();f(b.JUST_SUBSCRIBE_FORM).remove()}})});p.when("A","a-dropdown","a-modal",
"sns-vmf-utils","sns-onmlv2-utils","sns-buybox-constants","sns-constants").register("sns-select-delivery",function(e,b,a,d,f,k,c){function g(){h("#sns-only-delivery-option-text").length&&(h("#sns-only-delivery-option-text").html(h("#sns-only-delivery-option-text").html().replace(/%_date_%/g,"\x3cspan class \x3d'sns-only-date'\x3e\x3c/span\x3e")),h("#sns-only-delivery-option-text").html(h("#sns-only-delivery-option-text").html().replace(/%_discount_%/g,"\x3cspan class \x3d'sns-only-discount'\x3e\x3c/span\x3e")),
h("#onml-later-delivery-option-text").html(h("#onml-later-delivery-option-text").html().replace(/%_date-more-later_%/g,"\x3cspan class \x3d'sns-ml-date'\x3e\x3c/span\x3e")),h("#onml-later-delivery-option-text").html(h("#onml-later-delivery-option-text").html().replace(/%_discount-more-later_%/g,"\x3cspan class \x3d'sns-ml-discount'\x3e\x3c/span\x3e")),h("#onml-now-delivery-option-text").html(h("#onml-now-delivery-option-text").html().replace(/%_date-one-now_%/g,"\x3cspan class \x3d'sns-one-now-date'\x3e\x3c/span\x3e")),
h("#onml-now-delivery-option-text").html(h("#onml-now-delivery-option-text").html().replace(/%_discount-one-now_%/g,"\x3cspan class \x3d'sns-one-now-discount'\x3e\x3c/span\x3e")));var a=f.getDiscountOptionsParam(),b=f.getDiscountTypeParam(),g=f.getSnsFrequencyParam(),e=f.getOnmlFrequencyParam(),n=f.getOnmlDateParam(),l=d.getFrequencyIndex(c.DELIVERY_OPTION.SNS),q=d.getFrequencyIndex(c.DELIVERY_OPTION.ONML);if("true"!==h("#firstDeliveryOptionMessagesV2").val()){var r=g[l].highlightedDiscount,m=g[q].highlightedDiscount;
b===k.DISCOUNT_TYPE_ZERO_BASE&&0===m?(h(".onmlNextDeliveryDate").addClass("aok-hidden"),h(".onmlNextDeliveryDateNoDiscount").removeClass("aok-hidden")):b===k.DISCOUNT_TYPE_ZERO_STATIC?(h(".onmlNextDeliveryDate").addClass("aok-hidden"),h(".onmlNextDeliveryDateNoDiscount").removeClass("aok-hidden")):(h(".onmlNextDeliveryDate").removeClass("aok-hidden"),h(".onmlNextDeliveryDateNoDiscount").addClass("aok-hidden"));b===k.DISCOUNT_TYPE_ZERO_BASE&&0===r?(h(".snsDeliveryDate").addClass("aok-hidden"),h(".snsDeliveryDateNoDiscount").removeClass("aok-hidden")):
b===k.DISCOUNT_TYPE_ZERO_STATIC?(h(".snsDeliveryDate").addClass("aok-hidden"),h(".snsDeliveryDateNoDiscount").removeClass("aok-hidden")):(h(".snsDeliveryDate").removeClass("aok-hidden"),h(".snsDeliveryDateNoDiscount").addClass("aok-hidden"))}a=a[0];h(".sns-one-now-date").html(n);h(".sns-one-now-discount").html(a);h("#onml-later-delivery-option-text").html(e[q].firstDeliveryOptions[0].text);h("#sns-only-delivery-option-text").html(g[l].firstDeliveryOptions[0].text)}function l(){var a,b,g;h(k.SNS_DELIVERY_OPTION_DIV).is(":checked")?
(a=d.getFrequencyIndex(c.DELIVERY_OPTION.SNS),b=f.getSnsFrequencyParam(),h("#rcxOrdFreqSnsWrapper").removeClass("aok-hidden"),h("#rcxOrdFreqOnmlWrapper").addClass("aok-hidden"),h(k.REPLENISHMENT_SNS_FREQUENCY_POPOVER_ID).removeClass("aok-hidden"),h(k.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).addClass("aok-hidden"),h(k.REPLENISHMENT_SNS_FREQUENCY_INFO_POPOVER_ID).removeClass("aok-hidden"),h(k.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).addClass("aok-hidden"),h(k.SNS_FREQUENCY_BOTTOMSHEET_SELECTOR).removeClass("aok-hidden"),
h(k.ONML_FREQUENCY_BOTTOMSHEET_SELECTOR).addClass("aok-hidden"),g=c.DELIVERY_OPTION.SNS):(a=d.getFrequencyIndex(c.DELIVERY_OPTION.ONML),b=f.getOnmlFrequencyParam(),h("#rcxOrdFreqOnmlWrapper").removeClass("aok-hidden"),h("#rcxOrdFreqSnsWrapper").addClass("aok-hidden"),h(k.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).removeClass("aok-hidden"),h(k.REPLENISHMENT_SNS_FREQUENCY_POPOVER_ID).addClass("aok-hidden"),h(k.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).removeClass("aok-hidden"),h(k.REPLENISHMENT_SNS_FREQUENCY_INFO_POPOVER_ID).addClass("aok-hidden"),
h(k.ONML_FREQUENCY_BOTTOMSHEET_SELECTOR).removeClass("aok-hidden"),h(k.SNS_FREQUENCY_BOTTOMSHEET_SELECTOR).addClass("aok-hidden"),g=c.DELIVERY_OPTION.ONML);d.selectFrequency(b[a],g)}var h=e.$,n,q,r;p.when("a-sheet").execute("sns-mobile-sheet",function(a){q=a});e.declarative("sns-delivery-date-bottom-sheet","click",function(a){d.updateFrequencyInfoForDeliveryOption();g();n||(a={name:"sns_delivery_bottom_sheet",preloadDomId:"snsDeliveryDateBottomSheet",height:270,closeType:"message",closeMessage:h("#bottomSheetClose").val(),
sheetType:"web"},n=q.create(a));q.showSheet(n)});e.declarative("sns-delivery-date","click",function(c){d.updateFrequencyInfoForDeliveryOption();g();c=h(k.SNS_SUBMIT_SECTION_ID);var b={dataStrategy:"preload",header:h("#deliveryModalTitle").val(),name:"sns-delivery-modal"};r||(r=a.create(c,b));r.show()});e.declarative("sns-delivery-cancel-btn","click",function(a){r.hide()});e.declarative("sns-delivery-change-btn","click",function(a){l();r.hide()});e.on("a:sheet:beforeHide:sns_delivery_bottom_sheet",
function(){l()});e.on("a:sheet:beforeShow:sns_delivery_bottom_sheet",function(){var a=n.getContentContainer().find(k.SNS_DELIVERY_BOTTOM_SHEET),c=h("#a-popover-sns-delivery-modal").find(k.SNS_DELIVERY_BOTTOM_SHEET);c.html()!==t&&null!==c.html()&&a.replaceWith(c)})});p.when("A","a-checkbox","sns-vmf-utils","sns-onmlv2-utils","sns-buybox-constants","sns-constants","sns-onmlv2-cache").execute("sns-select-delivery-checkbox",function(e,b,a,d,f,k,c){var g=e.$;d.isDeliveryChangeCheckboxVisible()&&b(f.SNS_DELIVERY_OPTION_CHANGE_CHECKBOX_ID).enable();
e.declarative("delivery-option-change-checkbox","change",function(b){var h,e;b=k.DELIVERY_OPTION.ONML===d.getSelectedDeliveryOption();a.updateFrequencyInfoForDeliveryOption();b?(b=a.getFrequencyIndex(k.DELIVERY_OPTION.ONML),h=d.getOnmlFrequencyParam(),g(f.RCX_ORD_FREQ_ONML_WRAPPER).removeClass("aok-hidden"),g(f.RCX_ORD_FREQ_SNS_WRAPPER).addClass("aok-hidden"),g(f.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).removeClass("aok-hidden"),g(f.REPLENISHMENT_SNS_FREQUENCY_POPOVER_ID).addClass("aok-hidden"),g(f.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).removeClass("aok-hidden"),
g(f.REPLENISHMENT_SNS_FREQUENCY_INFO_POPOVER_ID).addClass("aok-hidden"),e=k.DELIVERY_OPTION.ONML,c.incrementDeliveryOptionSwitchToOnmlCounter()):(b=a.getFrequencyIndex(k.DELIVERY_OPTION.SNS),h=d.getSnsFrequencyParam(),g(f.RCX_ORD_FREQ_SNS_WRAPPER).removeClass("aok-hidden"),g(f.RCX_ORD_FREQ_ONML_WRAPPER).addClass("aok-hidden"),g(f.REPLENISHMENT_SNS_FREQUENCY_POPOVER_ID).removeClass("aok-hidden"),g(f.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).addClass("aok-hidden"),g(f.REPLENISHMENT_SNS_FREQUENCY_INFO_POPOVER_ID).removeClass("aok-hidden"),
g(f.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).addClass("aok-hidden"),e=k.DELIVERY_OPTION.SNS,c.incrementDeliveryOptionSwitchToSnsCounter());d.updatePrimeShippingMessage();a.selectFrequency(h[b],e)});e.on("PageRefresh:Success",function(){d.isDeliveryChangeCheckboxVisible()&&b(f.SNS_DELIVERY_OPTION_CHANGE_CHECKBOX_ID).enable()})});p.when("A","sns-buybox-constants","sns-priceblock-constants").register("sns-onmlv2-priceblock-utils",function(e,b,a){var d=e.$;return{updateDesktopPriceBlock:function(f){if(f){var e=
f.zeroBaseDiscount,c=0<d(b.SNS_TOGGLE_BUY_BOX).length,g=0<d(a.DP_STRIKE_PRICE).length;d(b.SNS_DELIVERY_OPTION_DIV).is(":checked")?(d(a.ONE_NOW_SHIPPING_MESSAGE).addClass("aok-hidden"),f.justSubscribeTieredStatus?(d(a.SNS_TIERED_PRICE).removeClass("aok-hidden"),d(a.SNS_BASED_PRICE).addClass("aok-hidden"),d(a.SNS_TIERED_SAVINGS).removeClass("aok-hidden"),d(a.SNS_BASED_SAVINGS).addClass("aok-hidden"),d(a.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),d(a.SNS_SAVINGS_ROW).removeClass("aok-hidden")):e?(d(a.SNS_TIERED_PRICE).addClass("aok-hidden"),
d(a.SNS_BASED_PRICE).removeClass("aok-hidden"),d(a.SNS_SAVINGS_ROW).addClass("aok-hidden")):(d(a.SNS_TIERED_PRICE).addClass("aok-hidden"),d(a.SNS_BASED_PRICE).removeClass("aok-hidden"),d(a.SNS_TIERED_SAVINGS).addClass("aok-hidden"),d(a.SNS_BASED_SAVINGS).removeClass("aok-hidden"),d(a.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),d(a.SNS_SAVINGS_ROW).removeClass("aok-hidden"))):d(b.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(d(a.ONE_NOW_SHIPPING_MESSAGE).removeClass("aok-hidden"),e?(d(a.SNS_TIERED_PRICE).addClass("aok-hidden"),
d(a.SNS_BASED_PRICE).removeClass("aok-hidden"),d(a.SNS_SAVINGS_ROW).addClass("aok-hidden"),g&&(d(b.SNS_TIERED_PRICE).hasClass("aok-hidden")?(d(a.SNS_SAVINGS_ROW).removeClass("aok-hidden"),d(a.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),d(a.SNS_BASED_SAVINGS).removeClass("aok-hidden"),d(a.SNS_TIERED_SAVINGS).addClass("aok-hidden")):d(b.SNS_BASE_PRICE).hasClass("aok-hidden")&&(d(a.SNS_SAVINGS_ROW).removeClass("aok-hidden"),d(a.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),d(a.SNS_TIERED_SAVINGS).removeClass("aok-hidden"),
d(a.SNS_BASED_SAVINGS).addClass("aok-hidden")))):(d(a.SNS_TIERED_PRICE).addClass("aok-hidden"),d(a.SNS_BASED_PRICE).removeClass("aok-hidden"),d(a.SNS_TIERED_SAVINGS).addClass("aok-hidden"),d(a.SNS_BASED_SAVINGS).removeClass("aok-hidden"),d(a.SNS_SAVINGS_LABEL).removeClass("aok-hidden"),d(a.SNS_SAVINGS_ROW).removeClass("aok-hidden")));c&&d(a.SNS_SAVINGS_ROW).addClass("aok-hidden")}},updateBuyboxPriceBlock:function(f){f&&(d(b.SNS_DELIVERY_OPTION_DIV).is(":checked")?(f.oneNowDiscountEligible||d(a.SNS_STRIKETHROUGH_PRICE).removeClass("aok-hidden"),
f.justSubscribeTieredStatus?(d(b.SNS_BASE_PRICE).addClass("aok-hidden"),d(b.SNS_TIERED_PRICE).removeClass("aok-hidden")):(d(b.SNS_BASE_PRICE).removeClass("aok-hidden"),d(b.SNS_TIERED_PRICE).addClass("aok-hidden"))):d(b.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(d(b.SNS_BASE_PRICE).removeClass("aok-hidden"),d(b.SNS_TIERED_PRICE).addClass("aok-hidden"),f.oneNowDiscountEligible||(d(a.SNS_STRIKETHROUGH_PRICE).addClass("aok-hidden"),d(a.SNS_BASED_SAVINGS).addClass("aok-hidden"))))}}});p.when("A","sns-buybox-constants",
"sns-constants","sns-onmlv2-utils").register("sns-onmlv2-message-utils",function(e,b,a,d){function f(){c("#sns-delivery-buybox-upsell-message").find([b.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL,b.SNS_DELIVERY_NON_TIERED_UPSELL,b.SNS_DELIVERY_TIERED_UPSELL].join()).addClass("aok-hidden");c("#onml-delivery-buybox-upsell-message").find([b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL,b.ONML_DELIVERY_NON_TIERED_UPSELL,b.ONML_DELIVERY_TIERED_UPSELL].join()).addClass("aok-hidden")}function k(){c("#sns-delivery-pill").find([b.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_PILL,
b.SNS_DELIVERY_NON_TIERED_PILL,b.SNS_DELIVERY_TIERED_PILL].join()).addClass("aok-hidden");c("#onml-delivery-pill").find([b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL,b.ONML_DELIVERY_NON_TIERED_PILL,b.ONML_DELIVERY_TIERED_PILL].join()).addClass("aok-hidden")}var c=e.$;return{updateFirstRecurringDeliveryDate:function(a,d){if(a&&d){var h=a.firstRecurringDeliveryDates[d-1];c(b.SNS_ONMLV2_FRDD).each(function(){c(this).html(h)})}},updateUpsellMessages:function(d,e,h){if(d&&e&&h){var k=e.snsCustomer,q=null==
e.snsJustSubscribeOptionEnabled?e.snsCustomer||!1:e.snsJustSubscribeOptionEnabled||!1,r=c(b.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).length?!0:!1,u=e.suppressSnSOneNowOption||!1,m=e.justSubscribeTieredStatus;e=e.tieredStatusOnRecurringDeliveryDates[h-1]===a.TIERED;d===a.DELIVERY_OPTION.SNS?(c(b.SNS_DELIVERY_UPSELL).removeClass("aok-hidden"),c(b.ONML_DELIVERY_UPSELL).addClass("aok-hidden"),q||u?r&&!k?(f(),c(b.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).removeClass("aok-hidden")):m?(f(),c(b.SNS_DELIVERY_TIERED_UPSELL).removeClass("aok-hidden")):
(f(),c(b.SNS_DELIVERY_NON_TIERED_UPSELL).removeClass("aok-hidden")):f()):d===a.DELIVERY_OPTION.ONML?(c(b.SNS_DELIVERY_UPSELL).addClass("aok-hidden"),c(b.ONML_DELIVERY_UPSELL).removeClass("aok-hidden"),q?r&&!k?(f(),c(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).removeClass("aok-hidden")):e?(f(),c(b.ONML_DELIVERY_TIERED_UPSELL).removeClass("aok-hidden")):(f(),c(b.ONML_DELIVERY_NON_TIERED_UPSELL).removeClass("aok-hidden")):(f(),c(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_UPSELL).removeClass("aok-hidden"))):
(c(b.SNS_DELIVERY_UPSELL).addClass("aok-hidden"),c(b.ONML_DELIVERY_UPSELL).addClass("aok-hidden"),f())}},updateDiscountPill:function(d,f,h){if(d&&f&&h){var e=f.snsCustomer,q=null==f.snsJustSubscribeOptionEnabled?f.snsCustomer||!1:f.snsJustSubscribeOptionEnabled||!1,r=c(b.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).length?!0:!1,u=f.suppressSnSOneNowOption||!1,m=f.justSubscribeTieredStatus;h=f.tieredStatusOnRecurringDeliveryDates[h-1]===a.TIERED;f=f.zeroBaseDiscount;d===a.DELIVERY_OPTION.SNS?(c(b.SNS_DELIVERY_PILL).removeClass("aok-hidden"),
c(b.ONML_DELIVERY_PILL).addClass("aok-hidden"),q||u?r&&!e?(k(),f||c(b.SNS_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).removeClass("aok-hidden")):m?(k(),c(b.SNS_DELIVERY_TIERED_PILL).removeClass("aok-hidden")):(k(),f||c(b.SNS_DELIVERY_NON_TIERED_PILL).removeClass("aok-hidden")):k()):d===a.DELIVERY_OPTION.ONML?(c(b.SNS_DELIVERY_PILL).addClass("aok-hidden"),c(b.ONML_DELIVERY_PILL).removeClass("aok-hidden"),q?r&&!e?(k(),f||c(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).removeClass("aok-hidden")):h?(k(),c(b.ONML_DELIVERY_TIERED_PILL).removeClass("aok-hidden")):
(k(),f||c(b.ONML_DELIVERY_NON_TIERED_PILL).removeClass("aok-hidden")):(k(),f||c(b.ONML_DELIVERY_NEW_OR_UNRECOGNIZED_PILL).removeClass("aok-hidden"))):(k(),c(b.SNS_DELIVERY_PILL).addClass("aok-hidden"),c(b.ONML_DELIVERY_PILL).addClass("aok-hidden"))}},updateBuyboxDeliveryOption:function(){c(b.SNS_DELIVERY_OPTION_DIV).is(":checked")?(e.declarative.remove(b.SNS_DECLARATIVE_ACTION),e.declarative.create(b.SNS_DECLARATIVE_ACTION,b.SNS_SUBSCRIBE_ONLY_ACTION),c(b.SNS_ONMLV2_DELIVERY_OPTION_FORM_FIELD).val(b.SNS_DELIVERY_OPTION_SNS),
c(b.SNS_SUBSCRIBE_BUTTON_DELIVERY_OPTION_FORM_FIELD).val(b.SNS_DELIVERY_OPTION_SNS),c(b.SNS_DELIVERY_OPTION_ONML_LINK).addClass("aok-hidden"),c(b.SNS_DELIVERY_OPTION_SNS_LINK).removeClass("aok-hidden"),c(b.ACCORDION_HEADER_DELIVERY_OPTION_ONML_LINK).addClass("aok-hidden"),c(b.ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK).removeClass("aok-hidden")):c(b.ONML_DELIVERY_OPTION_DIV).is(":checked")&&(e.declarative.remove(b.SNS_DECLARATIVE_ACTION),e.declarative.create(b.SNS_DECLARATIVE_ACTION,d.getOnmlDeclarativeAction()),
c(b.SNS_ONMLV2_DELIVERY_OPTION_FORM_FIELD).val(b.SNS_DELIVERY_OPTION_ONML),c(b.SNS_SUBSCRIBE_BUTTON_DELIVERY_OPTION_FORM_FIELD).val(b.SNS_DELIVERY_OPTION_ONML),c(b.SNS_DELIVERY_OPTION_SNS_LINK).addClass("aok-hidden"),c(b.SNS_DELIVERY_OPTION_ONML_LINK).removeClass("aok-hidden"),c(b.ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK).addClass("aok-hidden"),c(b.ACCORDION_HEADER_DELIVERY_OPTION_ONML_LINK).removeClass("aok-hidden"))}}});p.when("A","a-dropdown","sns-vmf-utils","sns-onmlv2-utils","sns-metrics-constants",
"sns-savings-utils","sns-constants","sns-buybox-constants","a-popover","ready").execute("sns-onmlv2-frequency-update",function(e,b,a,d,f,k,c,g,l){function h(b,h){if(b&&b.selectedRow&&b.selectedRow.$row&&b.selectedRow.$row.length&&b.selectedRow.$row[0]&&b.selectedRow.$row[0].dataset){var e=b.selectedRow.$row[0].dataset.frequencyValue;b=b.selectedRow.$row[0].dataset.selectedIndex;if(e!==t&&b!==t){a.updateFrequencyPopoverInfo(b);var g;h===c.DELIVERY_OPTION.ONML?(g=d.getOnmlFrequencyParam(),d.emitMetric(f.SNS_ONML_FREQUENCY_POPOVER_SELECTED+
"-"+e)):(g=d.getSnsFrequencyParam(),d.emitMetric(f.SNS_FREQUENCY_POPOVER_SELECTED+"-"+e));a.selectFrequency(g[b],h);b=d.getFrequencyValueExcludingDeliveryType(e);k.checkPreConditionsAndUpdateAnnualSavings(b);k.checkPreConditionsAndUpdatePotentialSavings(e)}else d.emitMetric(f.SNS_INVALID_FREQUENCY_POPOVER_INPUTS)}else d.emitMetric(f.SNS_INVALID_FREQUENCY_POPOVER_DATA_STRUCTURE);h=l.get("replenishment"+h+"FrequencyPopover");null!==h&&h!==t&&h.hide()}function n(c){var b=a.getFrequencyIndex(c);c=e.$("[data-a-accordion-name\x3d'"+
("replenishment-"+c+"-frequency-accordion")+"'] [data-a-accordion-row-name\x3d'"+(c+"FrequencyAccordionRow-"+b)+"'] a");c.length?c.click():d.emitMetric(f.SNS_INVALID_FREQUENCY_ACCORDION_ROW)}function q(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)}var r=e.$;e.declarative("onml-show-more-frequency-options-btn-declarative","click",function(a){a=r(g.REPLENISHMENT_ONML_FREQUENCY_ACCORDION_ID).children("[id^\x3d'"+g.ONML_FREQUENCY_ACCORDION_ROW_PREFIX+"']").length;d.showMoreFrequencyOptions(a,c.DELIVERY_OPTION.ONML);
q(f.ONML_SHOW_MORE_FREQUENCY_OPTIONS_BTN_CLICKED)});e.declarative("sns-show-more-frequency-options-btn-declarative","click",function(a){a=r(g.REPLENISHMENT_SNS_FREQUENCY_ACCORDION_ID).children("[id^\x3d'"+g.SNS_FREQUENCY_ACCORDION_ROW_PREFIX+"']").length;d.showMoreFrequencyOptions(a,c.DELIVERY_OPTION.SNS);q(f.SNS_SHOW_MORE_FREQUENCY_OPTIONS_BTN_CLICKED)});e.on("a:dropdown:rcxOrdFreqSns:select",function(b){b=a.getFrequencyIndex(c.DELIVERY_OPTION.SNS);a.updateFrequencyIndex(b);var h=d.getSnsFrequencyParam();
a.selectFrequency(h[b],c.DELIVERY_OPTION.SNS);b=a.getFrequencyValue(c.DELIVERY_OPTION.SNS);h=d.getFrequencyValueExcludingDeliveryType(b);0<b.search("W")?q(f.SNS_LEGACY_WEEKLY_FREQUENCY_SELECT_METRICS):q(f.SNS_LEGACY_MONTHLY_FREQUENCY_SELECT_METRICS);k.checkPreConditionsAndUpdateAnnualSavings(h);k.checkPreConditionsAndUpdatePotentialSavings(b)});e.on("a:dropdown:rcxOrdFreqOnml:select",function(b){b=a.getFrequencyIndex(c.DELIVERY_OPTION.ONML);a.updateFrequencyIndex(b);var h=d.getOnmlFrequencyParam();
a.selectFrequency(h[b],c.DELIVERY_OPTION.ONML);b=a.getFrequencyValue(c.DELIVERY_OPTION.ONML);h=d.getFrequencyValueExcludingDeliveryType(b);0<b.search("W")?q(f.SNS_ONML_WEEKLY_FREQUENCY_SELECT_METRICS):q(f.SNS_ONML_MONTHLY_FREQUENCY_SELECT_METRICS);k.checkPreConditionsAndUpdateAnnualSavings(h);k.checkPreConditionsAndUpdatePotentialSavings(b)});e.on("a:accordion:replenishment-sns-frequency-accordion:select",function(a){h(a,c.DELIVERY_OPTION.SNS);d.emitMetric(f.SNS_FREQUENCY_POPOVER_SELECTED)});e.on("a:accordion:replenishment-onml-frequency-accordion:select",
function(a){h(a,c.DELIVERY_OPTION.ONML);d.emitMetric(f.SNS_ONML_FREQUENCY_POPOVER_SELECTED)});e.on("a:popover:beforeShow:replenishmentsnsFrequencyPopover",function(){n(c.DELIVERY_OPTION.SNS)});e.on("a:popover:beforeShow:replenishmentonmlFrequencyPopover",function(){n(c.DELIVERY_OPTION.ONML)})});p.when("A","sns-buybox-constants").execute("sns-onmlv2-quantity-update",function(e,b){var a=e.$;e.on(b.SNS_ONMLV2_QUANTITY_TRIGGER_DROPDOWN,function(d){d=d.value;a(b.SNS_ONMLV2_QUANTITY_FORM_FIELD).val(d);
a(b.SNS_SUBSCRIBE_BUTTON_QUANTITY_FORM_FIELD).val(d)});a(b.SNS_ONMLV2_QUANTITY_TRIGGER_RADIO_BUTTON).change(function(d){d=d.target.value;a(b.SNS_ONMLV2_QUANTITY_FORM_FIELD).val(d);a(b.SNS_SUBSCRIBE_BUTTON_QUANTITY_FORM_FIELD).val(d)})});p.when("A","sns-onmlv2-utils").execute("sns-accordion-content-update",function(e,b){e.declarative("sns-delivery-change-btn","click",function(a){b.updatePrimeShippingMessage()});e.on("a:sheet:beforeHide:sns_delivery_bottom_sheet",function(){b.updatePrimeShippingMessage()})});
"use strict";p.register("sns-join-prime-endpoint",function(){return{endpoint:"/amazonprime/"}});p.register("sns-priceblock-constants",function(){return{PRICEBLOCK_SNSPRICE_ROW:"#priceblock_snsprice_row",SNS_UPSELL:"#priceblock_snsupsell_row",SNS_SAVINGS:"#snsprice_savings",DP_OUR_PRICE:"#priceblock_ourprice",DP_OUR_PRICE_LABEL:"#priceblock_ourprice_lbl",DP_OUR_PRICE_SAVINGS:"#regularprice_savings",DP_OUR_PRICE_BADGING:"#ourprice_fbabadge",DP_OUR_PRICE_SHIPPING:"#ourprice_shippingmessage",DP_OUR_PRICE_PPU:"#priceblock_ourprice_row #priceblock_ourprice+.a-size-small",
DP_STRIKE_PRICE:"#price .a-text-strike",DP_SALE_PRICE:"#priceblock_saleprice",DP_SALE_PRICE_LABEL:"#priceblock_saleprice_lbl",DP_SALE_PRICE_SHIPPING:"#saleprice_shippingmessage",DP_SALE_PRICE_PPU:"#priceblock_saleprice_row #priceblock_saleprice+.a-size-small",DP_DEAL_PRICE:"#priceblock_dealprice",DP_DEAL_PRICE_SAVINGS:"#dealprice_savings",DP_DEAL_PRICE_SHIPPING:"#dealprice_shippingmessage",DP_DEAL_PRICE_PPU:"#priceblock_dealprice_row #priceblock_dealprice+.a-size-small",SNS_PITCH_PRICE_UPSELL_TEXT:"#onmlPriceBlockUpsellText",
SNS_ATF_REDESIGN_UPSELL_UNCHECKED:"#onml-atf-redesign-upsell-unchecked",SNS_ATF_REDESIGN_UPSELL_CHECKED:"#onml-atf-redesign-upsell-checked",ONML_ATF_REDESIGN_UPSELL:"#onml-atf-redesign-upsell",SNS_PITCH_PRICE_FEATURE:"#snsPitchPrice_feature_div",NEW_PITCH_PRICE_FEATURE:"#newPitchPriceWrapper_feature_div",MOBILE_OUR_PRICE_SHIPPING:"#ourPrice_availability",SHIPPING_DETAILS:'[data-a-sheet*\x3d"shippingDetailsDisplayContent"]',SNS_TIERED_PRICE:"#unifiedPrice_feature_div #priceblock_snsprice_Tiered, #snsPrice #priceblock_snsprice_Tiered",
SNS_BASED_PRICE:"#unifiedPrice_feature_div #priceblock_snsprice_Based, #snsPrice #priceblock_snsprice_Based",SNS_TIERED_SAVINGS:"#unifiedPrice_feature_div #snsSavings_Tiered, #snsPrice #snsSavings_Tiered",SNS_BASED_SAVINGS:"#unifiedPrice_feature_div #snsSavings_NonTiered, #snsPrice #snsSavings_NonTiered",SNS_SAVINGS_LABEL:"#unifiedPrice_feature_div #snsSavings_lbl",SNS_SAVINGS_ROW:"#unifiedPrice_feature_div #priceblock_snsSavings_row, #snsPrice #priceblock_snsSavings_row",ONE_NOW_SHIPPING_MESSAGE:"#priceblock_oneNowShippingMessage, #priceblock_oneNowShippingMessage_dpv2",
SNS_STRIKETHROUGH_PRICE:"#snsStrikeThroughPrice"}});p.when("A","sns-utils","sns-constants","sns-price-utils","sns-buybox-constants","sns-priceblock-constants").register("sns-price-refresh",function(e,b,a,d,f,k){return{init:function(){e.declarative("sns-opt-in-checked","change",function(){d.showSnSPriceIfSnSOptInChecked()});b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,d.showSnSPriceIfSnSOptInChecked);d.showSnSPriceIfSnSOptInChecked();e.$(f.SNS_BUY_USED_BUTTON).click(function(){var c=
f.SNS_OPT_IN_CHECKBOX,d=b.getOnmlUserPref(a.USER_PREFS_KEYS.SNS_OPT_IN),l=k.SNS_UPSELL,h=k.SNS_PITCH_PRICE_UPSELL_TEXT,n=k.ONML_ATF_REDESIGN_UPSELL;!0===d&&(e.$(c).click(),b.setOnmlUserPref(a.USER_PREFS_KEYS.SNS_OPT_IN,!0));e.$(n).addClass("aok-hidden");e.$(l).addClass("aok-hidden");e.$(h).addClass("aok-hidden")})}}});p.when("A","sns-utils","sns-priceblock-constants","sns-buybox-constants").register("sns-price-utils",function(e,b,a,d){var f=e.$,k=a.SNS_PITCH_PRICE_UPSELL_TEXT,c=a.SNS_PITCH_PRICE_FEATURE,
g=a.NEW_PITCH_PRICE_FEATURE,l=a.PRICEBLOCK_SNSPRICE_ROW,h=d.SNS_OPT_IN_CHECKBOX,n=a.SNS_UPSELL,q=a.SNS_SAVINGS,r=a.DP_OUR_PRICE,m=a.DP_OUR_PRICE_LABEL,p=a.DP_OUR_PRICE_SAVINGS,t=a.DP_OUR_PRICE_BADGING,A=a.DP_OUR_PRICE_SHIPPING,w=a.DP_SALE_PRICE,y=a.DP_SALE_PRICE_LABEL,B=a.DP_SALE_PRICE_SHIPPING,C=a.DP_DEAL_PRICE,D=a.DP_DEAL_PRICE_SAVINGS,x=a.DP_DEAL_PRICE_SHIPPING,z=a.MOBILE_OUR_PRICE_SHIPPING,F=a.SHIPPING_DETAILS,G=d.SNS_BUY_NEW_PRICE,H=d.NON_CBB_BUY_NEW_PRICE,I=d.CBB_BUY_NEW_PRICE,J=d.SNS_PRICE_IN_BUY_USED_SECTION,
K=d.CBB_SNS_BUY_NEW_PRICE,L=d.DPV2_BUY_NEW_PRICE,M=a.SNS_ATF_REDESIGN_UPSELL_CHECKED,N=a.SNS_ATF_REDESIGN_UPSELL_UNCHECKED;return{showSnSPriceIfSnSOptInChecked:function(){b.isSnSEligible()&&(f(h).is(":checked")?b.shouldShowPrice()&&(f(l).length?(f(l).removeClass("aok-hidden"),f(q).removeClass("a-hidden"),f(n).addClass("aok-hidden"),f(p).addClass("a-hidden"),f(t).addClass("a-hidden"),f(A).addClass("a-hidden"),f(z).addClass("a-hidden"),f(r).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price"),
f(m).addClass("onml-price-inactive"),f(w).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price "),f(y).addClass("onml-price-inactive"),f(B).addClass("a-hidden"),f(C).addClass("a-text-strike a-size-base a-color-secondary onml-price-inactive").removeClass("a-size-medium a-color-price"),f(D).addClass("a-hidden"),f(x).addClass("a-hidden"),f(l).css({display:"table-row",visibility:"visible"}),f(l).prev().has(F).addClass("aok-hidden"),f(H).addClass("aok-hidden"),
f(G).removeClass("aok-hidden"),f(I).addClass("aok-hidden"),f(J).addClass("aok-hidden"),f(K).removeClass("aok-hidden"),f(L).addClass("aok-hidden")):(f(k).addClass("aok-hidden"),f(g).addClass("aok-hidden"),f(c).removeClass("aok-hidden"),f(c).css({display:"block",visibility:"visible"}),f(M).removeClass("aok-hidden"),f(N).addClass("aok-hidden"))):f(l).length?(f(l).addClass("aok-hidden"),f(q).addClass("a-hidden"),f(n).removeClass("aok-hidden"),f(p).removeClass("a-hidden"),f(t).removeClass("a-hidden"),
f(A).removeClass("a-hidden"),f(z).removeClass("a-hidden"),f(r).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),f(m).removeClass("onml-price-inactive"),f(w).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),f(y).removeClass("onml-price-inactive"),f(B).removeClass("a-hidden"),f(C).addClass("a-size-medium a-color-price").removeClass("a-text-strike a-size-base a-color-secondary onml-price-inactive"),
f(D).removeClass("a-hidden"),f(x).removeClass("a-hidden"),f(l).prev().has(F).removeClass("aok-hidden"),f(H).removeClass("aok-hidden"),f(G).addClass("aok-hidden"),f(I).removeClass("aok-hidden"),f(J).addClass("aok-hidden"),f(K).addClass("aok-hidden"),f(L).removeClass("aok-hidden")):(f(k).removeClass("aok-hidden"),f(g).removeClass("aok-hidden"),f(c).addClass("aok-hidden"),f(k).css({display:"block",visibility:"visible"}),f(N).removeClass("aok-hidden"),f(M).addClass("aok-hidden")))}}});p.when("A","sns-constants",
"sns-buybox-constants","sns-states-loaded-in-dom").register("sns-utils",function(e,b,a){var d=e.$,f={},k={},c=function(a,c,b){var f,e=function(a){if(!a||"object"===typeof a)return a;var b=d.parseJSON;m.JSON&&m.JSON.parse&&(b=JSON.parse);try{return"string"===typeof a?b(a):null}catch(h){return m.ueLogError&&m.ueLogError(h,{logLevel:"ERROR",attribution:"sns",message:"An error occurred when getting onml parameters from page-state. a-state: "+c}),null}};a=d(a||"html");return 1<=a.length&&(a=a.find("script[data-a-state*\x3d'"+
c+"']"))&&1<=a.length?(f=e(a.first().text()),e("object"===typeof f?f[b]:null)):f},g=function(b){var d=c(a.SNS_OPT_IN_FEATURE_DIV,"sns-onml-params","onmlParams");return b?d&&d[b]:d},l=function(){var a=g("deviceType"),c=k[b.USER_PREFS_KEYS.ONML_PARAMS],c=c&&c.deviceType;return a||c};return{isSnSEligible:function(){return g("snsEligible")},getAStateFromDom:c,getOnmlParam:g,shouldShowPrice:function(){return g("showPrice")},getDeviceType:l,registerCallbackForNameSpace:function(a,c){f[a]||(f[a]=[]);-1===
f[a].indexOf(c)&&f[a].push(c)},executeCallbacksForNameSpace:function(a){if((a=f[a])&&a.constructor===Array)for(var c=0;c<a.length;c++)a[c]()},setOnmlUserPref:function(a,c){k[a]=c},getOnmlUserPref:function(a){return k[a]},deleteOnmlUserPref:function(a){delete k[a]},isMobileDevice:function(){var a=l();return"mobile"===a||"mobileApp"===a},isMobileApp:function(){return"mobileApp"===l()},isTabletApp:function(){var a=l();return"iPad"===a||"tabletApp"===a||"tabletLargeApp"===a},isVerucaBuyNowEnabled:function(){return g("verucaBuyNowEnabled")},
isVerucaOneClickEnabled:function(){return g("verucaOneClickEnabled")},enableSnSOptIn:function(){d(a.SNS_OPT_IN_CHECKBOX).removeAttr("disabled")},isSnsCustomer:function(){return g("snsCustomer")}}});p.when("A","a-checkbox","sns-buybox-constants","sns-constants").register("sns-onmlv2-utils",function(e,b,a,d){function f(a,c){return![0,1,3,4,5].includes(c)}function k(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)}var c=e.$,g,l=function(a,b,d){var f,e=function(a){if(!a||"object"===typeof a)return a;var d=c.parseJSON;
m.JSON&&m.JSON.parse&&(d=JSON.parse);try{return"string"===typeof a?d(a):null}catch(f){return z("snsGetAStateException","NotDefined"),m.ueLogError&&m.ueLogError(f,{logLevel:"ERROR",attribution:"sns",message:"An error occurred when getting onml parameters from page-state. a-state: "+b+" with string: "+a}),null}};a=c(a||"html");return 1<=a.length&&(a=a.find("script[data-a-state*\x3d'"+b+"']"))&&1<=a.length?(f=e(a.first().text()),e("object"===typeof f?f[d]:null)):f},h=function(a,b,d){var f,e=function(a){if(null===
a||"object"===typeof a||"boolean"===typeof a)return a;var d=c.parseJSON;m.JSON&&m.JSON.parse&&(d=JSON.parse);try{return"string"===typeof a?d(a):null}catch(f){return z("b2bGetAStateException","NotDefined"),m.ueLogError&&m.ueLogError(f,{logLevel:"ERROR",attribution:"b2b",message:"An error occurred when getting onml parameters from page-state. a-state: "+b+" with string: "+a}),null}};a=c(a||"html");return 1<=a.length&&(a=a.find("script[data-a-state*\x3d'"+b+"']"))&&1<=a.length?(f=e(a.first().text()),
e("object"===typeof f?f[d]:null)):f},n=function(a,b,d){var f;a=c(a||"html");if(1<=a.length&&(a=a.find("script[data-a-state*\x3d'"+b+"']"))&&1<=a.length){if((a=a.first().text())&&"object"!==typeof a){var e=c.parseJSON;m.JSON&&m.JSON.parse&&(e=JSON.parse);try{f="string"===typeof a?e(a):null}catch(h){z("snsGetAStateWithoutJsonException","NotDefined"),m.ueLogError&&m.ueLogError(h,{logLevel:"ERROR",attribution:"sns",message:"An error occurred when getting onml parameters from page-state. a-state: "+b+
" with string: "+a}),f=null}}else f=a;return d="object"===typeof f?f[d]:null}return f},q=function(){return l(t,a.SNS_BUY_BOX_PARAMS,a.SNS_BUY_BOX_PARAM_MAP)},r=function(){return l(t,"sns-frequency-params","snsFrequencyParamsMap")},p=function(){return l(t,"sns-frequency-params","onmlFrequencyParamsMap")},E=function(){var c=b(a.SNS_DELIVERY_OPTION_CHANGE_CHECKBOX_ID);return c&&c._$element&&0<c._$element.length},v=function(){var d;if(E()){var f=b(a.SNS_DELIVERY_OPTION_CHANGE_CHECKBOX_ID);d=A();f=f.isChecked();
d=d?f:!f}else d=c(a.SNS_DELIVERY_OPTION_DIV).is(":checked");return d?a.SNS_DELIVERY_OPTION_SNS:a.SNS_DELIVERY_OPTION_ONML},A=function(){var a=null,c=p();c&&Array.isArray(c)&&(a=c.find(function(a){if(!0===a.isDefault)return a}));return a?!0===a.isDefault:!1},w=function(a){var c=q();return c?c.deviceType===a:!1},y=function(){return w("mobile")||w("mobileApp")},B=function(){return w("web")},C=function(){return document.querySelector(a.SNS_ACCORDION_HEADER_RADIO_BUTTON)},D=function(a,c){return a&&c?a.tieredStatusOnRecurringDeliveryDates[c-
1]===d.TIERED:!1},x=function(a,c){return a&&c?a.firstRecurringDeliveryDates[c-1]:""},z=function(a,c){m.ue&&m.ue.count(a,(ue.count(a)||0)+1);m.uet&&m.uet("cf",c,{wb:1})},k=function(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)};return{getAStateFromDom:l,getAStateFromDomWithoutJson:n,getDeliveryOption:function(){return c(a.SNS_ONMLV2_DELIVERY_OPTION_FORM_FIELD).val()},getSwitchDeliveryOption:function(){if(!g){var a=q();a&&(g=a.deliveryOption)}return g},getBuyboxMessageParam:q,isMobileDevice:y,isMobileWeb:function(){return w("mobile")},
isMobileApp:function(){return w("mobileApp")},isTabletApp:function(){return w("iPad")||w("tabletApp")||w("tabletLargeApp")},isWeb:B,getSnsFrequencyParam:r,getSnsFrequencyParamForB2B:function(){return h(t,"sns-frequency-params","snsFrequencyParamsMap")},getOnmlFrequencyParam:p,getOnmlFrequencyParamForB2B:function(){return h(t,"sns-frequency-params","onmlFrequencyParamsMap")},getIsCustomerPrimeMap:function(){return h(t,"is-prime-customer","IsPrime")},getIsB2bDiscountWinningMap:function(){return h(t,
"is-b2b-discount-winning","isB2bDiscountWinning")},getIsRDProgramWinner:function(){return h(t,"rd-program-params","isRDProgramWinner")},getDeliveryInfoParam:function(){var a;a=c("#replenishment-onml-frequency-accordion");var b=c("#replenishment-sns-frequency-accordion");a=0!==a.length||0!==b.length?Math.max(a.children().length,b.children().length):Math.max(c("[name\x3drcxOrdFreqSns]").children("option").length,c("[name\x3drcxOrdFreqOnml]").children("option").length);b=l(t,"sns-frequency-params","deliveryInfoParamsMap");
6===a&&b.snsDates&&6<b.snsDates.length&&(a=b,a.snsDates=a.snsDates.filter(f),a.onmlDates=a.onmlDates.filter(f),k("filteringWeeklyDeliveryInfoWhenGranularDisabled"),b=a);return b},getDiscountOptionsParam:function(){return l(t,"sns-frequency-params","discountOptionsParamsMap")},getDiscountTypeParam:function(){return n(t,"sns-frequency-params","deliveryTypeParamsMap")},getOnmlDateParam:function(){return n(t,"sns-frequency-params","onmlDateParamsMap")},createHiddenInput:function(a,c){return'\x3cinput type\x3d"hidden" name\x3d"'+
a+'" value\x3d"'+c+'"\x3e'},getBuyNowAction:function(){return y()?c(a.MOBILE_ADD_TO_CART_DIV).attr("action"):B()?c(a.ADD_TO_CART_DIV).attr("action"):c(a.TABLET_ADD_TO_CART_DIV).attr("action")},getOnmlv2FormValueByName:function(b){return c(a.SNS_ONMLV2_FORM_FIELDS+" [name\x3d'"+b+"']").val()},getSubscribeButtonFormValueByName:function(b){return c(a.SUBSCRIBE_BUTTON_FORM_FIELDS+" [name\x3d'"+b+"']").val()},isCbbTemplateEnabled:function(){return c(a.SNS_CBB_ACCORDION_ROW).length},removeFormFieldsIntroducedByCbb:function(){c(a.SNS_ONMLV2_FORM_FIELDS+
" #ASIN").remove();c(a.SNS_ONMLV2_FORM_FIELDS+" #offerListingID").remove();c(a.SNS_ONMLV2_FORM_FIELDS+" #snsOfferListingID").remove();c(a.SNS_ONMLV2_FORM_FIELDS+" #snsMerchantID").remove();c(a.SNS_ONMLV2_FORM_FIELDS+" #rcxOrdFreq").remove();c(a.SNS_ONMLV2_FORM_FIELDS+" #quantity").remove()},getCbbSnsAccordionRowRadioButton:C,isCbbSnsAccordionRowExpanded:function(){return"true"===C().getAttribute("aria-checked")},isTiered:D,getOnmlFirstRecurringDeliveryDate:x,getOnmlDeclarativeAction:function(){return c("#onmlDeclarativeAction").val()},
generateUrlParams:function(b){if(!b){var d=a.SNS_SELECT_DELIVERY_URL;return d}var f=(y()?c(a.SNS_FREQUENCY_FORM_FIELD_MOBILE):c(a.SNS_FREQUENCY_FORM_FIELD)).val(),e=[];e.subscribeOnlyDate=b.justSubscribeDeliveryDate;e.subscribeOnlyDateShort=b.justSubscribeShortDeliveryDate;e.subscribeOnlyDiscount=b.justSubscribeTieredStatus?b.tieredDiscountPercent:b.baseDiscountPercent;e.onmlDate=b.oneTimeDeliveryDate;e.onmlDateShort=b.oneTimeShortDeliveryDate;e.onmlDiscount=b.baseDiscountPercent;e.onmlNextDate=x(b,
f);e.onmlNextDiscount=D(b,f)?b.tieredDiscountPercent:b.baseDiscountPercent;e.snsDeliveryOption=c(a.SNS_SELECT_DELIVERY_OPTION_ID).val();e.isMobile=y();e.snscsrf=b.deliveryModalCSRFToken;d=a.SNS_SELECT_DELIVERY_URL;Object.keys(e).forEach(function(a){d+="\x26"+a+"\x3d"+encodeURI(e[a])});return d},createUrlParameter:function(a,c){c=encodeURIComponent(c);return a+"\x3d"+c+"\x26"},getDefaultDeliveryOption:function(){return A()?a.SNS_DELIVERY_OPTION_ONML:a.SNS_DELIVERY_OPTION_SNS},isONMLDefault:A,getSelectedDeliveryOption:v,
updatePrimeShippingMessage:function(){v()===a.SNS_DELIVERY_OPTION_SNS?c(a.SNS_CBB_PRIME_SHIPPING).addClass("aok-hidden"):c(a.SNS_CBB_PRIME_SHIPPING).removeClass("aok-hidden")},isDeliveryChangeCheckboxVisible:E,getDefaultFrequency:function(a){var c=null;(a=a?r():p())&&Array.isArray(a)&&(c=a.find(function(a){if(!0===a.isDefault)return a}));return c?c.value.split("|")[0]:null},getCurrencyCode:function(){return n(t,"sns-huc-data","currencyCode")},emitSsbMetrics:z,emitInvalidFrequencyMetric:function(a,
b){var d=c("input[name\x3drcxOrdFreqOnml]").val(),f=c("input[name\x3drcxOrdFreqSns]").val(),e=/^[0-9][M|W]\|onml$/,h=/^[0-9][M|W]\|sns$/;d===t||null===d||e.test(d)||k(a);f===t||null===f||h.test(f)||k(b)},emitMetric:k,getAnnualSavingsParamMap:function(){return l(t,"sns-upsell-params","annualSavingsParamsMap")},getPotentialSavingsParamMap:function(){return l(t,"sns-upsell-pot-savings-params","potentialSavingsParamsMap")},getAnnualSavingsWeblabTreatment:function(){return n(t,"sns-upsell-params","annualSavingsWeblabTreatment")},
getDefaultSavingsValue:function(){return n(t,"sns-upsell-params","defaultAnnualSavingsValue")},recordWeblabTriggers:function(a,c){try{m.ue&&"function"===typeof m.ue.trigger&&m.ue.trigger(a,c)}catch(b){k("snsWeblabTriggeringException")}},logErrorWithAttribution:function(a,c){m.ueLogError&&m.ueLogError(c,{logLevel:"ERROR",attribution:a})},getSubscriberDiscountMessageWeblabTreatment:function(){return n(t,a.SNS_SUBSCRIBER_DISCOUNT_MESSAGE_STATE_ID,"subscriberDiscountMessageTreatment")},isSnSAccordionActive:function(){var a=
e.$(d.ACTIVE_ACCORDION_SELECTOR).data(d.ACCORDION_ROW_NAME_SELECTOR);return a===d.SNS_ACCORDION_ROW_NAME_DESKTOP||a===d.SNS_ACCORDION_ROW_NAME_MOBILE||a===d.SNS_ACCORDION_ROW_NAME_MOBILE_APP},isSnSSelectedAccordion:function(a){a=a.selectedRow.rowName;return a===d.SNS_ACCORDION_ROW_NAME_DESKTOP||a===d.SNS_ACCORDION_ROW_NAME_MOBILE||a===d.SNS_ACCORDION_ROW_NAME_MOBILE_APP},isSnSAccordionActiveForDeviceType:function(a){var c=e.$(d.ACTIVE_ACCORDION_SELECTOR).data(d.ACCORDION_ROW_NAME_SELECTOR);return a===
d.DEVICE_TYPE.DESKTOP?c===d.SNS_ACCORDION_ROW_NAME_DESKTOP:a===d.DEVICE_TYPE.MOBILE?c===d.SNS_ACCORDION_ROW_NAME_MOBILE:a===d.DEVICE_TYPE.MOBILE_APP?c===d.SNS_ACCORDION_ROW_NAME_MOBILE_APP:!1},isSnSSelectedAccordionForDeviceType:function(a,c){a=a.selectedRow.rowName;return c===d.DEVICE_TYPE.DESKTOP?a===d.SNS_ACCORDION_ROW_NAME_DESKTOP:c===d.DEVICE_TYPE.MOBILE?a===d.SNS_ACCORDION_ROW_NAME_MOBILE:c===d.DEVICE_TYPE.MOBILE_APP?a===d.SNS_ACCORDION_ROW_NAME_MOBILE_APP:!1},showMoreFrequencyOptions:function(b,
f){for(var e=0;e<b;e++){var h;h=f===d.DELIVERY_OPTION.SNS?c("#"+a.SNS_FREQUENCY_ACCORDION_ROW_PREFIX+e):c("#"+a.ONML_FREQUENCY_ACCORDION_ROW_PREFIX+e);h.hasClass("aok-hidden")&&h.removeClass("aok-hidden")}f===d.DELIVERY_OPTION.SNS?c(a.REPLENISHMENT_SNS_FREQUENCY_ACCORDION_ID).find(a.SHOW_MORE_FREQUENCY_OPTIONS_SECTION).addClass("aok-hidden"):c(a.REPLENISHMENT_ONML_FREQUENCY_ACCORDION_ID).find(a.SHOW_MORE_FREQUENCY_OPTIONS_SECTION).addClass("aok-hidden")},getQuantityIndex:function(){var c=e.$(a.SNS_QUANTITY);
try{var b=c.prop("selectedIndex");if(0===b)return b;if(0<b)return b-("a-prompt"===c[0].options[0].className?1:0)}catch(d){k("snsQuantityIndexException")}},getFrequencyValueExcludingDeliveryType:function(a){if(null!==a&&"string"===typeof a)return a.replace(/\|(.*)/,"")}}});p.when("A","a-dropdown","sns-onmlv2-utils","sns-buybox-constants","sns-constants","sns-savings-utils").register("sns-vmf-utils",function(e,b,a,d,f,k){var c=e.$,g=function(a){var d=c("[name\x3drcxOrdFreqSns]"),f=c("[name\x3drcxOrdFreqOnml]");
0!==d.length&&0!==f.length&&(d=d[0].options[a].value,a=f[0].options[a].value,b.getSelect(c("[name\x3drcxOrdFreqSns]")).setValue(d),b.getSelect(c("[name\x3drcxOrdFreqOnml]")).setValue(a))},l=function(b){Object.keys(f.DELIVERY_OPTION).forEach(function(e){e=f.DELIVERY_OPTION[e];var h=e+"FrequencySelectedIndex",g=e===f.DELIVERY_OPTION.SNS?a.getSnsFrequencyParam():a.getOnmlFrequencyParam();c("input[name\x3d'"+h+"']").val(b);h=g[b].label;c("#replenishment-"+e+"-frequency-trigger").text(h);g=g[b].value;
c("input[name\x3d'"+(d.SNS_FREQUENCY_NAME+e+"V2")+"']").val(g)})},h=function(a){var b=0;0<c(d.RCX_ORD_FREQ_ONML_WRAPPER).length||0<c(d.RCX_ORD_FREQ_SNS_WRAPPER).length?b=a===f.DELIVERY_OPTION.SNS?c("[name\x3drcxOrdFreqSns]").prop("selectedIndex"):c("[name\x3drcxOrdFreqOnml]").prop("selectedIndex"):(a+="FrequencySelectedIndex")&&0<a.length&&(b=c("input[name\x3d'"+a+"']").val());return b},n=function(a){var b=c("input[name\x3d'"+("rcxOrdFreq"+a+"V2")+"']");return b!==t&&null!==b&&0!==b.length?b.val():
a===f.DELIVERY_OPTION.SNS?c("[name\x3drcxOrdFreqSns]").val():c("[name\x3drcxOrdFreqOnml]").val()};return{updateFrequencyIndex:g,selectFrequency:function(b,f){c(".sns-delivery-buybox-upsell-message").html(b.upsellInformation.message);c(".sns-delivery-buybox-upsell-additional-message-title").html(b.upsellInformation.additionalMessageTitle);c(".sns-delivery-buybox-upsell-additional-message").html(b.upsellInformation.additionalMessage);if("sns"===f){c(".onml-delivery-link").addClass("aok-hidden");if(-1<
b.value.indexOf("W|")){c(".sns-delivery-link").addClass("aok-hidden");c(".sns-delivery-link-weekly").removeClass("aok-hidden");var e=c(".sns-delivery-link-weekly").html()}else c(".sns-delivery-link").removeClass("aok-hidden"),c(".sns-delivery-link-weekly").addClass("aok-hidden"),e=c(".sns-delivery-link").html();c(d.ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK).html(e);c(d.ACCORDION_HEADER_DELIVERY_OPTION_ONML_LINK).addClass("aok-hidden");c(d.ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK).removeClass("aok-hidden");
c(d.SNS_DELIVERY_OPTION_SNS_LINK_TEXT_IDENTIFIER).removeClass("aok-hidden");c(d.SNS_DELIVERY_OPTION_ONML_LINK_TEXT_IDENTIFIER).addClass("aok-hidden")}else c(".sns-delivery-link").addClass("aok-hidden"),c(".sns-delivery-link-weekly").addClass("aok-hidden"),c(".onml-delivery-link").removeClass("aok-hidden"),c(d.ACCORDION_HEADER_DELIVERY_OPTION_ONML_LINK).removeClass("aok-hidden"),c(d.ACCORDION_HEADER_DELIVERY_OPTION_SNS_LINK).addClass("aok-hidden"),c(d.SNS_DELIVERY_OPTION_SNS_LINK_TEXT_IDENTIFIER).addClass("aok-hidden"),
c(d.SNS_DELIVERY_OPTION_ONML_LINK_TEXT_IDENTIFIER).removeClass("aok-hidden");b=b.highlightedDiscount;var e=a.getDiscountTypeParam(),h=null!=a.getIsB2bDiscountWinningMap()&&!0===a.getIsB2bDiscountWinningMap()[0],g=null!=a.getIsB2bDiscountWinningMap()&&!0===a.getIsB2bDiscountWinningMap()[1],l=c(".discountPill \x3e #tieredDiscountText"),m=c(".discountPill \x3e #nonTieredDiscountText");0!==l.length&&0!==m.length&&(0===b?(m.removeClass("aok-hidden"),l.addClass("aok-hidden")):(l.removeClass("aok-hidden"),
m.addClass("aok-hidden")));0===b?(c("#subscriptionPrice \x3e #sns-base-price").removeClass("aok-hidden"),c("#subscriptionPrice \x3e #sns-tiered-price").addClass("aok-hidden"),c("#snsDetailPagePrice \x3e #sns-base-price").removeClass("aok-hidden"),c("#snsDetailPagePrice \x3e #sns-tiered-price").addClass("aok-hidden"),c(d.SNS_BASE_DISCOUNT_MESSAGE).removeClass("aok-hidden"),c(d.SNS_TIERED_DISCOUNT_MESSAGE).addClass("aok-hidden"),c(".discountPillLeft").addClass("pillLightUp"),c(".discountPillRight").removeClass("pillLightUp"),
e===d.DISCOUNT_TYPE_ZERO_BASE||h?c("#snsDiscountPill").addClass("aok-hidden"):c("#snsDiscountPill").removeClass("aok-hidden"),h?(c(".sns-ab-price-win-delivery-buybox-upsell-message").removeClass("aok-hidden"),c(".sns-delivery-buybox-upsell-message").addClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message-title").addClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message").addClass("aok-hidden")):(c(".sns-ab-price-win-delivery-buybox-upsell-message").addClass("aok-hidden"),
c(".sns-delivery-buybox-upsell-message").removeClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message-title").removeClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message").removeClass("aok-hidden"))):(c("#subscriptionPrice \x3e #sns-base-price").addClass("aok-hidden"),c("#subscriptionPrice \x3e #sns-tiered-price").removeClass("aok-hidden"),c("#snsDetailPagePrice \x3e #sns-base-price").addClass("aok-hidden"),c("#snsDetailPagePrice \x3e #sns-tiered-price").removeClass("aok-hidden"),
c(d.SNS_BASE_DISCOUNT_MESSAGE).addClass("aok-hidden"),c(d.SNS_TIERED_DISCOUNT_MESSAGE).removeClass("aok-hidden"),c(".discountPillLeft").removeClass("pillLightUp"),c(".discountPillRight").addClass("pillLightUp"),e===d.DISCOUNT_TYPE_ZERO_BASE&&"onml"===f||g?c("#snsDiscountPill").addClass("aok-hidden"):c("#snsDiscountPill").removeClass("aok-hidden"),g?(c(".sns-ab-price-win-delivery-buybox-upsell-message").removeClass("aok-hidden"),c(".sns-delivery-buybox-upsell-message").addClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message-title").addClass("aok-hidden"),
c(".sns-delivery-buybox-upsell-additional-message").addClass("aok-hidden")):(c(".sns-ab-price-win-delivery-buybox-upsell-message").addClass("aok-hidden"),c(".sns-delivery-buybox-upsell-message").removeClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message-title").removeClass("aok-hidden"),c(".sns-delivery-buybox-upsell-additional-message").removeClass("aok-hidden")),e===d.DISCOUNT_TYPE_ZERO_BASE&&"sns"===f&&(b=a.getSubscriberDiscountMessageWeblabTreatment(),"undefined"===typeof b||
null===b?a.emitMetric("snsSdmExperimentTreatmentUndefined"):(a.recordWeblabTriggers(d.SUBSCRIBER_DISCOUNT_MESSAGE_EXPERIMENT_ID,b),a.emitMetric("snsSdmExperimentTriggeringSuccess"))));k.checkPreConditionsAndUpdatePotentialSavings(n(f))},updateFrequencyPopoverInfo:l,getFrequencyIndex:h,updateFrequencyInfoForDeliveryOption:function(){if(0<c(d.RCX_ORD_FREQ_ONML_WRAPPER).length||0<c(d.RCX_ORD_FREQ_SNS_WRAPPER).length)c(d.RCX_ORD_FREQ_ONML_WRAPPER).hasClass("aok-hidden")?g(c("[name\x3drcxOrdFreqSns]").prop("selectedIndex")):
g(c("[name\x3drcxOrdFreqOnml]").prop("selectedIndex"));else{var a=c(d.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).hasClass("aok-hidden")||c(d.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).hasClass("aok-hidden")?f.DELIVERY_OPTION.SNS:f.DELIVERY_OPTION.ONML,a=h(a);l(a)}},getFrequencyValue:n,isSelectedFreqSameAsDefaultFreq:function(){var c=a.getDefaultFrequency(!0),b=a.getDefaultFrequency(!1),c=null!==c?c:b,b=(b=a.getSelectedDeliveryOption()===f.DELIVERY_OPTION.SNS?n(f.DELIVERY_OPTION.SNS):n(f.DELIVERY_OPTION.ONML))?
b.split("|")[0]:null;return c===b}}});p.when("A","sns-buybox-constants","ready").register("sns-accessibilty-handler",function(e,b){var a=e.$;e=[b.SNS_QUANTITY,b.SNS_FREQUENCY_FORM_FIELD];var d=function(b){!b||!b instanceof a||0===b.length||b.attr("tabIndex",0)};d(a(b.DSK_BB+", "+b.SNS_CBB_ACCORDION_ROW+", "+b.DSK_BB_DPV1).find(e.join()));return{setZeroTabIndex:d}});p.when("ready").register("sns-stringify-util",function(){return JSON&&"function"===typeof JSON.stringify?JSON.stringify:function(){var e=
{'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},b=/[\\"\u0000-\u001F\u2028\u2029]/g,a=Object.prototype.toString,d=Array.isArray||function(b){return"[object Array]"===a.call(b)},f=function(a){return e[a]||"\\u"+(a.charCodeAt(0)+65536).toString(16).substr(1)};return function c(e){if(null===e)return"null";if("number"===typeof e)return isFinite(e)?e.toString():"null";if("boolean"===typeof e)return e.toString();if("object"===typeof e){if("function"===typeof e.toJSON)return c(e.toJSON());
if(d(e)){for(var l="[",h=0;h<e.length;h++)l+=(h?", ":"")+c(e[h]);return l+"]"}if("[object Object]"===a.call(e)){l=[];for(h in e)e.hasOwnProperty(h)&&l.push(c(h)+": "+c(e[h]));return"{"+l.join(", ")+"}"}}return'"'+e.toString().replace(b,f)+'"'}}()});p.when("A","sns-stringify-util","ready").register("sns-declarative-util",function(e,b){function a(a){return a&&("object"===typeof a||"object"===typeof a.prototype)}function d(){for(var a=0;a<arguments.length;a++)if("string"!==typeof arguments[a])throw"Function parameter must be of type string.";
}function f(){for(var a=Object.prototype.toString,b=Array.isArray||function(b){return"[object Array]"===a.call(b)},e=0;e<arguments.length;e++){var f=arguments[e];if(b(f)&&0<f.length)for(var k=0;k<f.length;k++)d(f[k]);else throw"Function parameter must be a non empty array.";}}function k(c){var d="data-"+c.getAttribute("data-action"),f=function(){var a=c.getAttribute(d),f=a?e.parseJSON(a):{};f.save=function(){var a=f.save;delete f.save;var e=b(f);c.setAttribute(d,e);f.save=a};return f};return{hasExactKeyHeirarchy:function(b,
c){var d=f();b=b.split(".");for(var e=0<b.length,g=0;g<b.length&&e;g++)var k=b[g],e=a(d)&&d.hasOwnProperty(k),d=d[k];e&&c!==t&&(e=d===c);return e},hasParsableJSON:function(){try{return f().save(),!0}catch(a){return!1}},put:function(b){var c=f();a(c.inputs)||(c.inputs={});e.$.each(b,function(a,b){c.inputs[a]=b});c.save()},getData:f}}return{query:function(b){f(b);var g=[],l=[],h=[],n,q,r=function(){return{numberOfMatchingActions:g.length,allMatchKeyValue:function(a,b){d(a);for(var c=0<this.numberOfMatchingActions,
f=0;f<this.numberOfMatchingActions&&c;f++)c=(c=g[f])&&c.hasExactKeyHeirarchy(a,b);return c},putAll:function(a){for(var b=0;b<this.numberOfMatchingActions;b++)g[b].put(a)},getStrings:function(){for(var a=0;a<this.numberOfMatchingActions;a++){var b=g[a];if(b.getData().strings)return b.getData().strings}return[]},getData:function(){for(var a=0;a<this.numberOfMatchingActions;a++){var b=g[a];if(b.getData())return b.getData()}return[]}}},m=function(){for(var d=e.$("#buybox").find(".a-declarative").get(),
f=0<l.length,n=0;n<d.length;n++){var q=d[n],m;a:{m=q;for(var p=b,t=0;t<p.length;t++){var u;var x=m;u=p[t];a(x)&&"string"===typeof u?(x=x.getAttribute("data-action")||"",u=0===u.localeCompare(x)):u=!1;if(u){m=!0;break a}}m=!1}if(m&&(q=k(q),q.hasParsableJSON()))if(f){m=!0;for(p=0;p<l.length&&m;p++)m=q.hasExactKeyHeirarchy(l[p],h[p]);m&&g.push(q)}else g.push(q)}return r()};n=function(a){d(a);l.push(a);return{equals:q,equalsAny:function(){return q(t)}}};q=function(a){h.push(a);return{where:n,execute:m}};
return{where:n,execute:m}}}});p.when("A","sns-utils","sns-buybox-constants","sns-declarative-util").register("sns-atc-utils",function(e,b,a,d){var f=e.$,k=["aw-mash","add-to-cart","one-click","show-services-interstitial"],c=function(a){d.query(k).where("buttonID").equals("add-to-cart").execute().putAll(a);d.query(k).where("buttonID").equals("buy-now").execute().putAll(a);d.query(k).where("buttonID").equals("buy-now-one-click").execute().putAll(a)};return{initializeOnmlDeclaratives:function(){if(b.isSnSEligible()){var d=
b.getAStateFromDom(a.SNS_OPT_IN_FEATURE_DIV,"sns-add-to-cart-params","addToCartParams");c(d||{});f("\x3cinput type\x3dhidden value\x3dtrue \x3e").prop("id",a.SNS_ONML_INIT_INPUT_ID).appendTo(a.SNS_OPT_IN_FEATURE_DIV)}},setOnmlDeclaratives:c,getAddToCartStrings:function(){return d.query(k).where("buttonID").equals("add-to-cart").execute().getStrings()},getAddToCartData:function(){return d.query(k).where("buttonID").equals("add-to-cart").execute().getData()}}});p.when("A","sns-utils","sns-constants",
"sns-atc-utils").register("sns-atc",function(e,b,a,d){return{init:function(){b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,d.initializeOnmlDeclaratives);d.initializeOnmlDeclaratives()}}});p.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper").register("sns-onmlv2-atc",function(e,b,a,d){function f(c){if(d.isSnsLocked())a.emitMetric("sns-onmlv2-atc-sns-locked-moq");else{var f=k("\x3cform\x3e",{method:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.method,action:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.action,
id:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.id,name:b.SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES.name}),e="";if(a.isCbbTemplateEnabled()){a.emitMetric("sns-onmlv2-atc-cbb-template-enabled");for(var h=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"snsAddressId"},{name:"snsOnmlOfferId"},{name:"snsMostCommonFrequency"},{name:"rcxOrdFreq"},{name:"quantity"}],n=0;n<h.length;n++)var q=h[n].name,r=h[n].fieldName?h[n].fieldName:q,r=a.getOnmlv2FormValueByName(r),e=e+a.createHiddenInput(q,
r)}else{a.emitMetric("sns-onmlv2-atc-cbb-template-not-enabled");a.removeFormFieldsIntroducedByCbb();h=[{name:"ASIN"},{name:"offerListingID",fieldName:"snsOfferListingID"},{name:"rcxOrdFreq"},{name:"snsOnmlOfferId"},{name:"snsMostCommonFrequency"},{name:"snsAddressId"}];for(n=0;n<h.length;n++)q=h[n].name,r=h[n].fieldName?h[n].fieldName:q,r=a.isMobileDevice()?k(b.MOBILE_ADD_TO_CART_DIV+" [name\x3d"+r+"]").val():a.isWeb()?k(b.ADD_TO_CART_DIV+" [name\x3d"+r+"]").val():k(b.TABLET_ADD_TO_CART_DIV+" [name\x3d"+
r+"]").val(),e+=a.createHiddenInput(q,r);h=a.isMobileDevice()?k(b.SNS_MOBILE_QUANTITY):k(b.QUANTITY_CONTAINER).find(b.SNS_QUANTITY);e+=a.createHiddenInput("quantity",h.val())}e+=a.createHiddenInput("ref",c);e+=a.createHiddenInput("submit.add-to-cart","1");f.html(e);k("body").append(f);k(b.SNS_ADD_TO_CART_FORM).submit();k(b.SNS_ADD_TO_CART_FORM).remove()}}var k=e.$;e.declarative("sns-add-to-cart","click",function(b){a.emitMetric("sns-onmlv2-atc-sns-add-to-cart");f("onmlv2_atc")});return{createAndSubmitAddToCartForm:f}});
p.when("A","sns-utils","sns-constants","sns-buybox-constants","sns-atc-utils").register("sns-buybox-utils",function(e,b,a,d){var f=function(a){if(0<a.length)return a.innerWidth()<a[0].scrollWidth},k=function(c,d,f){d=c+"_"+(f?"checkedLabel":"uncheckedLabel")+"_"+("oneClick"===c?d:"all");c=b.getOnmlParam(d);d=(f=b.getOnmlUserPref(a.USER_PREFS_KEYS.ONML_PARAMS))&&f[d];if(c=c||d)return e.$("\x3cp\x3e"+c+"\x3c/p\x3e").text()};return{updateOneClickButtonLabel:function(a){if(b.isVerucaOneClickEnabled()){a=
"boolean"===typeof a?a:e.$(d.SNS_OPT_IN_CHECKBOX).is(":checked");var g=e.$(d.ONE_CLICK_BUTTON),l=e.$(d.ONE_CLICK_BUTTON_ICON),h=e.$(d.ONE_CLICK_BUTTON_TEXT),n=b.getDeviceType(),q=k("oneClick",n,!0),n=k("oneClick",n,!1);q&&n&&(a?(h.text(q),f(h)&&(l.addClass("aok-hidden"),g.removeClass("a-button-icon"))):(h.text(n),l.length&&(g.addClass("a-button-icon"),l.removeClass("aok-hidden"))))}},updateBuyNowButtonLabel:function(a){if(b.isVerucaBuyNowEnabled()){a="boolean"===typeof a?a:e.$(d.SNS_OPT_IN_CHECKBOX).is(":checked");
var g=e.$(d.BUY_NOW_BUTTON),l=e.$(d.BUY_NOW_BUTTON_ICON),h=e.$(d.BUY_NOW_BUTTON_TEXT),n=b.getDeviceType(),q=k("buyNow",n,!0),n=k("buyNow",n,!1);q&&n&&(a?(h.text(q),f(h)&&(l.addClass("aok-hidden"),g.removeClass("a-button-icon"))):(h.text(n),l.length&&(g.addClass("a-button-icon"),l.removeClass("aok-hidden"))))}},updateAddToCartButtonLabel:function(a){a="boolean"===typeof a?a:e.$(d.SNS_OPT_IN_CHECKBOX).is(":checked");var g=e.$(d.ADD_TO_CART_BUTTON).closest(".a-button"),l=g.find(".a-button-inner"),h=
g.find("i.a-icon"),n=g.find("span.a-button-text"),q=b.getDeviceType(),r=k("addToCart",q,!0),q=k("addToCart",q,!1);r&&q&&(a?(n.text(r),l.addClass("sns-onml-sky-button-inner"),n.addClass("sns-onml-sky-button-text"),f(n)&&(h.addClass("aok-hidden"),g.removeClass("a-button-icon"))):(n.text(q),l.removeClass("sns-onml-sky-button-inner"),n.removeClass("sns-onml-sky-button-text"),h.length&&(g.addClass("a-button-icon"),h.removeClass("aok-hidden"))))},showSnSMerchantInfoIfSnSOptInChecked:function(a){var b=e.$(d.SNS_ONML_MERCHANT_INFO);
a="boolean"===typeof a?a:e.$(d.SNS_OPT_IN_CHECKBOX).is(":checked");b.toggleClass("aok-hidden",!a)},showGoldBoxDiscountMessageIfSnSOptInChecked:function(a){var b=e.$(d.GOLDBOX_DISCOUNT_MESSAGE);a="boolean"===typeof a?a:e.$(d.SNS_OPT_IN_CHECKBOX).is(":checked");b.toggleClass("aok-hidden",!a)},showSubscribeOnlyButtonIfSnSOptInChecked:function(a){var b=e.$(d.JUST_SUBSCRIBE_DIV);a="boolean"===typeof a?a:e.$(d.SNS_OPT_IN_CHECKBOX).is(":checked");b.toggleClass("aok-hidden",!a)},logError:function(a,b){m.ueLogError&&
m.ueLogError(a,{logLevel:"ERROR",attribution:b,message:a})}}});p.when("A","sns-buybox-constants","sns-onmlv2-utils","ready").execute("sns-onmlv2-join-prime",function(e,b,a){var d=e.$,f=function(){d(b.SNS_ONMLV2_JOIN_PRIME_CHECKBOX).length&&(d(b.SNS_ONMLV2_JOIN_PRIME_UPSELL).removeClass("aok-hidden"),d(b.SNS_ONMLV2_JOIN_PRIME_CHECKBOX).is(":checked")?(d(b.SNS_ONMLV2_JOIN_PRIME_BUTTON).removeClass("aok-hidden"),d(b.SNS_SUBSCRIBE_SUBMIT_BUTTON).addClass("aok-hidden")):(d(b.SNS_ONMLV2_JOIN_PRIME_BUTTON).addClass("aok-hidden"),
d(b.SNS_SUBSCRIBE_SUBMIT_BUTTON).removeClass("aok-hidden")))};f();d(document).delegate(b.SNS_ONMLV2_JOIN_PRIME_CHECKBOX,"change",function(a){f()});e.declarative("sns-join-prime","click",function(f){f=e.state("momJoinPrimeEndpointState");f=d("\x3cform\x3e",{method:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES.method,action:f&&f.endpoint?f.endpoint:"/gp/prime/pipeline/membersignup/",id:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES.id,name:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES.name});for(var c="",g=[{name:"session-id"},{name:"momAsin"},
{name:"ref"}],l=0;l<g.length;l++)var h=g[l].name,n=a.getSubscribeButtonFormValueByName(h),c=c+a.createHiddenInput(h,n);f.html(c);d("body").append(f);d(b.SNS_JOIN_PRIME_FORM).submit();d(b.SNS_JOIN_PRIME_FORM).remove()})});p.when("A","ready").execute("sns-load-static-images",function(e){var b=e.$;b("#learnMoreBottomSheet .a-manually-loaded").each(function(){e.loadImageManually(b(this))})});p.when("A","sns-buybox-constants","sns-onmlv2-utils").execute("sns-legacy-subscribe",function(e,b,a){var d=e.$;
e.declarative("sns-legacy-subscribe","click",function(f){f=d("\x3cform\x3e",{method:b.SNS_LEGACY_SUBSCRIBE_FORM_ATTRIBUTES.method,action:b.SNS_LEGACY_SUBSCRIBE_FORM_ATTRIBUTES.action,id:b.SNS_LEGACY_SUBSCRIBE_FORM_ATTRIBUTES.id,name:b.SNS_LEGACY_SUBSCRIBE_FORM_ATTRIBUTES.name});for(var e="",c=[{name:"ASIN"},{name:"offerListingID"},{name:"merchantID"},{name:"snsOfferListingID"},{name:"snsMerchantID"},{name:"rcxOrdFreq"},{name:"quantity"}],g=0;g<c.length;g++)var l=c[g].name,h=a.getSubscribeButtonFormValueByName(l),
e=e+a.createHiddenInput(l,h);e+=a.createHiddenInput("ref","sns-legacy-subscribe");e+=a.createHiddenInput("submit.rcx-subscribe","1");f.html(e);d("body").append(f);d(b.SNS_LEGACY_SUBSCRIBE_FORM).submit();d(b.SNS_LEGACY_SUBSCRIBE_FORM).remove()})});p.when("A","sns-subscribe-button-utils").execute("sns-subscribe-button",function(e,b){e.declarative("sns-submit-btn-declarative","click",function(a){b.emitMetric("sns-subscribe-button-sns-submit-btn-declarative-called");b.createAndSubmitSubscribeNowForm("sns-subscribe-btn-dp-vmf-")});
e.declarative("sns-subscribe-poi-declarative","click",function(a){b.emitMetric("sns-subscribe-button-sns-subscribe-poi-declarative-called");b.createAndSubmitSubscribeNowForm(a.data.refTag)});e.declarative("sns-mom-submit-btn-declarative","click",function(a){b.emitMetric("sns-subscribe-button-sns-mom-submit-btn-declarative-called");b.createAndSubmitSubscribeNowForm("sns-mom-btn-dp-vmf-")})});p.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-moq-helper","sns-metrics-constants","sns-vmf-utils",
"sns-constants").register("sns-subscribe-button-utils",function(e,b,a,d,f,k,c){var g=e.$;return{emitMetric:function(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)},createAndSubmitSubscribeNowForm:function(l){if(!d.isSnsLocked()){var h,n;g("#chkMom").length&&g("#chkMom").is(":checked")?(h=g("\x3cform\x3e",{method:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES_VMF.method,action:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES_VMF.action,id:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES_VMF.id,name:b.SNS_JOIN_PRIME_FORM_ATTRIBUTES_VMF.name}),n=b.SNS_JOIN_PRIME_FORM_ATTRIBUTES_VMF.id):
(h=g("\x3cform\x3e",{method:b.SUBSCRIBE_FORM_ATTRIBUTES.method,action:b.SUBSCRIBE_FORM_ATTRIBUTES.action,id:b.SUBSCRIBE_FORM_ATTRIBUTES.id,name:b.SUBSCRIBE_FORM_ATTRIBUTES.name}),n=b.SUBSCRIBE_FORM_ATTRIBUTES.id);for(var q="",r=b.SUBSCRIBE_FORM_FIELDS,m=0;m<r.length;m++){var p=r[m].name,v=r[m].fieldName?r[m].fieldName:p;"rcxOrdFreqSns"===v?(v=k.getFrequencyValue(c.DELIVERY_OPTION.SNS),a.emitMetric(f.SNS_CREATE_SUBSCRIPTION_WITH_FREQUENCY+v)):"rcxOrdFreqOnml"===v?(v=k.getFrequencyValue(c.DELIVERY_OPTION.ONML),
a.emitMetric(f.SNS_CREATE_SUBSCRIPTION_WITH_FREQUENCY+v)):v=g("[name\x3d'"+v+"']").val();q+=a.createHiddenInput(p,v)}r=e.$(b.SNS_MOBILE_QUANTITY);if(r===t||r.val()===t)if(r=g("[name\x3d'rcxsubsQuan']"),r===t||r.val()===t)r=g("[id\x3d'rcxsubsQuan']");m=0!==g(b.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).length?!g(b.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).hasClass("aok-hidden"):0!==g(b.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).length?!g(b.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).hasClass("aok-hidden"):
0!==g(b.ONML_FREQUENCY_BOTTOMSHEET_SELECTOR).length?!g(b.ONML_FREQUENCY_BOTTOMSHEET_SELECTOR).hasClass("aok-hidden"):!g("#rcxOrdFreqOnmlWrapper").hasClass("aok-hidden");m||(p=a.getDeliveryInfoParam().snsDates[k.getFrequencyIndex(c.DELIVERY_OPTION.SNS)],q+=a.createHiddenInput("snsDate",p));q+=a.createHiddenInput("onmlSelected",m);q+=a.createHiddenInput("vmfEnabled","true");q+=a.createHiddenInput("quantity",r.val());q+=a.createHiddenInput("ref",l+(m?"onml":"sns"));q+=a.createHiddenInput("submit.subscribe",
"1");h.html(q);g("body").append(h);a.emitInvalidFrequencyMetric(f.SNS_ONML_INVALID_FREQUENCY_SELECT_METRICS,f.SNS_LEGACY_INVALID_FREQUENCY_SELECT_METRICS);g("#"+n).submit();g("#"+n).remove()}}}});"use strict";p.when("A").register("sns-upsell-message-trigger-handler",function(e){function b(){var a=e.$(".a-accordion-active").data("a-accordion-row-name");return"snsAccordionRowMiddle"===a||"snsAccordionRowMobileMiddle"===a||"snsAccordionRowMobileAppMiddle"===a}var a=!1,d=function(a,b){m.ue&&"function"===
typeof m.ue.trigger&&m.ue.trigger(a,b)},f=function(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)};return{handleAnnualSavingsExperimentTriggering:function(k,c){try{a||null===k||0===k.length||(b()?(d("CONSUMABLES_SNS_DP_ANNUAL_SAVINGS_EXPERIMENT_ITERATION_1127144",c),a=!0,f("snsAnnualSavingsReIterationWeblabTriggeringSuccess")):f("snsAccordionNotActiveForAnnualSavingsExperiment"))}catch(g){f("snsAnnualSavingsReIterationWeblabTriggeringFailure")}e.on("a:accordion:buybox-accordion:select",function(b){try{if(!a&&
null!==k&&0!==k.length){var e=b.selectedRow.rowName;"snsAccordionRowMiddle"===e||"snsAccordionRowMobileMiddle"===e||"snsAccordionRowMobileAppMiddle"===e?(d("CONSUMABLES_SNS_DP_ANNUAL_SAVINGS_EXPERIMENT_ITERATION_1127144",c),a=!0,f("snsAnnualSavingsReIterationWeblabTriggeringSuccess")):f("snsAccordionNotSelectedForAnnualSavingsExperiment")}}catch(h){f("snsAnnualSavingsReIterationWeblabTriggeringFailure")}})}}});p.register("sns-constants",function(){return{TIERED:"tiered",NON_TIERED:"nonTiered",BASE:"BASE",
PREMIUM:"PREMIUM",ZERO_BASE:"ZERO_BASE",EVENT_NAMESPACE:{PAGE_UPDATE:"pageUpdate",FREQUENCY_HIDDEN_INPUT_CHANGE:"frequencyHiddenInputChange"},USER_PREFS_KEYS:{SNS_OPT_IN:"snsOptIn",SNS_FREQUENCY:"rcxOrdFreq",ONML_PARAMS:"onmlParams"},DELIVERY_OPTION:{SNS:"sns",ONML:"onml"},WEBLAB_TREATMENT:{C:"C",T1:"T1",T2:"T2"},DEVICE_TYPE:{DESKTOP:"desktop",MOBILE:"mobile",MOBILE_APP:"mobile_app"},ACCORDION_ROW_NAME_SELECTOR:"a-accordion-row-name",ACTIVE_ACCORDION_SELECTOR:".a-accordion-active",SNS_ACCORDION_ROW_NAME_DESKTOP:"snsAccordionRowMiddle",
SNS_ACCORDION_ROW_NAME_MOBILE:"snsAccordionRowMobileMiddle",SNS_ACCORDION_ROW_NAME_MOBILE_APP:"snsAccordionRowMobileAppMiddle"}});p.when("A","sns-utils","sns-constants","sns-buybox-constants").register("sns-event-handler",function(e,b,a,d){return{init:function(){function f(a){for(var b=e.$("\x3cform\x3e",{method:d.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.method,action:d.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.action,id:d.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.id,name:d.SUBSCRIBE_ONLY_FORM_ATTRIBUTES.name}),f=[{name:"ASIN"},
{name:"offerListingID"},{name:"merchantID"},{name:"rcxOrdFreq"},{name:"snsOfferListingID"},{name:"snsMerchantID"}],l="",h=0;h<f.length;h++)var n=f[h].name,m=e.$("[name\x3d"+n+"]").val(),l=l+('\x3cinput type\x3d"hidden" name\x3d"'+n+'" value\x3d"'+m+'"\x3e');l=l+('\x3cinput type\x3d"hidden" name\x3d"ref" value\x3d"'+a+'"\x3e')+'\x3cinput type\x3d"hidden" name\x3d"submit.rcx-subscribe" value\x3d"1"\x3e';a=e.$(d.QUANTITY_CONTAINER).find(d.QUANTITY);l+='\x3cinput type\x3d"hidden" name\x3d"quantity" value\x3d"'+
a.val()+'"\x3e';b.html(l);e.$("body").append(b);e.$(d.SUBSCRIBE_ONLY_FORM).submit()}b.isSnSEligible()&&b.setOnmlUserPref(a.USER_PREFS_KEYS.ONML_PARAMS,b.getOnmlParam());b.registerCallbackForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE,function(){var f=b.getOnmlUserPref(a.USER_PREFS_KEYS.ONML_PARAMS)||{},c=f.asin,g=b.getOnmlParam("asin");f.asin=g;b.setOnmlUserPref(a.USER_PREFS_KEYS.ONML_PARAMS,f);f=c!==g;c=b.getOnmlUserPref(a.USER_PREFS_KEYS.SNS_OPT_IN);"undefined"!==typeof c&&e.$(d.SNS_OPT_IN_CHECKBOX).is(":checked")!==
c&&(b.enableSnSOptIn(),e.$(d.SNS_OPT_IN_CHECKBOX).click());(c=b.getOnmlUserPref(a.USER_PREFS_KEYS.SNS_FREQUENCY))&&!f?b.isMobileDevice()?e.$(d.SNS_FREQ_BOTTOMSHEET_SELECTOR).find("button[value\x3d"+c+"]").click():e.$("[data-a-accordion-row-name\x3dfrequencyAccordionRow"+(c-1)+"] a").click():b.deleteOnmlUserPref(a.USER_PREFS_KEYS.SNS_FREQUENCY)});e.$(d.SNS_FREQUENCY_FORM_FIELD).change(function(){b.executeCallbacksForNameSpace(a.EVENT_NAMESPACE.FREQUENCY_HIDDEN_INPUT_CHANGE)});e.on("a:pageUpdate",function(){b.executeCallbacksForNameSpace(a.EVENT_NAMESPACE.PAGE_UPDATE)});
e.declarative("subscribe-only","click",function(a){f("onml_so_l")});e.declarative("just-subscribe","click",function(a){f("onml_justsub_l")})}}});p.when("A","a-popover","sns-onmlv2-utils").register("sns-common-utils",function(e,b,a){return{updateLearnMoreUpsellHeight:function(d){var f=b.get(e.$("#sns-learn-more"));f?d?f.update({height:460}):f.update({height:251}):a.emitMetric("snsLearnMorePopOverAbsent")}}});p.register("sns-metrics-constants",function(){return{METRIC_DELIMITER:".",B2B_BUY_BOX_MESSAGE_UPDATE_SUCCESSFUL:"b2bBuyBoxMessageUpdateSuccessful",
B2B_BUY_BOX_MESSAGE_UPDATE_FAILED:"b2bBuyBoxMessageUpdateFailed",SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS:"snsOnmlExistingSnsCustomerCheck",SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS:"snsOnmlNewSnsCustomerCheck",SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS:"snsOnmlExistingSnsCustomerUncheck",SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS:"snsOnmlNewSnsCustomerUncheck",SNS_SIGN_IN_IF_NOT_ALREADY_SIGNED_IN_METRICS:"snsSignInIfNotAlreadySignedIn",SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS:"snsOnmlFrequencyLabelClick",
SNS_ONML_FREQUENCY_CHANGE_METRICS:"snsOnmlFrequencyChange",SNS_ONML_WEEKLY_FREQUENCY_SELECT_METRICS:"snsOnmlWeeklyFrequencySelectMetrics",SNS_ONML_MONTHLY_FREQUENCY_SELECT_METRICS:"snsOnmlMonthlyFrequencySelectMetrics",SNS_ONML_INVALID_FREQUENCY_SELECT_METRICS:"snsOnmlInvalidFrequencySelectMetrics",B2B_ONML_WEEKLY_FREQUENCY_SELECT_METRICS:"b2bOnmlWeeklyFrequencySelectMetrics",B2B_ONML_MONTHLY_FREQUENCY_SELECT_METRICS:"b2bOnmlMonthlyFrequencySelectMetrics",SNS_LEGACY_WEEKLY_FREQUENCY_SELECT_METRICS:"snsLegacyWeeklyFrequencySelectMetrics",
SNS_LEGACY_MONTHLY_FREQUENCY_SELECT_METRICS:"snsLegacyMonthlyFrequencySelectMetrics",SNS_LEGACY_INVALID_FREQUENCY_SELECT_METRICS:"snsLegacyInvalidFrequencySelectMetrics",SNS_ONML_UPSELL_MESSAGE_METRICS:"snsOnmlUpsellMessage",SNS_ONML_SUBSCRIBE_ONLY_METRICS:"snsOnmlSubscribeOnly",SNS_CUSTOMER_RECOGNIZED_BUT_NOT_SIGNED_IN:"snsOnmlCustomerRecognizedButNotSignedIn",SNS_REQUIRE_SIGN_IN_STATUS_FAILED:"snsOnmlRequireSignInStatusFailed",SNS_ONMLV2_POPOVER_TRIGGERS:"justSubscribeLearnMorePopoverNonTiered justSubscribeLearnMorePopoverTiered onmlv2LearnMorePopoverNonTiered onmlv2LearnMorePopoverTiered onmlv2LearnMorePopoverNewOrUnrecognized justSubscribePillPopoverNonTiered justSubscribePillPopoverTiered onmlv2PillPopoverNonTiered onmlv2PillPopoverTiered onmlv2PillPopoverNewOrUnrecognized".split(" "),
SNS_ONMLV2_BOTTOMSHEET_TRIGGERS:"justSubscribeLearnMoreBottomsheetNonTiered justSubscribeLearnMoreBottomsheetTiered onmlv2LearnMoreBottomsheetNonTiered onmlv2LearnMoreBottomsheetTiered onmlv2LearnMoreBottomsheetNewOrUnrecognized justSubscribePillBottomsheetNonTiered justSubscribePillBottomsheetTiered onmlv2PillBottomsheetNonTiered onmlv2PillBottomsheetTiered onmlv2PillBottomsheetNewOrUnrecognized".split(" "),SNS_ONMLV2_DESKTOP_POPOVER_SHOW_METRICS:"snsOnmlv2DesktopPopoverShow",SNS_ONMLV2_MOBILE_BOTTOMSHEET_SHOW_METRICS:"snsOnmlv2MobileBottomsheetShow",
SNS_ONMLV2_DELIVERY_OPTION_CLICK_METRICS:"snsOnmlv2DeliveryOptionClick",SNS_ONMLV2_DELIVERY_OPTION_CLICK_MOBILE_METRICS:"snsOnmlv2DeliveryOptionClickMobile",SNS_ONMLV2_SWITCH_TO_SNS_METRICS:"snsOnmlv2SwitchToSns",SNS_ONMLV2_SWITCH_TO_ONML_METRICS:"snsOnmlv2SwitchToOnml",SNS_ONMLV2_SWITCH_TO_SNS_MOBILE_METRICS:"snsOnmlv2SwitchToSnsMobile",SNS_ONMLV2_SWITCH_TO_ONML_MOBILE_METRICS:"snsOnmlv2SwitchToOnmlMobile",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_METRICS:"snsOnmlv2SubscribeNowWithOnmlDelivery",
SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_METRICS:"snsOnmlv2SubscribeNowWithSnsDelivery",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_MOBILE_METRICS:"snsOnmlv2SubscribeNowWithOnmlDeliveryMobile",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_MOBILE_METRICS:"snsOnmlv2SubscribeNowWithSnsDeliveryMobile",SNS_QUANTITY_SELECT_DESKTOP:"snsQuantitySelectDesktop",SNS_QUANTITY_SELECT_MOBILE:"snsQuantitySelectMobile",SNS_SWITCH_WIDGET_SEE_PRODUCTS_ONMLV2_METRICS:"snsSwitchWidgetSeeProductsOnmlv2",SNS_SWITCH_WIDGET_SEE_PRODUCTS_LEGACY_METRICS:"snsSwitchWidgetSeeProductsLegacy",
SNS_SWITCH_WIDGET_CONTINUE_LEGACY_METRICS:"snsSwitchWidgetContinueLegacy",SNS_SWITCH_WIDGET_CONTINUE_WITH_ONE_NOW_METRICS:"snsSwitchWidgetContinueWithOneNow",SNS_SWITCH_WIDGET_CONTINUE_WITH_SNS_METRICS:"snsSwitchWidgetContinueWithSns",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SAME_FREQ_AS_DEFAULT_FREQ:"snsOnmlv2SubscribeNowWithSameFreq",SNS_ONMLV2_SUBSCRIBE_NOW_WITH_DIFFERENT_FREQUENCY_OTHER_THAN_DEFAULT_FREQ:"snsOnmlv2SubscribeNowWithDifferentFreq",SNS_INVALID_FREQUENCY_ACCORDION_ROW:"snsInvalidFrequencyAccordionRow",
SNS_ONML_FREQUENCY_POPOVER_SELECTED:"snsOnmlFrequencyPopoverSelected",SNS_FREQUENCY_POPOVER_SELECTED:"snsFrequencyPopoverSelected",SNS_SHOW_MORE_FREQUENCY_OPTIONS_BTN_CLICKED:"snsShowMoreFrequencyOptionsBtnClicked",ONML_SHOW_MORE_FREQUENCY_OPTIONS_BTN_CLICKED:"onmlShowMoreFrequencyOptionsBtnClicked",SNS_ONML_FREQUENCY_LABEL_INGRESS_CLICKED:"snsOnmlFrequencyLabelIngressClicked",SNS_FREQUENCY_LABEL_INGRESS_CLICKED:"snsFrequencyLabelIngressClicked",SNS_ONML_FREQUENCY_INFO_LABEL_INGRESS_CLICKED:"snsOnmlFrequencyInfoLabelIngressClicked",
SNS_FREQUENCY_INFO_LABEL_INGRESS_CLICKED:"snsFrequencyInfoLabelIngressClicked",SNS_INVALID_FREQUENCY_POPOVER_INPUTS:"snsInvalidFrequencyPopoverInputs",SNS_INVALID_FREQUENCY_POPOVER_DATA_STRUCTURE:"snsInvalidFrequencyPopoverDataStructure",SNS_CREATE_SUBSCRIPTION_WITH_FREQUENCY:"snsCreateSubscriptionWithFrequency-",SNS_FREQUENCY_BOTTOMSHEET_SELECTED:"snsFrequencyBottomsheetSelected",SNS_ONML_FREQUENCY_BOTTOMSHEET_SELECTED:"snsOnmlFrequencyBottomsheetSelected",SNS_FREQUENCY_BOTTOMSHEET_UNIT_WEEKS_SELECTED:"snsFrequencyBottomsheetUnitWeeksSelected",
SNS_FREQUENCY_BOTTOMSHEET_UNIT_MONTHS_SELECTED:"snsFrequencyBottomsheetUnitMonthsSelected",SNS_ONML_FREQUENCY_BOTTOMSHEET_UNIT_WEEKS_SELECTED:"snsOnmlFrequencyBottomsheetUnitWeeksSelected",SNS_ONML_FREQUENCY_BOTTOMSHEET_UNIT_MONTHS_SELECTED:"snsOnmlFrequencyBottomsheetUnitMonthsSelected",SNS_FREQUENCY_VALUE_SELECTED:"snsFrequencyValueSelected",SNS_ONML_FREQUENCY_VALUE_SELECTED:"snsOnmlFrequencyValueSelected"}});p.when("A","sns-utils","sns-metrics-constants","sns-buybox-constants").register("sns-metrics-helper",
function(e,b,a,d){return{init:function(){e.declarative("sns-opt-in-checked","change",function(){var f=e.$(d.SNS_OPT_IN_CHECKBOX).is(":checked");m.ue&&(f?b.isSnsCustomer()?m.ue.count(a.SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS,(ue.count(a.SNS_ONML_EXISTING_SNS_CUSTOMER_CHECK_METRICS)||0)+1):m.ue.count(a.SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS,(ue.count(a.SNS_ONML_NEW_SNS_CUSTOMER_CHECK_METRICS)||0)+1):b.isSnsCustomer()?m.ue.count(a.SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS,(ue.count(a.SNS_ONML_EXISTING_SNS_CUSTOMER_UNCHECK_METRICS)||
0)+1):m.ue.count(a.SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS,(ue.count(a.SNS_ONML_NEW_SNS_CUSTOMER_UNCHECK_METRICS)||0)+1))});e.$(document).delegate(".sns-buybox-upsell-trigger","click",function(b){m.ue&&m.ue.count(a.SNS_ONML_UPSELL_MESSAGE_METRICS,(ue.count(a.SNS_ONML_UPSELL_MESSAGE_METRICS)||0)+1)});e.$(document).delegate("#sns-dp-frequency-trigger","click",function(b){m.ue&&m.ue.count(a.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS,(ue.count(a.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS)||0)+1)});e.$(document).delegate("#snsSelectedFrequencyLabel",
"click",function(b){m.ue&&m.ue.count(a.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS,(ue.count(a.SNS_ONML_FREQUENCY_LABEL_CLICK_METRICS)||0)+1)});e.on("a:accordion:sns-dp-frequency-accordion:select",function(){m.ue&&m.ue.count(a.SNS_ONML_FREQUENCY_CHANGE_METRICS,(ue.count(a.SNS_ONML_FREQUENCY_CHANGE_METRICS)||0)+1)});e.$(document).delegate("#snsFrequencyBottomSheet button","click",function(b){m.ue&&m.ue.count(a.SNS_ONML_FREQUENCY_CHANGE_METRICS,(ue.count(a.SNS_ONML_FREQUENCY_CHANGE_METRICS)||0)+1)});e.$(document).delegate("#subscribe-only",
"click",function(b){m.ue&&m.ue.count(a.SNS_ONML_SUBSCRIBE_ONLY_METRICS,(ue.count(a.SNS_ONML_SUBSCRIBE_ONLY_METRICS)||0)+1)});e.$(document).delegate("#replenishment-onml-frequency-popover","click",function(b){m.ue&&m.ue.count(a.SNS_ONML_FREQUENCY_LABEL_INGRESS_CLICKED,(ue.count(a.SNS_ONML_FREQUENCY_LABEL_INGRESS_CLICKED)||0)+1)});e.$(document).delegate("#replenishment-sns-frequency-popover","click",function(b){m.ue&&m.ue.count(a.SNS_FREQUENCY_LABEL_INGRESS_CLICKED,(ue.count(a.SNS_FREQUENCY_LABEL_INGRESS_CLICKED)||
0)+1)});e.$(document).delegate("#replenishment-onml-frequency-info-popover","click",function(b){m.ue&&m.ue.count(a.SNS_ONML_FREQUENCY_INFO_LABEL_INGRESS_CLICKED,(ue.count(a.SNS_ONML_FREQUENCY_INFO_LABEL_INGRESS_CLICKED)||0)+1)});e.$(document).delegate("#replenishment-sns-frequency-info-popover","click",function(b){m.ue&&m.ue.count(a.SNS_FREQUENCY_INFO_LABEL_INGRESS_CLICKED,(ue.count(a.SNS_FREQUENCY_INFO_LABEL_INGRESS_CLICKED)||0)+1)})}}});p.when("A","sns-onmlv2-utils","sns-metrics-constants","sns-buybox-constants",
"sns-constants","sns-onmlv2-cache","sns-vmf-utils").register("sns-onmlv2-metrics-helper",function(e,b,a,d,f,k,c){var g=e.$,l="",h="";a.SNS_ONMLV2_POPOVER_TRIGGERS.forEach(function(a){l+=" a:popover:beforeShow:"+a});a.SNS_ONMLV2_BOTTOMSHEET_TRIGGERS.forEach(function(a){h+=" a:sheet:beforeShow:"+a});e.declarative("sns-delivery-date","click",function(a){k.incrementDeliveryOptionClickCounter()});e.declarative("sns-delivery-date-bottom-sheet","click",function(a){k.incrementDeliveryOptionClickCounterMobile()});
e.declarative("sns-delivery-change-btn","click",function(a){g(d.SNS_DELIVERY_OPTION_DIV).is(":checked")?k.incrementDeliveryOptionSwitchToSnsCounter():g(d.ONML_DELIVERY_OPTION_DIV).is(":checked")&&k.incrementDeliveryOptionSwitchToOnmlCounter()});e.on("a:popover:beforeHide:sns-delivery-modal",function(b){q(a.SNS_ONMLV2_DELIVERY_OPTION_CLICK_METRICS,k.getDeliveryOptionClickCounter());q(a.SNS_ONMLV2_SWITCH_TO_SNS_METRICS,k.getDeliveryOptionSwitchToSnsCounter());q(a.SNS_ONMLV2_SWITCH_TO_ONML_METRICS,k.getDeliveryOptionSwitchToOnmlCounter());
q(a.SNS_QUANTITY_SELECT_DESKTOP,k.getQuantityClickCounterDesktop())});e.on("a:sheet:beforeHide:sns_delivery_bottom_sheet",function(){q(a.SNS_ONMLV2_DELIVERY_OPTION_CLICK_MOBILE_METRICS,k.getDeliveryOptionClickCounterMobile());g(d.SNS_DELIVERY_OPTION_DIV).is(":checked")?k.incrementDeliveryOptionSwitchToSnsCounterMobile():g(d.ONML_DELIVERY_OPTION_DIV).is(":checked")&&k.incrementDeliveryOptionSwitchToOnmlCounterMobile();q(a.SNS_ONMLV2_SWITCH_TO_SNS_MOBILE_METRICS,k.getDeliveryOptionSwitchToSnsCounterMobile());
q(a.SNS_ONMLV2_SWITCH_TO_ONML_MOBILE_METRICS,k.getDeliveryOptionSwitchToOnmlCounterMobile());q(a.SNS_QUANTITY_SELECT_MOBILE,k.getQuantityClickCounterMobile())});e.on(l,function(){n(a.SNS_ONMLV2_DESKTOP_POPOVER_SHOW_METRICS)});e.on(h,function(){n(a.SNS_ONMLV2_MOBILE_BOTTOMSHEET_SHOW_METRICS)});e.$(document).delegate("#sns-submit-declarative","click",function(c){c=k.getDeliveryOption();var d=b.isMobileDevice();c===f.DELIVERY_OPTION.SNS?d?n(a.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_MOBILE_METRICS):
n(a.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SNS_DELIVERY_METRICS):c===f.DELIVERY_OPTION.ONML&&(d?n(a.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_MOBILE_METRICS):n(a.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_ONML_DELIVERY_METRICS))});e.$(document).delegate("#sns-submit-btn-declarative","click",function(d){d=b.getSelectedDeliveryOption();d=b.isDeliveryChangeCheckboxVisible()?"defaultedWith"+a.METRIC_DELIMITER+b.getDefaultDeliveryOption()+a.METRIC_DELIMITER+"signUpWith"+a.METRIC_DELIMITER+d+a.METRIC_DELIMITER+"CheckBoxExperience":
"defaultedWith"+a.METRIC_DELIMITER+b.getDefaultDeliveryOption()+a.METRIC_DELIMITER+"signUpWith"+a.METRIC_DELIMITER+d+a.METRIC_DELIMITER+"EnhancedDeliveryChangeLinkExperience";b.emitMetric(d);c.isSelectedFreqSameAsDefaultFreq()?b.emitMetric(a.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_SAME_FREQ_AS_DEFAULT_FREQ):b.emitMetric(a.SNS_ONMLV2_SUBSCRIBE_NOW_WITH_DIFFERENT_FREQUENCY_OTHER_THAN_DEFAULT_FREQ)});e.$(document).delegate(d.SNS_ONMLV2_QUANTITY_TRIGGER_DESKTOP,"change",function(b){k.incrementQuantityClickCounterDesktop();
q(a.SNS_QUANTITY_SELECT_DESKTOP,k.getQuantityClickCounterDesktop())});e.$(document).delegate(d.SNS_ONMLV2_QUANTITY_TRIGGER_MOBILE,"change",function(b){k.incrementQuantityClickCounterMobile();q(a.SNS_QUANTITY_SELECT_MOBILE,k.getQuantityClickCounterMobile())});var n=function(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)},q=function(a,b){m.ue&&m.ue.count(a,b)}});p.when("A","sns-onmlv2-utils","sns-buybox-constants").register("sns-onmlv2-cache",function(e,b,a){var d=e.$,f=0,k=0,c=0,g=0,l=0,h=0,n=0,m=0;return{getDeliveryOptionClickCounter:function(){return f},
incrementDeliveryOptionClickCounter:function(){f++},getDeliveryOptionClickCounterMobile:function(){return k},incrementDeliveryOptionClickCounterMobile:function(){k++},getDeliveryOptionSwitchToSnsCounter:function(){return c},incrementDeliveryOptionSwitchToSnsCounter:function(){c++},getDeliveryOptionSwitchToSnsCounterMobile:function(){return g},incrementDeliveryOptionSwitchToSnsCounterMobile:function(){g++},getDeliveryOptionSwitchToOnmlCounterMobile:function(){return h},incrementDeliveryOptionSwitchToOnmlCounterMobile:function(){h++},
getDeliveryOptionSwitchToOnmlCounter:function(){return l},incrementDeliveryOptionSwitchToOnmlCounter:function(){l++},getDeliveryOption:function(){return d(a.SNS_ONMLV2_DELIVERY_OPTION_FORM_FIELD).val()},getQuantityClickCounterDesktop:function(){return n},incrementQuantityClickCounterDesktop:function(a){n++},getQuantityClickCounterMobile:function(){return m},incrementQuantityClickCounterMobile:function(a){m++}}});p.when("A","ready").execute("sns-detail-page-impressions",function(e){function b(a){m.ue&&
m.ue.count(a,(ue.count(a)||0)+1)}var a=e.$;e.on.load(function(){if(a("#snsAccordionRowMiddle").length)try{b("snsBuyBoxVisibleOnDetailPage"),a("#sns-pill").length&&a("#sns-pill").text().trim()&&b("snsBuyBoxPillVisibleOnDetailPage"),a("#snsAccordionRowMiddle #a-popover-learnMorePopover").length&&a("#snsAccordionRowMiddle #a-popover-learnMorePopover").text().trim()&&b("snsBuyBoxLearnMoreVisibleOnDetailPage"),a("#sns-base-price").length&&a("#sns-base-price").text().trim()&&b("snsBuyBoxPriceVisibleOnDetailPage"),
a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim()&&b("snsBuyBoxDeliveryUpsellVisibleOnDetailPage"),a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("1 more")?b("snsBuyBoxDeliveryUpsell_2_MoreSubsToGo"):a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("2 more")?b("snsBuyBoxDeliveryUpsell_3_MoreSubsToGo"):a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("3 more")?
b("snsBuyBoxDeliveryUpsell_4_MoreSubsToGo"):a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("Unlock extra savings")?b("snsBuyBoxDeliveryUpsellAlmostTieredCustomer"):a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("You've unlocked extra savings")?b("snsBuyBoxDeliveryUpsellTieredCustomer"):a("#sns-delivery-buybox-upsell").length&&(a("#sns-delivery-buybox-upsell").text().trim().includes("No fees")||a("#sns-delivery-buybox-upsell").text().trim().includes("Cancel anytime"))&&
b("snsBuyBoxDeliveryUpsellNewOrUnrecognizedCustomer"),a(".sns-delivery-link").length&&a(".sns-delivery-link").text().trim()&&b("snsBuyBoxFRDDVisibleOnDetailPage"),a("#snsAccordionRowMiddle #availability").length&&a("#snsAccordionRowMiddle #availability").text().trim()&&a("#snsAccordionRowMiddle #availability").text().trim().includes("In Stock")&&b("snsBuyBoxAvailabilityInStockVisibleOnDetailPage"),(a("#rcxOrdFreqSnsWrapper").length&&a("#rcxOrdFreqSnsWrapper").text().trim()||a("#replenishment-sns-frequency-accordion").length)&&
b("snsBuyBoxFrequencySelectorVisibleOnDetailPage"),a("#rcx-subscribe-submit-button").length&&a("#rcx-subscribe-submit-button").text().trim()?b("snsBuyBoxSubscribeNowButtonVisibleOnDetailPage"):b("snsBuyBoxSubscribeNowButtonNotVisibleOnDetailPage")}catch(d){b("snsBuyBoxImpressionMetricException")}else if(a("#snsAccordionRowMobileMiddle").length)try{b("snsBuyBoxVisibleOnDetailPageMobile"),a("#sns-pill").length&&a("#sns-pill").text().trim()&&b("snsBuyBoxPillVisibleOnDetailPageMobile"),a("#snsAccordionRowMobileMiddle #a-popover-learnMorePopover").length&&
a("#snsAccordionRowMobileMiddle #a-popover-learnMorePopover").text().trim()&&b("snsBuyBoxLearnMoreVisibleOnDetailPageMobile"),a("#sns-base-price").length&&a("#sns-base-price").text().trim()&&b("snsBuyBoxPriceVisibleOnDetailPageMobile"),a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim()&&b("snsBuyBoxDeliveryUpsellVisibleOnDetailPageMobile"),a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("1 more")?b("snsBuyBoxDeliveryUpsell_2_MoreSubsToGoMobile"):
a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("2 more")?b("snsBuyBoxDeliveryUpsell_3_MoreSubsToGoMobile"):a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("3 more")?b("snsBuyBoxDeliveryUpsell_4_MoreSubsToGoMobile"):a("#sns-delivery-buybox-upsell").length&&a("#sns-delivery-buybox-upsell").text().trim().includes("Unlock extra savings")?b("snsBuyBoxDeliveryUpsellAlmostTieredCustomerMobile"):a("#sns-delivery-buybox-upsell").length&&
a("#sns-delivery-buybox-upsell").text().trim().includes("You've unlocked extra savings")?b("snsBuyBoxDeliveryUpsellTieredCustomerMobile"):a("#sns-delivery-buybox-upsell").length&&(a("#sns-delivery-buybox-upsell").text().trim().includes("No fees")||a("#sns-delivery-buybox-upsell").text().trim().includes("Cancel anytime"))&&b("snsBuyBoxDeliveryUpsellNewOrUnrecognizedCustomerMobile"),a(".sns-delivery-link").length&&a(".sns-delivery-link").text().trim()&&b("snsBuyBoxFRDDVisibleOnDetailPageMobile"),a("#snsAccordionRowMobileMiddle #availability").length&&
a("#snsAccordionRowMobileMiddle #availability").text().trim()&&a("#snsAccordionRowMobileMiddle #availability").text().trim().includes("In Stock")&&b("snsBuyBoxAvailabilityInStockVisibleOnDetailPageMobile"),(a("#rcxOrdFreqSnsWrapper").length&&a("#rcxOrdFreqSnsWrapper").text().trim()||a("#replenishment-sns-frequency-accordion").length)&&b("snsBuyBoxFrequencySelectorVisibleOnDetailPageMobile"),a("#rcx-subscribe-submit-button").length&&a("#rcx-subscribe-submit-button").text().trim()?b("snsBuyBoxSubscribeNowButtonVisibleOnDetailPageMobile"):
b("snsBuyBoxSubscribeNowButtonNotVisibleOnDetailPageMobile")}catch(d){b("snsBuyBoxImpressionMetricExceptionMobile")}else b("snsBuyBoxNotVisibleOnDetailPage")})});p.when("sns-atc","sns-frequency-bottom-sheet","sns-frequency-popover","sns-opt-in-checkbox","sns-event-handler","sns-metrics-helper","sns-price-refresh").execute("sns-execute",function(e,b,a,d,f,k,c){e.init();b.init();a.init();d.init();f.init();k.init();c.init()});p.when("moq-core").register("sns-moq-helper",function(e){return{isSnsLocked:e.isSnsLocked}});
p.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-vmf-utils","sns-constants").register("sns-dp-widget-utils",function(e,b,a,d,f){function k(a){for(var b=[];b.length<a;){var c=Math.floor(Math.random()*a);-1===b.indexOf(c)&&b.push(c)}return b}var c=e.$,g=!1,l;return{getSnSRecommendations:function(){var d=a.getCurrencyCode();c.ajax({url:b.GET_MYD_RECOMMENDATIONS_URL,type:"GET",data:{currencyCode:d,shipId:"undef",sourcePage:b.SOURCE_PAGE},dataType:"json",success:function(a){l=k(20);c("#snsHighUpsellCartRecs").replaceWith(a.recommendationsDiv);
for(a=0;3>a;a++)c("#recItem"+l[a]).removeClass("aok-hidden")},error:function(b){a.emitSsbMetrics("ssb-get-recs-ajax-error","snsHighUpsellCartRecs");c("#snsHighUpsellCartRecs").remove()}})},createImage:function(a){return'\x3cimg id\x3d"hucATCProductImage" src\x3d"'+a+'" class\x3d"'+(e.capabilities.mobile?"huc-confirmation-image-mobile":"huc-confirmation-image")+'"/\x3e'},isSSBDataPresent:function(){return null!=a.getAStateFromDomWithoutJson(t,"sns-huc-data","currencyCode")},updateDeliveryOptionWidget:function(){g||
(g=!0,c("#sns-only-delivery-option-text").html(c("#sns-only-delivery-option-text").html().replace(/%_month_%/g,"\x3cspan class \x3d'sns-only-month'\x3e\x3c/span\x3e")),c("#sns-only-delivery-option-text").html(c("#sns-only-delivery-option-text").html().replace(/%_day_%/g,"\x3cspan class \x3d'sns-only-day'\x3e\x3c/span\x3e")),c("#sns-only-delivery-option-text").html(c("#sns-only-delivery-option-text").html().replace(/%_upsell_information_%/g,"\x3cspan class \x3d'sns-upsell-message'\x3e\x3c/span\x3e")),
c("#onml-later-delivery-option-text").html(c("#onml-later-delivery-option-text").html().replace(/%_frequency_%/g,"\x3cspan class \x3d'sns-frequency'\x3e\x3c/span\x3e")),c("#onml-later-delivery-option-text").html(c("#onml-later-delivery-option-text").html().replace(/%_date-more-later_%/g,"\x3cspan class \x3d'sns-ml-date'\x3e\x3c/span\x3e")));var b=a.getDeliveryInfoParam(),e=a.getSnsFrequencyParam(),k=a.getOnmlFrequencyParam(),l=d.getFrequencyIndex(f.DELIVERY_OPTION.SNS),m=d.getFrequencyIndex(f.DELIVERY_OPTION.ONML),
p=b.snsDates[l].split(" "),t=p[0],p=p[1],e=e[l].upsellInformation.message,b=b.onmlDates[m],k=k[l].label.split(" "),k=k[0]+" "+k[1];c(".sns-ml-date").html(b);c(".sns-frequency").html(k);c(".sns-only-month").html(t);c(".sns-only-day").html(p);c(".sns-upsell-message").html(e)},isDeliveryOptionEnabled:function(){return!1},getRandomizeRecList:function(){return 0!==l.length?l:k(20)},disableButton:function(a){p.when("a-button").execute(function(b){b("#"+a).disable()})},enableButton:function(a){p.when("a-button").execute(function(b){b("#"+
a).enable()})},SUBSCRIBE_ADD_TO_CART_FORM_ATTRIBUTES:{name:"sns-onmlv2-add-to-cart",id:"sns-onmlv2-add-to-cart",method:"POST",action:"/gp/subscribe-and-save/atc/sns-atc.html"},SUBSCRIBE_FORM_ATTRIBUTES:{name:"sns-onmlv2-subscribe",id:"sns-onmlv2-subscribe",method:"POST",action:"/gp/subscribe-and-save/atc/sns-atc.html"}}});p.when("A","sns-buybox-constants","sns-onmlv2-utils","sns-dp-widget-utils").register("sns-high-upsell-cart-widget",function(e,b,a,d){function f(f){var e,m;e=k("\x3cform\x3e",{method:d.SUBSCRIBE_FORM_ATTRIBUTES.method,
action:d.SUBSCRIBE_FORM_ATTRIBUTES.action,id:d.SUBSCRIBE_FORM_ATTRIBUTES.id,name:d.SUBSCRIBE_FORM_ATTRIBUTES.name});m=d.SUBSCRIBE_FORM_ATTRIBUTES.id;var p="";f="#hucRecFields"+f;var t=k(f+" [name\x3d'snsRecsMcf']").val()+b.SNS_ONML_MONTH,p=p+a.createHiddenInput("snsAsin",k(f+" [name\x3d'snsRecsAsin']").val()),p=p+a.createHiddenInput("rcxOrdFreqOnml",t),p=p+a.createHiddenInput("onmlSelected","true"),p=p+a.createHiddenInput("vmfEnabled","true"),p=p+a.createHiddenInput("quantity","1"),p=p+a.createHiddenInput("ref",
"sns-subscribe-btn-dp-vmf-onml"),p=p+a.createHiddenInput("submit.subscribe","1"),p=p+a.createHiddenInput("merchantId",k(f+" [name\x3d'snsRecsMerchantID']").val()),p=p+a.createHiddenInput("offerListingID",k(f+" [name\x3d'snsRecsOfferListingID']").val()),p=p+a.createHiddenInput("hucWidgetEnabled","1");e.html(p);k("body").append(e);e=k("#"+m).serialize();k.ajax({url:d.SUBSCRIBE_FORM_ATTRIBUTES.action,type:d.SUBSCRIBE_FORM_ATTRIBUTES.method,data:e,success:function(a){a=d.getRandomizeRecList();k("#hucATCProductImage").replaceWith(d.createImage(l));
k("#"+g).addClass("aok-hidden");k("#recItem"+a[c]).insertAfter("#"+g);k("#recItem"+a[c]).removeClass("aok-hidden");c++},error:function(){a.emitSsbMetrics("ssb-rec-atc-ajax-error","sns-huc-add-to-cart")}});k("#"+m).remove()}var k=e.$,c=3,g,l;e.declarative("sns-huc-add-to-cart","click",function(b){a.emitSsbMetrics(e.capabilities.mobile?"ssb_recs_atc_mobile":"ssb_recs_atc_desktop","sns-huc-add-to-cart");g=b.data.recId;var c=b.data.recIndex;l=b.data.productImageURL;d.disableButton((e.capabilities.mobile?
"recs-atc-mobile":"recs-atc-desktop")+c);f(c)});e.declarative("sns-huc-go-to-cart","click",function(c){a.emitSsbMetrics(e.capabilities.mobile?"ssb_go_to_cart_mobile":"ssb_go_to_cart_desktop","sns-huc-go-to-cart");m.location.href=b.VIEW_CART_URL});e.declarative("sns-huc-go-to-checkout","click",function(c){a.emitSsbMetrics(e.capabilities.mobile?"ssb_go_to_checkout_mobile":"ssb_go_to_checkout_desktop","sns-huc-go-to-checkout");m.location.href=b.GO_TO_CHECKOUT_URL})});p.when("A","a-dropdown","sns-vmf-utils",
"sns-onmlv2-utils","sns-metrics-constants","ready").execute("b2b-onmlv2-frequency-update",function(e,b,a,d,f){function k(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)}var c=e.$;c("#rcxOrdFreq").change(function(){if(c("#b2brd").length&&!0===d.getIsRDProgramWinner()&&"rcxOrdFreqOnml"===c("#rcxOrdFreq").attr("name")!==!1){var a;a=!0===d.getIsCustomerPrimeMap()?d.getOnmlFrequencyParamForB2B():d.getSnsFrequencyParamForB2B();var b=c("[name\x3drcxOrdFreqOnml]").prop("selectedIndex"),e=c("[name\x3drcxOrdFreqOnml]")[0].options[b].value;
c('[name\x3d"rcxOrdFreqOnml"]').val(e);a=a[b];c(".b2brd-delivery-buybox-upsell-message").html(a.upsellInformation.message);c(".b2brd-delivery-buybox-upsell-additional-message-title").html(a.upsellInformation.additionalMessageTitle);c(".b2brd-delivery-buybox-upsell-additional-message").html(a.upsellInformation.additionalMessage);0===a.highlightedDiscount?(c("#rd-base-price").removeClass("aok-hidden"),c("#rd-tiered-price").addClass("aok-hidden")):(c("#rd-base-price").addClass("aok-hidden"),c("#rd-tiered-price").removeClass("aok-hidden"));
a=c("[name\x3drcxOrdFreqOnml]").val();k(f.B2B_BUY_BOX_MESSAGE_UPDATE_SUCCESSFUL);0<a.search("W")?k(f.B2B_ONML_WEEKLY_FREQUENCY_SELECT_METRICS):k(f.B2B_ONML_MONTHLY_FREQUENCY_SELECT_METRICS)}}).error(function(){k(f.B2B_BUY_BOX_MESSAGE_UPDATE_FAILED)})});p.when("A","a-popover","sns-onmlv2-utils","sns-common-utils").register("sns-savings-utils",function(e,b,a,d){function f(a){m.ue&&m.ue.count(a,(ue.count(a)||0)+1)}function k(){var a=e.$("#sns-annual-savings"),b=e.$("#sns-annual-savings-learn-more");
a.addClass("aok-hidden");b.addClass("aok-hidden");d.updateLearnMoreUpsellHeight(!1)}function c(a){return a!==t&&null!=a}var g=function(b){var g=a.getAnnualSavingsParamMap(),l=a.getAnnualSavingsWeblabTreatment(),m=a.getDefaultSavingsValue(),p=a.getQuantityIndex();g&&0!==Object.keys(g).length?c(m)&&""!==m?c(p)?c(l)?"C"===l?(f("snsAnnualSavingsWeblabInControl"),k()):c(b)?g.hasOwnProperty(b)&&c(g[b][p])&&0!==g[b][p].length?(b=g[b][p],g=e.$("#sns-annual-savings"),l=e.$("#sns-annual-savings-learn-more"),
e.$("#sns-annual-savings-value").text(b),g.removeClass("aok-hidden"),l.removeClass("aok-hidden"),d.updateLearnMoreUpsellHeight(!0),f("snsAnnualSavingsShown")):(f("snsAnnualSavingsValueAbsent"),k()):(f("snsFrequencyValueAbsent"),k()):(f("snsAnnualSavingsWeblabTreatmentAbsent"),k()):(f("snsQuantityIndexAbsent"),k()):(f("snsDefaultSavingsValueAbsent"),k()):(f("snsAnnualSavingsMapIsNotPresent"),k())},l=function(b){e.$("#sns-potential-savings").addClass("aok-hidden");e.$("#sns-frequency-upsell").removeClass("aok-hidden");
e.$("#sns-annual-savings-learn-more").addClass("aok-hidden");d.updateLearnMoreUpsellHeight(!1);g(a.getFrequencyValueExcludingDeliveryType(b))};return{checkPreConditionsAndUpdateAnnualSavings:g,checkPreConditionsAndUpdatePotentialSavings:function(b){var g=a.getPotentialSavingsParamMap(),k=a.getQuantityIndex();g&&0!==Object.keys(g).length?c(k)?c(b)?(k+=1,g.hasOwnProperty(b)&&c(g[b][k])&&0!==g[b][k].length?(b=g[b][k],g=e.$("#sns-potential-savings"),k=e.$("#sns-annual-savings-learn-more"),g.html(b),g.removeClass("aok-hidden"),
k.removeClass("aok-hidden"),e.$("#sns-frequency-upsell").addClass("aok-hidden"),e.$("#sns-annual-savings").addClass("aok-hidden"),d.updateLearnMoreUpsellHeight(!0),f("snsPotentialSavingsShown")):(f("snsPotentialSavingsValueAbsent"),l(b))):(f("snsFrequencyValueAbsent"),l(b)):(f("snsQuantityIndexAbsent"),l(b)):(f("snsPotentialSavingsMapIsNotPresent"),l(b))}}});p.when("A","a-dropdown","sns-vmf-utils","sns-onmlv2-utils","sns-savings-utils","sns-constants","sns-buybox-constants","ready").execute("sns-quantity-update",
function(e,b,a,d,f,k,c){var g=e.$;e.on("a:dropdown:rcxsubsQuan:select",function(b){b=g("#rcxOrdFreqOnmlWrapper").hasClass("aok-hidden")||g(c.REPLENISHMENT_ONML_FREQUENCY_POPOVER_ID).hasClass("aok-hidden")||g(c.REPLENISHMENT_ONML_FREQUENCY_INFO_POPOVER_ID).hasClass("aok-hidden")?a.getFrequencyValue(k.DELIVERY_OPTION.SNS):a.getFrequencyValue(k.DELIVERY_OPTION.ONML);var e=d.getFrequencyValueExcludingDeliveryType(b);f.checkPreConditionsAndUpdateAnnualSavings(e);f.checkPreConditionsAndUpdatePotentialSavings(b)})});
p.when("A","sns-onmlv2-utils","ready").execute("sns-udm-delivery-block-styling",function(e,b){function a(){try{var a=d("div[id^\x3d'snsAccordionRow'] div#mir-layout-DELIVERY_BLOCK");a&&a.each(function(){var a=d(this).find("div:last");a&&a.removeClass(function(a,b){return(b.match(/(^|\s)a-spacing-\S+/g)||[]).join(" ")}).addClass("a-spacing-none")})}catch(e){b.emitMetric("snsUdmDeliveryBlockSpacingAdjustmentFailed"),b.logErrorWithAttribution("sns-delivery-block-apply-styling","Error occurred while applying delivery block styling "+
e)}}var d=e.$;a();e.on("a:pageUpdate",function(b){a()})})});
/* ******** */
